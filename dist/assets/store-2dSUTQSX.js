import{i as _,b as p,A as x,c as D}from"./axios.config-jCy-uYyV.js";import{V as L,W as v}from"./index-Rev-6aY5.js";var C=Object.defineProperty,A=Object.getOwnPropertyDescriptor,U=(e,t,s,r)=>{for(var a=r>1?void 0:r?A(t,s):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(a=(r?n(t,s,a):n(a))||a);return r&&a&&C(t,s,a),a},S=(e,t)=>(s,r)=>t(s,r,e);let u=class{constructor(e){this._api=e}async create(e){return{data:(await this._api.axios({method:"post",url:"/admin/create-warning",data:{description:e.description}})).data,message:"ສຳເລັດເເລ້ວ",status:"success"}}async update(e){return{data:(await this._api.axios({method:"put",url:`/admin/update-warning/${e.id}`,data:{description:e.description}})).data,message:"ອັບເດດ ສຳເລັດ",status:"success"}}async delete(e){return{data:(await this._api.axios({method:"delete",url:`/admin/delete-warning/${e}`})).data,message:"ສຳເລັດເເລ້ວ.",status:"success"}}async getAll(e){var a;const t=await this._api.axios({url:"/admin/list-warnings",params:{page:e.page,per_page:e.limit,filter:(a=e.filter)==null?void 0:a.description}}),{data:s,pagination:r}=t.data.data;return{data:{props:s,total:r.total},status:"success"}}async getOne(e){return(await this._api.axios({url:`/admin/list-warning/${e}`})).data}};u=U([_(),S(0,p(x))],u);var E=Object.defineProperty,G=Object.getOwnPropertyDescriptor,W=(e,t,s,r)=>{for(var a=r>1?void 0:r?G(t,s):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(a=(r?n(t,s,a):n(a))||a);return r&&a&&E(t,s,a),a},B=(e,t)=>(s,r)=>t(s,r,e);let g=class{constructor(e){this._api=e}async execute(e){return await this._api.create(e)}};g=W([_(),B(0,p(u))],g);var F=Object.defineProperty,I=Object.getOwnPropertyDescriptor,R=(e,t,s,r)=>{for(var a=r>1?void 0:r?I(t,s):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(a=(r?n(t,s,a):n(a))||a);return r&&a&&F(t,s,a),a},V=(e,t)=>(s,r)=>t(s,r,e);let w=class{constructor(e){this._api=e}async execute(e){try{return await this._api.getAll(e)}catch(t){t.response.status===422&&Object.keys(t.response.data.errors).map(s=>`${s}: ${t.response.data.errors[s].join(", ")}`).join("; ")}}};w=R([_(),V(0,p(u))],w);var q=Object.defineProperty,z=Object.getOwnPropertyDescriptor,H=(e,t,s,r)=>{for(var a=r>1?void 0:r?z(t,s):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(a=(r?n(t,s,a):n(a))||a);return r&&a&&q(t,s,a),a},J=(e,t)=>(s,r)=>t(s,r,e);let h=class{constructor(e){this._api=e}async execute(e){return await this._api.update(e)}};h=H([_(),J(0,p(u))],h);var K=Object.defineProperty,M=Object.getOwnPropertyDescriptor,N=(e,t,s,r)=>{for(var a=r>1?void 0:r?M(t,s):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(a=(r?n(t,s,a):n(a))||a);return r&&a&&K(t,s,a),a},Q=(e,t)=>(s,r)=>t(s,r,e);let O=class{constructor(e){this._api=e}async execute(e){return await this._api.delete(e)}};O=N([_(),Q(0,p(u))],O);var T=Object.defineProperty,X=Object.getOwnPropertyDescriptor,Y=(e,t,s,r)=>{for(var a=r>1?void 0:r?X(t,s):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(a=(r?n(t,s,a):n(a))||a);return r&&a&&T(t,s,a),a},Z=(e,t)=>(s,r)=>t(s,r,e);let m=class{constructor(e){this._api=e}async execute(e){return await this._api.getOne(e)}};m=Y([_(),Z(0,p(u))],m);var k=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,te=(e,t,s,r)=>{for(var a=r>1?void 0:r?ee(t,s):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(a=(r?n(t,s,a):n(a))||a);return r&&a&&k(t,s,a),a},d=(e,t)=>(s,r)=>t(s,r,e);let P=class{constructor(e,t,s,r,a){this._create=e,this._getAll=t,this._update=s,this._delete=r,this._getOne=a}async register(e){return await this._create.execute(e)}async update(e){return await this._update.execute(e)}async delete(e){return await this._delete.execute(e)}async getAll(e){return await this._getAll.execute(e)}async getOne(e){return await this._getOne.execute(e)}};P=te([_(),d(0,p(g)),d(1,p(w)),d(2,p(h)),d(3,p(O)),d(4,p(m))],P);const se=L("admin-warning-store",()=>{const e=D.resolve(P),t=v({data:{props:[],total:0},isLoading:!1,btnLoading:!1,error:""}),s=v({data:{props:""}}),r=v({page:1,limit:10,filter:{description:""}}),a=v({});async function i(){t.isLoading=!0,t.btnLoading=!0;try{await e.register(a),await f(),t.error=""}catch(o){let c="";o.response.status===422&&(c=Object.keys(o.response.data.errors).map(l=>`${l}: ${o.response.data.errors[l].join(", ")}`).join("; ")),t.error=c}t.isLoading=!1,t.btnLoading=!1}async function n(){t.isLoading=!0,t.btnLoading=!0;try{await e.update(a),await f(),await b(),t.error=""}catch(o){let c="";o.response.status===422&&(c=Object.keys(o.response.data.errors).map(l=>`${l}: ${o.response.data.errors[l].join(", ")}`).join("; ")),t.error=c}t.isLoading=!1,t.btnLoading=!1}async function j(o){t.isLoading=!0;try{await e.delete(o),await f(),t.error=""}catch(c){let l="";c.response.status===422&&(l=Object.keys(c.response.data.errors).map($=>`${$}: ${c.response.data.errors[$].join(", ")}`).join("; ")),t.error=l}t.isLoading=!1}async function y(o){t.isLoading=!0;const c=await e.getOne(o);c&&c.data&&c.message==="success"&&(s.data.props=c.data,t.isLoading=!1)}async function f(){t.isLoading=!0;const o=await e.getAll({page:r.page,limit:r.limit,filter:r.filter});o&&o.data&&(o==null?void 0:o.status)=="success"&&(t.data.props=o.data.props,t.data.total=o.data.total,t.isLoading=!1)}async function b(){a.description=""}return{register:i,update:n,remove:j,getOne:y,getAll:f,form:a,setStateFilter:r,state:t,getById:s}});export{se as a};
