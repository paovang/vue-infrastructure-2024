import{G as W,V as B,W as f}from"./index-hAcWNrTa.js";import{i as u,b as l,A as F,c as N}from"./axios.config-jCy-uYyV.js";var T=Object.defineProperty,V=Object.getOwnPropertyDescriptor,q=(e,s,t,a)=>{for(var r=a>1?void 0:a?V(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&T(s,t,r),r},z=(e,s)=>(t,a)=>s(t,a,e);let _=class{constructor(e){this._api=e}async create(e){return{data:(await this._api.axios({method:"post",url:"/owner/add-real-estate-user",data:{name:e.name,email:e.email,password:e.password,password_confirmation:e.password_confirmation,profile:e.profile,roleId:e.roleId,permissionIds:e.permissionIds}})).data,message:"ເພີ່ມຂໍ້ມູນບໍລິສັດສຳເລັດແລ້ວ",status:"success"}}async update(e){return{data:(await this._api.axios({method:"put",url:`/owner/edit-real-estate-user/${e.id}`,data:{name:e.name,email:e.email,profile:e.profile,roleId:e.roleId,permissionIds:e.permissionIds}})).data,message:"ອັບເດດ ຂໍ້ມູນສຳເລັດເເລ້ວ",status:"success"}}async delete(e){return{data:(await this._api.axios({method:"delete",url:`/owner/delete-real-estate-user/${e}`})).data,message:"ລຶບຂໍ້ມູນ ສຳເລັດເເລ້ວ.",status:"success"}}async getAll(e){var r,o;const s=await this._api.axios({url:"/owner/list-real-estate-users",params:{page:e.page,per_page:e.limit,name:(r=e.filter)==null?void 0:r.name,role:(o=e.filter)==null?void 0:o.role}}),{data:t,pagination:a}=s.data.data;return{data:{props:t,total:a.total},status:"success"}}async getOne(e){return(await this._api.axios({method:"get",url:"/owner/list-real-estate-user/"+e})).data}async getAllRoles(){return(await this._api.axios({method:"get",url:"roles",params:{roles:[W.USER_OWNER]}})).data}async getAllPermissions(){return(await this._api.axios({method:"get",url:"permissions",params:{types:["all","owner"]}})).data}async getUserProfile(){return(await this._api.axios({method:"get",url:"/owner/get-user-owner-profile"})).data}async updateProfile(e){return{data:(await this._api.axios({method:"put",url:`/owner/update-user-owner-profile/${e.id}`,data:{customer_id:e.customer_id,name:e.name,owner:e.owner,email:e.email,address:e.address,tel:e.tel,id_no:e.id_no,profile:e.profile,id_image:e.id_image}})).data,message:"ອັບເດດ ຂໍ້ມູນສຳເລັດເເລ້ວ",status:"success"}}};_=q([u(),z(0,l(F))],_);var H=Object.defineProperty,J=Object.getOwnPropertyDescriptor,K=(e,s,t,a)=>{for(var r=a>1?void 0:a?J(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&H(s,t,r),r},M=(e,s)=>(t,a)=>s(t,a,e);let w=class{constructor(e){this._api=e}async execute(e){return await this._api.create(e)}};w=K([u(),M(0,l(_))],w);var Q=Object.defineProperty,X=Object.getOwnPropertyDescriptor,Y=(e,s,t,a)=>{for(var r=a>1?void 0:a?X(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&Q(s,t,r),r},Z=(e,s)=>(t,a)=>s(t,a,e);let P=class{constructor(e){this._api=e}async execute(e){try{return await this._api.getAll(e)}catch(s){s.response.status===422&&Object.keys(s.response.data.errors).map(t=>`${t}: ${s.response.data.errors[t].join(", ")}`).join("; ")}}};P=Y([u(),Z(0,l(_))],P);var k=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,se=(e,s,t,a)=>{for(var r=a>1?void 0:a?ee(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&k(s,t,r),r},re=(e,s)=>(t,a)=>s(t,a,e);let g=class{constructor(e){this._api=e}async execute(e){return await this._api.update(e)}};g=se([u(),re(0,l(_))],g);var ae=Object.defineProperty,te=Object.getOwnPropertyDescriptor,oe=(e,s,t,a)=>{for(var r=a>1?void 0:a?te(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&ae(s,t,r),r},ie=(e,s)=>(t,a)=>s(t,a,e);let h=class{constructor(e){this._api=e}async execute(e){return await this._api.delete(e)}};h=oe([u(),ie(0,l(_))],h);var ne=Object.defineProperty,le=Object.getOwnPropertyDescriptor,ce=(e,s,t,a)=>{for(var r=a>1?void 0:a?le(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&ne(s,t,r),r},pe=(e,s)=>(t,a)=>s(t,a,e);let O=class{constructor(e){this._api=e}async execute(){return await this._api.getAllRoles()}};O=ce([u(),pe(0,l(_))],O);var _e=Object.defineProperty,ue=Object.getOwnPropertyDescriptor,de=(e,s,t,a)=>{for(var r=a>1?void 0:a?ue(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&_e(s,t,r),r},fe=(e,s)=>(t,a)=>s(t,a,e);let $=class{constructor(e){this._api=e}async execute(){return await this._api.getAllPermissions()}};$=de([u(),fe(0,l(_))],$);var me=Object.defineProperty,ve=Object.getOwnPropertyDescriptor,we=(e,s,t,a)=>{for(var r=a>1?void 0:a?ve(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&me(s,t,r),r},Pe=(e,s)=>(t,a)=>s(t,a,e);let y=class{constructor(e){this._api=e}async execute(e){return await this._api.getOne(e)}};y=we([u(),Pe(0,l(_))],y);var ge=Object.defineProperty,he=Object.getOwnPropertyDescriptor,Oe=(e,s,t,a)=>{for(var r=a>1?void 0:a?he(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&ge(s,t,r),r},$e=(e,s)=>(t,a)=>s(t,a,e);let j=class{constructor(e){this._api=e}async execute(){return await this._api.getUserProfile()}};j=Oe([u(),$e(0,l(_))],j);var ye=Object.defineProperty,je=Object.getOwnPropertyDescriptor,be=(e,s,t,a)=>{for(var r=a>1?void 0:a?je(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&ye(s,t,r),r},xe=(e,s)=>(t,a)=>s(t,a,e);let b=class{constructor(e){this._api=e}async execute(e){return await this._api.updateProfile(e)}};b=be([u(),xe(0,l(_))],b);var Ae=Object.defineProperty,Ue=Object.getOwnPropertyDescriptor,De=(e,s,t,a)=>{for(var r=a>1?void 0:a?Ue(s,t):s,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(a?i(s,t,r):i(r))||r);return a&&r&&Ae(s,t,r),r},d=(e,s)=>(t,a)=>s(t,a,e);let x=class{constructor(e,s,t,a,r,o,i,m,v){this._create=e,this._getAll=s,this._update=t,this._delete=a,this._getAllRole=r,this._getOne=o,this._getAllPermission=i,this._getUserProfile=m,this._updateProfile=v}async register(e){return await this._create.execute(e)}async update(e){return await this._update.execute(e)}async delete(e){return await this._delete.execute(e)}async getAll(e){return await this._getAll.execute(e)}async getOne(e){return await this._getOne.execute(e)}async getAllRole(){return await this._getAllRole.execute()}async getAllPermission(){return await this._getAllPermission.execute()}async getProfile(){return await this._getUserProfile.execute()}async updateProfile(e){return await this._updateProfile.execute(e)}};x=De([u(),d(0,l(w)),d(1,l(P)),d(2,l(g)),d(3,l(h)),d(4,l(O)),d(5,l(y)),d(6,l($)),d(7,l(j)),d(8,l(b))],x);const Re=B("owner-user-store",()=>{const e=N.resolve(x),s=f({data:{props:[],total:0},isLoading:!1,btnLoading:!1,error:""}),t=f({page:1,limit:10,filter:{name:"",role:""}}),a=f({id:"",name:"",email:"",password:"",password_confirmation:"",profile:""}),r=f({data:{props:[]}}),o=f({data:{props:[]}}),i=f({data:{props:""}});async function m(){s.isLoading=!0,s.btnLoading=!0;try{await e.register(a),s.error="",await S()}catch(n){let c="";n.response.status===422&&(c=Object.keys(n.response.data.errors).map(p=>`${p}: ${n.response.data.errors[p].join(", ")}`).join("; ")),s.error=c}s.isLoading=!1,s.btnLoading=!1}async function v(){s.isLoading=!0,s.btnLoading=!0;try{await e.update(a),s.error="",a.name=""}catch(n){let c="";n.response.status===422&&(c=Object.keys(n.response.data.errors).map(p=>`${p}: ${n.response.data.errors[p].join(", ")}`).join("; ")),s.error=c}s.isLoading=!1,s.btnLoading=!1}async function C(n){s.isLoading=!0;try{await e.delete(n),await A(),s.error="",a.name=""}catch(c){let p="";c.response.status===422&&(p=Object.keys(c.response.data.errors).map(D=>`${D}: ${c.response.data.errors[D].join(", ")}`).join("; ")),s.error=p}s.isLoading=!1}async function L(n){const c=await e.getOne(n);c&&c.data&&c.message=="success"&&(i.data.props=c.data)}async function A(){s.isLoading=!0;const n=await e.getAll({page:t.page,limit:t.limit,filter:t.filter});n&&n.data&&n.status=="success"&&(s.data.props=n.data.props,s.data.total=n.data.total,s.isLoading=!1)}async function R(){const n=await e.getAllRole();n&&n.data&&n.message=="success"&&(r.data.props=n.data)}async function I(){const n=await e.getAllPermission();n&&n.data&&n.message=="success"&&(o.data.props=n.data)}const U=f({data:{props:""}});async function E(){const n=await e.getProfile();n&&n.data&&n.message==="success"&&(U.data.props=n.data)}async function G(){s.isLoading=!0,s.btnLoading=!0;try{await e.updateProfile(a),s.error="",a.name=""}catch(n){let c="";n.response.status===422&&(c=Object.keys(n.response.data.errors).map(p=>`${p}: ${n.response.data.errors[p].join(", ")}`).join("; ")),s.error=c}s.isLoading=!1,s.btnLoading=!1}async function S(){a.name="",a.email="",a.password="",a.password_confirmation="",a.permissionIds=[],a.role=""}return{register:m,update:v,remove:C,getOne:L,getAll:A,form:a,setStateFilter:t,state:s,allRole:r,getAllRole:R,allPermission:o,getAllPermission:I,userGetByOne:i,updateProfile:G,getProfile:E,getUserProfile:U}});export{Re as o};
