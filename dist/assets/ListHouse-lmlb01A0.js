import{d as ae,u as le,a as re,H as se,K as ie,L as oe,r as D,o as de,N as U,e as ne,f as d,t as m,y as l,g as t,E as w,j as me,b as v,P as S,O as f,U as ce}from"./index-P9d5dFni.js";import{s as o,a as pe}from"./column.esm-dcvUocQC.js";import{s as ue}from"./inputtext.esm-CiJKgL5S.js";import{s as P}from"./dropdown.esm-eIYgKchz.js";import{h as he}from"./house.store-_FT4W_Pv.js";import{r as fe}from"./real-estate-service.store-nLuauRJL.js";import{p as ge}from"./province.store-G7vJUCxq.js";import{d as ye}from"./district.store-BVLhnxk6.js";import{v as $}from"./validation-permissions-Wb-_6mCd.js";import"./paginator.esm-aRER_QHq.js";import"./inputnumber.esm-rC07WuNG.js";import"./overlayeventbus.esm-jjCDdLFs.js";import"./index.esm-2NQgYqda.js";import"./checkbox.esm-IEm3U548.js";import"./index.esm-UQHUFOif.js";import"./axios.config-jCy-uYyV.js";const _e={class:"card"},be={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},we={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},ve={class:"mb-3"},Se={class:"w-full sm:w-auto flex-order-0 sm:flex-order-1 mb-4 sm:mb-0"},$e={class:"col-12 md:col-12 flex flex-row",style:{"margin-top":"-15px"}},Le={class:"col-12 md:col-6"},Ee=d("span",{class:"text-red-500"}," *",-1),Pe={class:"col-12 md:col-2"},Ce=d("span",{class:"text-red-500"}," *",-1),Te={class:"col-12 md:col-2"},Ve=d("span",{class:"text-red-500"}," *",-1),Ae={class:"col-12 md:col-2"},ke=d("span",{class:"text-red-500"}," *",-1),Re=d("div",{class:"col-12 md:col-12 flex flex-row",style:{"margin-top":"-15px"}},null,-1),De={class:"flex flex-wrap gap-2"},Ye=ae({__name:"ListHouse",setup(Ue){const{t:r}=le(),g=re(),{query:c}=se(),p=ie(),C=oe(),{form:i,getAll:y,state:u,setStateFilter:a,remove:j,updateStatus:N}=he(),{getOne:O,realestateType:_}=fe(),{getAll:F,state:L,setStateFilter:q}=ge(),{getAll:H,state:E,setStateFilter:T}=ye(),I=D([{id:"all",name:r("messages.all")},{id:"sale",name:r("messages.service_sale")},{id:"rent",name:r("messages.service_rent")}]),B=D([{id:"all",name:r("messages.all")},{id:"air",name:r("messages.air")},{id:"fan",name:r("messages.fan")},{id:"no",name:r("messages.none")}]),K=e=>e==="rent"||e==="buy",M=e=>{switch(e){case"open":return"success";case"close":return"danger";case"rent":return"warning";case"buy":return"danger";default:return"info"}};async function V(){Object.keys(c).length!==0&&(a.page=c.page?Number(c.page):1,a.limit=c.limit?Number(c.limit):10,g.push({query:{page:a.page,limit:a.limit}})),await k()}de(async()=>{a.filter&&(a.filter.real_estate_type_id="",a.filter.service_model="",a.filter.room_type="",a.filter.district_id="",a.filter.province_id="",a.filter.village="",a.filter.wide="",a.filter.long="",a.limit=10,a.page=1),await V()});const z=async e=>{g.push({name:"owner.edit.house",params:{id:e}})},G=async e=>{await j(e),u.error?await ee():await V()};async function W(e){a.page=e.page+1,a.limit=e.rows;const{page:n,limit:s}=a;g.push({name:"owner.house",query:{page:n,limit:s}}),await y()}const J=U(()=>{let e=0;return a.page&&a.limit&&(e=(a.page-1)*a.limit),e}),b=async()=>{a.filter&&(a.filter.real_estate_type_id=i.real_estate_type_id==="all"?"":i.real_estate_type_id,a.filter.service_model=i.service_model==="all"?"":i.service_model,a.filter.room_type=i.room_type==="all"?"":i.room_type,a.filter.district_id=i.district_id==="all"?"":i.district_id),await y()};async function Q(e){var s,h,R;const n=e.target.name;e.target.value===""&&(n==="village"&&((s=a.filter)==null?void 0:s.village)!==void 0&&(a.filter.village=""),n==="wide"&&((h=a.filter)==null?void 0:h.wide)!==void 0&&(a.filter.wide=""),n==="long"&&((R=a.filter)==null?void 0:R.long)!==void 0&&(a.filter.long=""),await y())}const A=U({get:()=>a.filter.village||"",set:e=>{a.filter&&(a.filter.village=e)}}),k=async()=>{await y(),await O(),_.props.unshift({id:"all",name:r("messages.all")}),i.room_type="all",i.service_model="all",q.limit=1e3,await F(),L.data.props.unshift({id:"all",name:r("messages.all")}),i.real_estate_type_id=_.props.length>0?_.props[0].id:void 0,i.province_id=L.data.props.length>0?L.data.props[0].id:void 0,T.filter&&(T.filter.province_id=i.province_id,await H(),E.data.props.unshift({id:"all",name:r("messages.all")}),await X())},X=async()=>{i.district_id=E.data.props.length>0?E.data.props[0].id:void 0},Y=async e=>{C.require({message:r("confirmDelete.message"),header:r("confirmDelete.header"),rejectLabel:r("confirmDelete.rejectLabel"),acceptLabel:r("confirmDelete.acceptLabel"),rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{await G(e),p.add({severity:"success",summary:r("toast.summary.delete"),detail:r("toast.detail.delete"),life:3e3})},reject:()=>{p.add({severity:"error",summary:r("toast.summary.cancel_delete"),detail:r("toast.detail.cancel_delete"),life:3e3})}})},Z=async e=>{await N(e),await k()},x=async e=>{C.require({message:r("confirmUpdateStatus.message"),header:r("confirmUpdateStatus.header"),rejectLabel:r("confirmUpdateStatus.rejectLabel"),acceptLabel:r("confirmUpdateStatus.acceptLabel"),rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{await Z(e),p.add({severity:"success",summary:r("toast.summary.success"),detail:r("toast.detail.successfully"),life:3e3})},reject:()=>{p.add({severity:"error",summary:r("toast.summary.cancel_update"),detail:r("toast.detail.cancel_update"),life:3e3})}})},ee=()=>{p.add({severity:"error",summary:r("toast.summary.error"),detail:`${u.error}`,life:3e3})},te=async()=>{g.push({name:"owner.add.house"})};return(e,n)=>(me(),ne("div",_e,[d("div",be,[d("span",we,[d("h2",ve,m(e.$t("table.title.real_estate")),1)]),d("span",Se,[l(t(S),{label:e.$t("button.add"),severity:"info",onClick:n[0]||(n[0]=s=>te()),disabled:t($)(t(v).REAL_ESTATE.CREATE)},null,8,["label","disabled"])])]),l(t(pe),{value:t(u).data.props,onPage:W,paginator:"",first:J.value,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",loading:t(u).isLoading,lazy:"",scrollable:"",totalRecords:t(u).data.total,rows:t(a).limit,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:`${e.$t("table.pagination.show")} {first} ${e.$t("table.pagination.to")} {last} ${e.$t("table.pagination.from")} {totalRecords} ${e.$t("table.pagination.row")}`},{header:w(()=>[d("div",$e,[d("div",Le,[d("label",null,[f(m(e.$t("messages.search"))+" ",1),Ee]),l(t(ue),{modelValue:A.value,"onUpdate:modelValue":n[1]||(n[1]=s=>A.value=s),placeholder:e.$t("placeholder.textSearch"),style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"village",onKeyup:ce(b,["enter"]),onInput:Q},null,8,["modelValue","placeholder"])]),d("div",Pe,[d("label",null,[f(m(e.$t("messages.realestate_type"))+" ",1),Ce]),l(t(P),{name:"real_estate_type",modelValue:t(i).real_estate_type_id,"onUpdate:modelValue":n[2]||(n[2]=s=>t(i).real_estate_type_id=s),options:t(_).props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:b},null,8,["modelValue","options","placeholder"])]),d("div",Te,[d("label",null,[f(m(e.$t("messages.service_model"))+" ",1),Ve]),l(t(P),{modelValue:t(i).service_model,"onUpdate:modelValue":n[3]||(n[3]=s=>t(i).service_model=s),options:I.value,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),optionValue:"id",highlightOnSelect:!0,class:"w-full",onChange:b},null,8,["modelValue","options","placeholder"])]),d("div",Ae,[d("label",null,[f(m(e.$t("messages.room_type"))+" ",1),ke]),l(t(P),{modelValue:t(i).room_type,"onUpdate:modelValue":n[4]||(n[4]=s=>t(i).room_type=s),options:B.value,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:b},null,8,["modelValue","options","placeholder"])])]),Re]),default:w(()=>[l(t(o),{headerStyle:"min-width: 14rem",frozen:""},{body:w(({data:s})=>[d("div",De,[l(t(S),{type:"button",label:s.status,rounded:"",severity:M(s.status),disabled:K(s.status)||t($)(t(v).REAL_ESTATE.UPDATE),style:{color:"white"},onClick:h=>x(s.id)},null,8,["label","severity","disabled","onClick"]),l(t(S),{type:"button",icon:"pi pi-pencil",rounded:"",severity:"warning",style:{color:"white"},onClick:h=>z(s.id),disabled:t($)(t(v).REAL_ESTATE.UPDATE)},null,8,["onClick","disabled"]),l(t(S),{type:"button",icon:"pi pi-trash",rounded:"",severity:"danger",onClick:h=>Y(s.id),disabled:t($)(t(v).REAL_ESTATE.DELETE)},null,8,["onClick","disabled"])])]),_:1}),l(t(o),{field:"id",header:e.$t("table.header.index")},{body:w(s=>[f(m(s.index+1),1)]),_:1},8,["header"]),l(t(o),{field:"real_esate_number",header:e.$t("table.header.real_esate_number"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"name",header:e.$t("table.header.real_estate_name"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"real_estate_type.name",header:e.$t("table.header.realestate_type"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"service_model",header:e.$t("table.header.service_model"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"room_type",header:e.$t("table.header.room_type"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"owner_name",header:e.$t("table.header.owner"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"agent_name",header:e.$t("table.header.name"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"village",header:e.$t("table.header.address"),headerStyle:"min-width: 15rem"},null,8,["header"]),l(t(o),{field:"long",header:e.$t("table.header.long"),headerStyle:"min-width: 7rem"},null,8,["header"]),l(t(o),{field:"wide",header:e.$t("table.header.wide"),headerStyle:"min-width: 6rem"},null,8,["header"]),l(t(o),{field:"total_bed",header:e.$t("table.header.total_bed"),headerStyle:"min-width: 9rem"},null,8,["header"]),l(t(o),{field:"total_bath",header:e.$t("table.header.total_bath"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"garage",header:e.$t("table.header.garage"),headerStyle:"min-width: 6rem"},null,8,["header"]),l(t(o),{field:"status",header:e.$t("table.header.status"),headerStyle:"min-width: 5rem"},null,8,["header"]),l(t(o),{field:"created_by.name",header:e.$t("table.header.created_by"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"updated_by.name",header:e.$t("table.header.updated_by"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"created_at",header:e.$t("table.header.created_at"),headerStyle:"min-width: 8rem"},null,8,["header"]),l(t(o),{field:"updated_at",header:e.$t("table.header.updated_at"),headerStyle:"min-width: 8rem"},null,8,["header"])]),_:1},8,["value","first","loading","totalRecords","rows","currentPageReportTemplate"])]))}});export{Ye as default};
