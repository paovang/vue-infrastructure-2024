import{d as $,o as u,c as m,b as e,P as d,t as S,f as A,q as i,e as s,a2 as de,n as ce,L as pe,M as ue,a as me,A as h,G as he,z as U,Q as _e,p as fe,h as ye,F as ve,g as ge,w as be,a6 as we,H as D,O as Ie,_ as Ve}from"./index-KUI_GB_t.js";import{_ as I}from"./FormInputText.vue_vue_type_script_setup_true_lang-e-sXCLNT.js";import{s as Me,h as Se,a as J,b as T}from"./divider.esm-QpaLAOrt.js";import{b as xe,u as ke}from"./index.esm-1PRx-Ltn.js";import{s as w}from"./dropdown.esm-3QwLH-LU.js";import{a as Ce}from"./index.esm-v5PRxPgp.js";import{a as Y}from"./axios-ggIcBn7C.js";import{r as Le}from"./real-estate-service.store-PRhGehBY.js";import{h as Oe}from"./house.store-kiqXKikF.js";import{p as Fe}from"./province.store-3bhrxdIL.js";import{d as Ue}from"./district.store-G9pIGcip.js";import"./inputtext.esm-DlClirjd.js";import"./index.esm-kx7iOtPn.js";import"./index.esm-yT_IU4zy.js";import"./axios.config-1NnBFu2p.js";const je={class:"flex flex-column gap-2 mb-3 w-full"},Ne=["for"],De={key:0,class:"text-red-500"},Je=["id"],Te=$({__name:"FormTextArea",props:{name:{},label:{},required:{type:Boolean},placeholder:{},value:{}},setup(f){const _=f,{value:y,errorMessage:V}=xe(()=>_.name);return _.value&&(y.value=_.value),(l,c)=>(u(),m("div",je,[e("label",{for:l.name},[d(S(l.label)+" ",1),l.required?(u(),m("span",De," *")):A("",!0)],8,Ne),i(s(Me),{"auto-resize":"",rows:"5",modelValue:s(y),"onUpdate:modelValue":c[0]||(c[0]=x=>de(y)?y.value=x:null),id:l.name,class:ce({"p-invalid":s(V)}),"aria-describedby":`text-error-${l.name}`,placeholder:l.placeholder},null,8,["modelValue","id","class","aria-describedby","placeholder"]),e("small",{class:"p-error",id:`text-error-${l.name}`},S(s(V)),9,Je)]))}}),n=f=>(fe("data-v-3444cf13"),f=f(),ye(),f),Ye={class:"card"},$e={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},Ae={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},ze=n(()=>e("i",{class:"pi pi-arrow-left",style:{color:"green"}},null,-1)),Be=n(()=>e("br",null,null,-1)),qe={class:"columns is-12 is-multiline",style:{"margin-top":"20px"}},Ge={class:"column is-mobile-12 is-2"},Ee=n(()=>e("label",null,[d(" ປະເພດ ບໍລິການ "),e("span",{class:"text-red-500"}," *")],-1)),Qe={class:"column is-mobile-12 is-2"},Re=n(()=>e("label",null,[d(" ຮູບເເບບ ບໍລິການ "),e("span",{class:"text-red-500"}," *")],-1)),Ze={class:"column is-mobile-12 is-2"},He=n(()=>e("label",null,[d(" ປະເພດຫ້ອງ "),e("span",{class:"text-red-500"}," *")],-1)),Pe={class:"column is-mobile-12 is-2"},We=n(()=>e("label",null,[d(" ເເຂວງ "),e("span",{class:"text-red-500"}," *")],-1)),Xe={class:"column is-mobile-12 is-2"},Ke=n(()=>e("label",null,[d(" ເມືອງ "),e("span",{class:"text-red-500"}," *")],-1)),el={class:"column is-mobile-12 is-2"},ll={class:"column is-mobile-12 is-2"},tl={class:"column is-mobile-12 is-2"},sl={class:"column is-mobile-12 is-2"},al={class:"column is-mobile-12 is-6"},ol={class:"column is-mobile-12 is-12"},il={class:"column is-12"},nl={class:"column is-3"},rl=n(()=>e("label",null,[d(" ຮູບເເບບ ບໍລິການ "),e("span",{class:"text-red-500"}," *")],-1)),dl={class:"column is-3"},cl=n(()=>e("label",null,[d(" ລາຄາ "),e("span",{class:"text-red-500"}," *")],-1)),pl={class:"column is-5"},ul=n(()=>e("label",null," ລາຍລະອຽດ ",-1)),ml=["onUpdate:modelValue"],hl={class:"column is-1"},_l=["onClick"],fl=n(()=>e("i",{class:"pi pi-times-circle"},null,-1)),yl=[fl],vl={class:"column is-12"},gl={class:"column is-mobile-12 is-12"},bl=n(()=>e("label",null,[d(" ເລືອກໂປຮໄຟລ "),e("span",{class:"text-red-500"}," *")],-1)),wl={key:0},Il={key:1,style:{color:"#029217"}},Vl={class:"column is-mobile-12 is-12"},Ml=n(()=>e("label",null,[d(" ເລືອກເເກເລີເລີ່ "),e("span",{class:"text-red-500"}," *")],-1)),Sl={key:0},xl={key:1,style:{color:"#029217"}},kl={class:"column is-mobile-12 is-12 text-right"},Cl=n(()=>e("i",{class:"pi pi-save",style:{"margin-right":"8px"}},null,-1)),Ll=$({__name:"AddHouse",setup(f){const _=pe(),y=ue(),V=me(),{form:l,state:c,register:x}=Oe(),{getOne:z,realestateType:k}=Le(),{getAll:B,state:C,setStateFilter:q}=Fe(),{getAll:j,state:L,setStateFilter:M}=Ue(),v=h(null),g=h(),G=async()=>{V.push({name:"owner.house"})},E=()=>{document.getElementById("fileInput").click()},Q=async o=>{var p;const t=(p=o.target.files)==null?void 0:p[0];t&&(v.value="ກຳລັງອັບໂຫຼດໂປຮໄຟລເຂົ້າລະບົບ ກະລຸນາລໍຖ້າ",await oe(t),v.value="ອັບໂຫຼດສຳເລັດເເລ້ວ.")},R=()=>{document.getElementById("galleryInput").click()},Z=async o=>{const t=o.target.files;t&&(g.value="ກຳລັງອັບໂຫຼດ "+t.length+" ໄຟລເຂົ້າລະບົບ ກະລຸນາລໍຖ້າ...",await ie(t),g.value="ອັບໂຫຼດສຳເລັດເເລ້ວ "+t.length+" ໄຟລ.")},b=h([{price:"",unit_price:"",detail:""}]),H=async()=>{b.value&&b.value.push({price:"",unit_price:"",detail:""})},P=async o=>{b.value&&b.value.splice(o,1)},{handleSubmit:W}=ke({validationSchema:Se}),X=h([{id:"sale",name:"ຂາຍ"},{id:"rent",name:"ເຊົ່າ"}]),K=h([{id:"air",name:"ເເອ"},{id:"fan",name:"ພັດລົມ"},{id:"no",name:"ບໍ່ມີ"}]),ee=h([{id:"day",name:"ມື້"},{id:"month",name:"ເດືອນ"},{id:"year",name:"ປີ"}]),O=h(),F=h();he(async()=>{await le()});const le=async()=>{l.room_type="air",l.service_model="sale",q.limit=1e3,await B(),await z(),l.real_estate_type_id=k.props.length>0?k.props[0].id:void 0,l.province_id=C.data.props.length>0?C.data.props[0].id:void 0,M.filter&&(M.filter.province_id=l.province_id,await j(),await N())},te=async o=>{M.filter&&(M.filter.province_id=o,await j(),await N())},N=async()=>{l.district_id=L.data.props.length>0?L.data.props[0].id:void 0},se=W(async o=>{l.village=o.village,l.zip_code=o.zipcode,l.wide=o.wide,l.long=o.long,l.remark=o.remark,l.location=o.location,l.prices=b.value,l.image=F.value,l.gallery=O.value,await x(),c.error?await ne():await re()}),ae=async()=>{v.value="",g.value="",F.value="",O.value="";const o=document.getElementById("fileInput");o.value="";const a=document.getElementById("galleryInput");a.value=""},oe=async o=>{var a;c.btnLoading=!0;try{let t=new FormData;t.append("file",o);const p=await Y.post("http://159.223.42.254/api/upload_file",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vMTU5LjIyMy40Mi4yNTQvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3MDc5MjgwMDksIm5iZiI6MTcwNzkyODAwOSwianRpIjoia25Ma3BqRHdObUh4a2dyUyIsInN1YiI6IjIiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.FDSN40oY148SrIvrc0oj51Ln8dgwlYj8KDCEjvUPZ1U"}});F.value=(a=p.data)==null?void 0:a.filename,c.btnLoading=!1}catch(t){console.error("Upload failed:",t)}},ie=async o=>{c.btnLoading=!0;try{let a=new FormData;for(let r=0;r<o.length;r++)a.append("files[]",o[r]);const p=(await Y.post("http://159.223.42.254/api/upload/multiple/files",a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vMTU5LjIyMy40Mi4yNTQvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3MDc5MjgwMDksIm5iZiI6MTcwNzkyODAwOSwianRpIjoia25Ma3BqRHdObUh4a2dyUyIsInN1YiI6IjIiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.FDSN40oY148SrIvrc0oj51Ln8dgwlYj8KDCEjvUPZ1U"}})).data.filename.map(r=>({image:`${r}`}));O.value=p,c.btnLoading=!1}catch(a){console.error("Upload failed:",a)}},ne=()=>{_.add({severity:"error",summary:"ເກີດຂໍ້ຜິດພາດ.",detail:`${c.error}`,life:3e3})},re=async()=>{y.require({message:"ທ່ານຕ້ອງການສຳເນົາຂໍ້ມູນບໍ?",header:"ຢືນຢັນເພື່ອທຳການສຳເນົາຂໍ້ມູນ",acceptLabel:"ຕ້ອງການ",rejectLabel:"ບໍ່ຕ້ອງການ",rejectClass:"p-button-danger",acceptClass:"p-button-info",accept:async()=>{await ae(),_.add({severity:"success",summary:"ໄດ້ທຳການສຳເນົາຂໍ້ມູນເເລ້ວ.",detail:"ສຳເນົາຂໍ້ມູນສຳເລັດ.",life:3e3})},reject:async()=>{window.location.reload(),_.add({severity:"error",summary:"ບໍ່ຕ້ອງການສຳເນົາຂໍ້ມູນ.",detail:"ຖືກຍົກເລີກການສຳເນົາເເລ້ວ.",life:3e3})}})};return(o,a)=>(u(),m("div",Ye,[e("div",$e,[e("span",Ae,[e("h2",{style:{"font-weight":"bold","font-size":"20px"},class:"arrow-left",onClick:a[0]||(a[0]=t=>G())},[ze,d(" ຟອມລົງທະບຽນຂໍ້ມູນ ")])])]),Be,i(s(J)),e("form",{onSubmit:a[7]||(a[7]=_e(t=>s(se)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[e("div",qe,[e("div",Ge,[Ee,i(s(w),{name:"real_estate_type",style:{"margin-top":"8px"},modelValue:s(l).real_estate_type_id,"onUpdate:modelValue":a[1]||(a[1]=t=>s(l).real_estate_type_id=t),options:s(k).props,optionLabel:"name",placeholder:"ກະລຸນາເລືອກກ່ອນ...",class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options"])]),e("div",Qe,[Re,i(s(w),{style:{"margin-top":"8px"},modelValue:s(l).service_model,"onUpdate:modelValue":a[2]||(a[2]=t=>s(l).service_model=t),options:X.value,optionLabel:"name",placeholder:"Select a City",optionValue:"id",highlightOnSelect:!0,class:"w-full"},null,8,["modelValue","options"])]),e("div",Ze,[He,i(s(w),{style:{"margin-top":"8px"},modelValue:s(l).room_type,"onUpdate:modelValue":a[3]||(a[3]=t=>s(l).room_type=t),options:K.value,optionLabel:"name",placeholder:"Select a City",class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options"])]),e("div",Pe,[We,i(s(w),{style:{"margin-top":"8px"},modelValue:s(l).province_id,"onUpdate:modelValue":a[4]||(a[4]=t=>s(l).province_id=t),options:s(C).data.props,optionLabel:"name",placeholder:"ກະລຸນາເລືອກກ່ອນ...",class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:a[5]||(a[5]=t=>te(s(l).province_id))},null,8,["modelValue","options"])]),e("div",Xe,[Ke,i(s(w),{style:{"margin-top":"8px"},modelValue:s(l).district_id,"onUpdate:modelValue":a[6]||(a[6]=t=>s(l).district_id=t),options:s(L).data.props,optionLabel:"name",placeholder:"Select a City",class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:""},null,8,["modelValue","options"])]),e("div",el,[i(I,{name:"village",label:"ບ້ານ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",ll,[i(I,{name:"zipcode",label:"zipcode",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",tl,[i(I,{name:"wide",label:"ລວງກວ້າງ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",sl,[i(I,{name:"long",label:"ລວງຍາວ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",al,[i(I,{name:"location",label:"ລີ້ງເເຜນທີ່",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",ol,[i(Te,{name:"remark",label:"ລາຍລະອຽດ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",il,[i(s(T),{header:"ຕັ້ງຄ່າລາຄາ ຊື້ຂາຍ - ເຊົ່າ"},{default:U(()=>[(u(!0),m(ve,null,ge(b.value,(t,p)=>(u(),m("div",{class:"columns is-12",key:p},[e("div",nl,[rl,i(s(w),{modelValue:t.unit_price,"onUpdate:modelValue":r=>t.unit_price=r,options:ee.value,optionLabel:"name",placeholder:"ກະລຸນາເລືອກກ່ອນ...",class:"w-full",optionValue:"id",highlightOnSelect:!0,required:""},null,8,["modelValue","onUpdate:modelValue","options"])]),e("div",dl,[cl,i(s(Ce),{modelValue:t.price,"onUpdate:modelValue":r=>t.price=r,placeholder:"ກະລຸນາປ້ອນກ່ອນ...",required:"",style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'",width:"100% !important"}},null,8,["modelValue","onUpdate:modelValue"])]),e("div",pl,[ul,be(e("input",{name:"detail",type:"text",class:"input","onUpdate:modelValue":r=>t.detail=r,placeholder:"ກະລຸນາປ້ອນກ່ອນ...",required:"",style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'"}},null,8,ml),[[we,t.detail]])]),e("div",hl,[p>0?(u(),m("a",{key:0,onClick:r=>P(p),class:"button is-danger remove-btn",style:{"margin-top":"22px"}},yl,8,_l)):A("",!0)])]))),128)),e("div",{class:"column is-mobile-12 is-12"},[e("a",{onClick:H,class:"button is-primary"},"ເພີ່ມລາຍການ")])]),_:1})]),e("div",vl,[i(s(T),{header:"ເລືອກໂປຮໄຟລ ເເລະ ເເກເລີລີ່"},{default:U(()=>[e("div",gl,[bl,e("label",{class:"upload-box",onClick:E,style:D({border:v.value?"1px dashed #029217":"1px dashed red"})},[v.value?(u(),m("div",Il,S(v.value),1)):(u(),m("div",wl," ກະລຸນາເລືອກໄຟລກ່ອນ... "))],4),e("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:Q},null,32)]),i(s(J)),e("div",Vl,[Ml,e("label",{class:"upload-box",onClick:R,style:D({border:g.value?"1px dashed #029217":"1px dashed red"})},[g.value?(u(),m("div",xl,S(g.value),1)):(u(),m("div",Sl," ກະລຸນາເລືອກໄຟລກ່ອນ... "))],4),e("input",{type:"file",id:"galleryInput",multiple:"",style:{display:"none"},onChange:Z},null,32)])]),_:1})]),e("div",kl,[i(s(Ie),{style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'"},type:"submit",severity:"info",loading:s(c).btnLoading},{default:U(()=>[Cl,d(" ບັນທຶກ ຂໍ້ມູນ ")]),_:1},8,["loading"])])])],32)]))}}),El=Ve(Ll,[["__scopeId","data-v-3444cf13"]]);export{El as default};
