import{d as X,u as G,a as J,E as Y,P as Z,Q as x,C as k,I as ee,V as D,c as te,e as o,t as p,v as i,f as t,A as b,o as ae,X as O,W as c,$ as le}from"./index-HCy8wx5B.js";import{s as d,a as ie}from"./column.esm-4CV9Ohsr.js";import{s as oe}from"./inputtext.esm-I8602Gwm.js";import{s as u}from"./dropdown.esm-Ch0uEGHS.js";import{r as re}from"./real-estate-service.store-9tq6wurQ.js";import{d as se}from"./store-rSoOCyST.js";import"./paginator.esm--aILmKpo.js";import"./inputnumber.esm-q_nE1j3Q.js";import"./overlayeventbus.esm-IJt3ossM.js";import"./index.esm-7UwoIJxz.js";import"./checkbox.esm-ajPIM7gy.js";import"./index.esm-6ayPRiaF.js";import"./axios.config--CckdG2z.js";const de={class:"card"},ne={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},pe={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},me={class:"mb-3"},ce={class:"w-full sm:w-auto flex-order-0 sm:flex-order-1 mb-4 sm:mb-0"},he={class:"col-12 md:col-12 flex flex-row"},ue={class:"col-12 md:col-6"},fe=o("span",{class:"text-red-500"}," *",-1),ye={class:"col-12 md:col-3"},ge=o("span",{class:"text-red-500"}," *",-1),_e={class:"col-12 md:col-3"},we=o("span",{class:"text-red-500"}," *",-1),ve={class:"col-12 md:col-12 flex flex-row"},be={class:"col-12 md:col-3"},$e=o("span",{class:"text-red-500"}," *",-1),Se={class:"col-12 md:col-3"},Ve=o("span",{class:"text-red-500"}," *",-1),Ce={class:"col-12 md:col-3"},Pe=o("span",{class:"text-red-500"}," *",-1),Le={class:"col-12 md:col-3"},Re=o("span",{class:"text-red-500"}," *",-1),ke={class:"flex flex-wrap gap-2 btn-right"},Me=X({__name:"Report-Real-Estate",setup(De){const{t:n}=G(),$=J(),{query:f}=Y(),S=Z(),N=x(),{form:a,getAllRealEstate:h,state:y,setStateFilter:l,remove:A,getCountries:g,getAllCountries:T,getAllProvinces:V,getProvinces:m,getAllDistricts:C,getDistricts:_}=se(),{getOne:U,realestateType:v}=re(),j=k([{id:"all",name:"ທັງໝົດ"},{id:"sale",name:"ຂາຍ"},{id:"rent",name:"ເຊົ່າ"}]),B=k([{id:"all",name:"ທັງໝົດ"},{id:"air",name:"ເເອ"},{id:"fan",name:"ພັດລົມ"},{id:"no",name:"ບໍ່ມີ"}]);async function P(){Object.keys(f).length!==0&&(l.page=f.page?Number(f.page):1,l.limit=f.limit?Number(f.limit):10,$.push({query:{page:l.page,limit:l.limit}})),await F()}ee(async()=>{await P()});const E=async e=>{await A(e),y.error?await W():await P()};async function I(e){l.page=e.page+1,l.limit=e.rows;const{page:s,limit:r}=l;$.push({name:"owner.house",query:{page:s,limit:r}}),await h()}const q=D(()=>{let e=0;return l.page&&l.limit&&(e=(l.page-1)*l.limit),e}),w=async()=>{l.filter&&(l.filter.real_estate_type_id=a.real_estate_type_id==="all"?"":a.real_estate_type_id,l.filter.service_model=a.service_model==="all"?"":a.service_model,l.filter.room_type=a.room_type==="all"?"":a.room_type,l.filter.district_id=a.district_id==="all"?"":a.district_id),await h()};async function z(e){var r;const s=e.target.name;e.target.value===""&&(s==="search"&&((r=l.filter)==null?void 0:r.search)!==void 0&&(l.filter.search=""),await h())}const L=D({get:()=>l.filter.search||"",set:e=>{l.filter&&(l.filter.search=e)}}),F=async()=>{await h(),await U(),v.props.unshift({id:"all",name:"ທັງໝົດ"}),a.room_type="all",a.service_model="all",await T(),await g.data.props.unshift({id:"all",name:"ທັງໝົດ"}),a.country_id=g.data.props.length>0?g.data.props[0].id:void 0,await V(g.data.props[0].id),m.data.props.unshift({id:"all",name:"ທັງໝົດ"}),a.real_estate_type_id=v.props.length>0?v.props[0].id:void 0,a.province_id=m.data.props.length>0?m.data.props[0].id:void 0,await C(m.data.props[0].id),await _.data.props.unshift({id:"all",name:"ທັງໝົດ"}),await R()},R=async()=>{a.district_id=_.data.props.length>0?_.data.props[0].id:void 0},H=async e=>{l.filter&&(await V(e),m.data.props.unshift({id:"all",name:"ທັງໝົດ"}),a.province_id=m.data.props.length>0?m.data.props[0].id:void 0,l.filter&&(l.filter.country_id=a.country_id==="all"?"":a.country_id,l.filter.district_id=a.district_id==="all"?"":a.district_id,l.filter.province_id=a.province_id==="all"?"":a.province_id),await h())},K=async e=>{await C(e),await _.data.props.unshift({id:"all",name:"ທັງໝົດ"}),await R(),l.filter&&(l.filter.country_id=a.country_id==="all"?"":a.country_id,l.filter.district_id=a.district_id==="all"?"":a.district_id,l.filter.province_id=a.province_id==="all"?"":a.province_id),await h()},M=async e=>{N.require({message:n("confirmDelete.message"),header:n("confirmDelete.header"),rejectLabel:n("confirmDelete.rejectLabel"),acceptLabel:n("confirmDelete.acceptLabel"),rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{await E(e),S.add({severity:"success",summary:n("toast.summary.delete"),detail:n("toast.detail.delete"),life:3e3})},reject:()=>{S.add({severity:"error",summary:n("toast.summary.cancel_delete"),detail:n("toast.detail.cancel_delete"),life:3e3})}})},W=()=>{S.add({severity:"error",summary:n("toast.summary.error"),detail:`${y.error}`,life:3e3})},Q=async()=>{$.push({name:"owner.add.house"})};return(e,s)=>(ae(),te("div",de,[o("div",ne,[o("span",pe,[o("h2",me,p(e.$t("table.title.real_estate")),1)]),o("span",ce,[i(t(O),{icon:"pi pi-plus-circle",rounded:"",severity:"info",onClick:s[0]||(s[0]=r=>Q())})])]),i(t(ie),{value:t(y).data.props,onPage:I,paginator:"",first:q.value,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",loading:t(y).isLoading,lazy:"",totalRecords:t(y).data.total,rows:t(l).limit,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:`${e.$t("table.pagination.show")} {first} ${e.$t("table.pagination.to")} {last} ${e.$t("table.pagination.from")} {totalRecords} ${e.$t("table.pagination.row")}`},{header:b(()=>[o("div",he,[o("div",ue,[o("label",null,[c(p(e.$t("messages.search"))+" ",1),fe]),i(t(oe),{modelValue:L.value,"onUpdate:modelValue":s[1]||(s[1]=r=>L.value=r),placeholder:e.$t("placeholder.textSearch"),style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"search",onKeyup:le(w,["enter"]),onInput:z},null,8,["modelValue","placeholder"])]),o("div",ye,[o("label",null,[c(p(e.$t("messages.realestate_type"))+" ",1),ge]),i(t(u),{name:"real_estate_type",modelValue:t(a).real_estate_type_id,"onUpdate:modelValue":s[2]||(s[2]=r=>t(a).real_estate_type_id=r),options:t(v).props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:w},null,8,["modelValue","options","placeholder"])]),o("div",_e,[o("label",null,[c(p(e.$t("messages.service_model"))+" ",1),we]),i(t(u),{modelValue:t(a).service_model,"onUpdate:modelValue":s[3]||(s[3]=r=>t(a).service_model=r),options:j.value,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),optionValue:"id",highlightOnSelect:!0,class:"w-full",onChange:w},null,8,["modelValue","options","placeholder"])])]),o("div",ve,[o("div",be,[o("label",null,[c(p(e.$t("messages.room_type"))+" ",1),$e]),i(t(u),{modelValue:t(a).room_type,"onUpdate:modelValue":s[4]||(s[4]=r=>t(a).room_type=r),options:B.value,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:w},null,8,["modelValue","options","placeholder"])]),o("div",Se,[o("label",null,[c(p(e.$t("messages.country"))+" ",1),Ve]),i(t(u),{modelValue:t(a).country_id,"onUpdate:modelValue":s[5]||(s[5]=r=>t(a).country_id=r),options:t(g).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:s[6]||(s[6]=r=>H(t(a).country_id))},null,8,["modelValue","options","placeholder"])]),o("div",Ce,[o("label",null,[c(p(e.$t("messages.province"))+" ",1),Pe]),i(t(u),{modelValue:t(a).province_id,"onUpdate:modelValue":s[7]||(s[7]=r=>t(a).province_id=r),options:t(m).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:s[8]||(s[8]=r=>K(t(a).province_id))},null,8,["modelValue","options","placeholder"])]),o("div",Le,[o("label",null,[c(p(e.$t("messages.district"))+" ",1),Re]),i(t(u),{modelValue:t(a).district_id,"onUpdate:modelValue":s[9]||(s[9]=r=>t(a).district_id=r),options:t(_).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:w},null,8,["modelValue","options","placeholder"])])])]),default:b(()=>[i(t(d),{field:"id",header:e.$t("table.header.index")},{body:b(r=>[c(p(r.index+1),1)]),_:1},8,["header"]),i(t(d),{field:"customer.customer_number",header:e.$t("table.header.customer_number"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"customer.name",header:e.$t("table.header.customer"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"customer.owner",header:e.$t("table.header.owner"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"real_esate_number",header:e.$t("table.header.real_esate_number"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"name",header:e.$t("table.header.name"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"real_estate_type.name",header:e.$t("table.header.realestate_type"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"service_model",header:e.$t("table.header.service_model"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"room_type",header:e.$t("table.header.room_type"),headerStyle:"min-width: 6rem"},null,8,["header"]),i(t(d),{field:"country.name",header:e.$t("table.header.country"),headerStyle:"min-width: 6rem"},null,8,["header"]),i(t(d),{field:"district.province.name",header:e.$t("table.header.province"),headerStyle:"min-width: 8rem"},null,8,["header"]),i(t(d),{field:"district.name",header:e.$t("table.header.district"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"village",header:e.$t("table.header.village"),headerStyle:"min-width: 7rem"},null,8,["header"]),i(t(d),{field:"zip_code",header:e.$t("table.header.zip_code"),headerStyle:"min-width: 6rem"},null,8,["header"]),i(t(d),{field:"wide",header:e.$t("table.header.wide"),headerStyle:"min-width: 6rem"},null,8,["header"]),i(t(d),{field:"long",header:e.$t("table.header.long"),headerStyle:"min-width: 6rem"},null,8,["header"]),i(t(d),{field:"status",header:e.$t("table.header.status"),headerStyle:"min-width: 6rem"},null,8,["header"]),i(t(d),{headerStyle:"min-width: 7rem"},{body:b(({data:r})=>[o("div",ke,[i(t(O),{type:"button",icon:"pi pi-trash",rounded:"",severity:"danger",onClick:Oe=>M(r.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","first","loading","totalRecords","rows","currentPageReportTemplate"])]))}});export{Me as default};
