import{d as X,u as Z,M as ee,N as te,r as T,a as ae,H as oe,P as q,o as se,e as ie,f as s,V as ne,y as l,g as o,E as h,t as b,j as le,n as re,Q as j,U as _,W as ce,p as de,k as me,_ as ue}from"./index-1rBvGq5i.js";import{s as $,a as pe}from"./column.esm-pQJpB4kL.js";import{s as fe}from"./inputtext.esm-1aq68lsP.js";import{p as he}from"./province.store-qWNkHnMC.js";import{c as ge}from"./country.store-0RETzL7h.js";import{c as ye,a as we,u as ve}from"./index.esm-blvxv04Q.js";import{_ as be}from"./FormInputText.vue_vue_type_script_setup_true_lang-vOR2eTOm.js";import{s as _e}from"./dropdown.esm-7TkGAlXr.js";import"./paginator.esm-2Wfcy1f2.js";import"./inputnumber.esm-OwUBLcHF.js";import"./overlayeventbus.esm-Q6WBJ3w4.js";import"./index.esm-nG7VEzd6.js";import"./checkbox.esm-7QNZJm56.js";import"./index.esm-acoo5T1v.js";import"./axios.config-HGXv1ygo.js";const $e=u=>ye({name:we().required(u.name)}),Se=$e,Ce=u=>(de("data-v-89f5253a"),u=u(),me(),u),xe={class:"card card-first"},Le={class:"col-12 md:col-12 flex flex-row"},Pe={class:"col-12 md:col-5"},ke={class:"flex flex-column h-full"},Re={class:"col-12 md:col-4"},Ve={class:"flex flex-column h-full"},Te={class:"col-12 md:col-3 flex flex-column"},qe={class:"card"},je={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},Fe={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},Ie={class:"mb-3"},Ne={class:"w-full sm:w-auto flex-order-0 sm:flex-order-1 mb-4 sm:mb-0"},De={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},Be={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},Ee=Ce(()=>s("i",{class:"pi pi-search",style:{"margin-top":"-10px"}},null,-1)),Me={class:"flex flex-wrap gap-2 btn-right"},Ue=X({__name:"ListProvince",setup(u){const{t:n}=Z(),g=ee(),F=te(),p=T(!1),S=T(),{push:y}=ae(),{query:d}=oe(),{register:I,update:N,remove:D,getAll:w,form:m,state:r,setStateFilter:t}=he(),{getAll:B,state:C,setStateFilter:E}=ge(),M={name:n("placeholder.inputText")},{handleSubmit:x,handleReset:v,setFieldValue:L}=ve({validationSchema:Se(M)}),U=async()=>{r.btnLoading=!0,p.value=!1,t.filter&&(t.filter.name=""),await v(),await R(),await f(),r.btnLoading=!1},A=async e=>{await D(e),await v(),await f()},H=async e=>{var a;p.value=!0,m.country_id=(a=e.country)==null?void 0:a.id,L("id",e.id),L("name",e.name),await J()},O=x(async e=>{m.id=e.id,m.name=e.name,await N(),r.error?k():(await P(),await v(),await f(),p.value=!1)}),z=x(async e=>{m.name=e.name,await I(),r.error?await k():(await P(),await v(),await f())});async function K(e){t.page=e.page+1,t.limit=e.rows;const{page:a,limit:i,filter:c}=t;y({name:"province",query:{page:a,limit:i,search:c!=null&&c.name?c.name:void 0}}),await w()}const W=q(()=>{let e=0;return t.page&&t.limit&&(e=(t.page-1)*t.limit),e}),Q=async e=>{F.require({message:n("confirmDelete.message"),header:n("confirmDelete.header"),rejectLabel:n("confirmDelete.rejectLabel"),acceptLabel:n("confirmDelete.acceptLabel"),rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{await A(e),g.add({severity:"success",summary:n("toast.summary.delete"),detail:n("toast.detail.delete"),life:3e3})},reject:()=>{g.add({severity:"error",summary:n("toast.summary.cancel_delete"),detail:n("toast.detail.cancel_delete"),life:3e3})}})},P=()=>{g.add({severity:"success",summary:n("toast.summary.success"),detail:n("toast.detail.successfully"),life:3e3})},k=()=>{g.add({severity:"error",summary:n("toast.summary.error"),detail:`${r.error}`,life:3e3})};async function R(){var e,a;Object.keys(d).length!==0&&(t.page=d.page?Number(d.page):1,t.limit=d.limit?Number(d.limit):10,((e=t.filter)==null?void 0:e.name)===""?(t.filter.name=d.search?d.search:"",y({query:{page:t.page,limit:t.limit,search:void 0}})):y({query:{page:t.page,limit:t.limit,search:(a=t.filter)==null?void 0:a.name}})),await w()}se(async()=>{await R(),await f()});const f=async()=>{E.limit=200,await B(),m.country_id=C.data.props.length>0?C.data.props[0].id:void 0},V=q({get:()=>t.filter.name,set:e=>{t.filter?t.filter.name=e:t.filter={name:e}}});async function Y(){await w()}async function G(e){var a;e.target.value===""&&(((a=t.filter)==null?void 0:a.name)!==void 0&&(t.filter.name=""),y({query:{name:void 0}}),await w())}const J=()=>{var e;if(S.value){const a=S.value.$el,i=a.getBoundingClientRect();i.top>=0&&i.bottom<=window.innerHeight?(e=a.querySelector("input"))==null||e.focus():(window.scrollTo({top:window.scrollY+i.top-window.innerHeight/2,behavior:"smooth"}),setTimeout(()=>{var c;(c=a.querySelector("input"))==null||c.focus()},500))}};return(e,a)=>(le(),ie("div",null,[s("div",xe,[s("form",{onSubmit:a[1]||(a[1]=ne(i=>p.value?o(O)():o(z)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[s("div",Le,[s("div",Pe,[s("div",ke,[l(be,{ref_key:"autoFocusCursor",ref:S,name:"name",label:e.$t("messages.name"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])])]),s("div",Re,[s("div",Ve,[l(o(_e),{modelValue:o(m).country_id,"onUpdate:modelValue":a[0]||(a[0]=i=>o(m).country_id=i),options:o(C).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),optionValue:"id",highlightOnSelect:!0,class:"w-full md:w-14rem"},null,8,["modelValue","options","placeholder"])])]),s("div",Te,[l(o(_),{style:{width:"70%",display:"flex","justify-content":"center"},type:"submit",severity:"warning",loading:o(r).btnLoading},{default:h(()=>[s("i",{class:re(`${p.value?"pi pi-pencil":"pi pi-plus-circle"}`),style:{"margin-right":"8px"}},null,2),j(" "+b(p.value?e.$t("button.edit"):e.$t("button.save"))+" "+b(e.$t("messages.province")),1)]),_:1},8,["loading"])])])],32)]),s("div",qe,[s("div",je,[s("span",Fe,[s("h2",Ie,b(e.$t("table.title.province")),1)]),s("span",Ne,[l(o(_),{icon:"pi pi-refresh",rounded:"",severity:"warning",onClick:a[2]||(a[2]=i=>U()),loading:o(r).btnLoading},null,8,["loading"])])]),l(o(pe),{value:o(r).data.props,loading:o(r).isLoading,lazy:"",tableStyle:"min-width: 50rem",totalRecords:o(r).data.total,onPage:K,paginator:"",first:W.value,rows:o(t).limit,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:`${e.$t("table.pagination.show")} {first} ${e.$t("table.pagination.to")} {last} ${e.$t("table.pagination.from")} {totalRecords} ${e.$t("table.pagination.row")}`},{header:h(()=>[s("div",De,[s("span",Be,[Ee,l(o(fe),{modelValue:V.value,"onUpdate:modelValue":a[3]||(a[3]=i=>V.value=i),placeholder:e.$t("placeholder.textSearch"),style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",onKeyup:ce(Y,["enter"]),onInput:G},null,8,["modelValue","placeholder"])])])]),default:h(()=>[l(o($),{field:"id",header:e.$t("table.header.index"),style:{width:"25%"}},{body:h(i=>[j(b(i.index+1),1)]),_:1},8,["header"]),l(o($),{field:"name",header:e.$t("table.header.province"),style:{width:"25%"}},null,8,["header"]),l(o($),{field:"country.name",header:e.$t("table.header.country"),style:{width:"25%"}},null,8,["header"]),l(o($),{headerStyle:"width: 10rem"},{body:h(({data:i})=>[s("div",Me,[l(o(_),{type:"button",icon:"pi pi-pencil",rounded:"",severity:"warning",style:{color:"white"},onClick:c=>H(i)},null,8,["onClick"]),l(o(_),{type:"button",icon:"pi pi-trash",rounded:"",severity:"danger",onClick:c=>Q(i.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","loading","totalRecords","first","rows","currentPageReportTemplate"])])]))}}),ot=ue(Ue,[["__scopeId","data-v-89f5253a"]]);export{ot as default};
