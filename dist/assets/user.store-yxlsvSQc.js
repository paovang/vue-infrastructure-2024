import{G as R,K as I,L as f}from"./index-YtmbO-Nb.js";import{i as _,a as l,A as E,b as G}from"./axios.config-UoSs8nIU.js";var S=Object.defineProperty,B=Object.getOwnPropertyDescriptor,F=(e,s,t,r)=>{for(var a=r>1?void 0:r?B(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&S(s,t,a),a},K=(e,s)=>(t,r)=>s(t,r,e);let p=class{constructor(e){this._api=e}async create(e){return{data:(await this._api.axios({method:"post",url:"/owner/add-real-estate-user",data:{name:e.name,email:e.email,password:e.password,password_confirmation:e.password_confirmation,roleId:e.roleId,permissionIds:e.permissionIds}})).data,message:"ເພີ່ມຂໍ້ມູນບໍລິສັດສຳເລັດແລ້ວ",status:"success"}}async update(e){return{data:(await this._api.axios({method:"put",url:`/owner/edit-real-estate-user/${e.id}`,data:{name:e.name,email:e.email,roleId:e.roleId,permissionIds:e.permissionIds}})).data,message:"ອັບເດດ ຂໍ້ມູນສຳເລັດເເລ້ວ",status:"success"}}async delete(e){return{data:(await this._api.axios({method:"delete",url:`/owner/delete-real-estate-user/${e}`})).data,message:"ລຶບຂໍ້ມູນ ສຳເລັດເເລ້ວ.",status:"success"}}async getAll(e){var a,o;const s=await this._api.axios({url:"/owner/list-real-estate-users",params:{page:e.page,per_page:e.limit,name:(a=e.filter)==null?void 0:a.name,role:(o=e.filter)==null?void 0:o.role}}),{data:t,pagination:r}=s.data.data;return{data:{props:t,total:r.total},status:"success"}}async getOne(e){return(await this._api.axios({method:"get",url:"/owner/list-real-estate-user/"+e})).data}async getAllRoles(){return(await this._api.axios({method:"get",url:"roles",params:{roles:[R.USER_OWNER]}})).data}async getAllPermissions(){return(await this._api.axios({method:"get",url:"permissions",params:{types:["all","owner"]}})).data}};p=F([_(),K(0,l(E))],p);var N=Object.defineProperty,T=Object.getOwnPropertyDescriptor,W=(e,s,t,r)=>{for(var a=r>1?void 0:r?T(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&N(s,t,a),a},q=(e,s)=>(t,r)=>s(t,r,e);let m=class{constructor(e){this._api=e}async execute(e){return await this._api.create(e)}};m=W([_(),q(0,l(p))],m);var z=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=(e,s,t,r)=>{for(var a=r>1?void 0:r?H(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&z(s,t,a),a},M=(e,s)=>(t,r)=>s(t,r,e);let v=class{constructor(e){this._api=e}async execute(e){try{return await this._api.getAll(e)}catch(s){s.response.status===422&&Object.keys(s.response.data.errors).map(t=>`${t}: ${s.response.data.errors[t].join(", ")}`).join("; ")}}};v=J([_(),M(0,l(p))],v);var Q=Object.defineProperty,V=Object.getOwnPropertyDescriptor,X=(e,s,t,r)=>{for(var a=r>1?void 0:r?V(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&Q(s,t,a),a},Y=(e,s)=>(t,r)=>s(t,r,e);let w=class{constructor(e){this._api=e}async execute(e){return await this._api.update(e)}};w=X([_(),Y(0,l(p))],w);var Z=Object.defineProperty,k=Object.getOwnPropertyDescriptor,ee=(e,s,t,r)=>{for(var a=r>1?void 0:r?k(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&Z(s,t,a),a},se=(e,s)=>(t,r)=>s(t,r,e);let g=class{constructor(e){this._api=e}async execute(e){return await this._api.delete(e)}};g=ee([_(),se(0,l(p))],g);var ae=Object.defineProperty,re=Object.getOwnPropertyDescriptor,te=(e,s,t,r)=>{for(var a=r>1?void 0:r?re(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&ae(s,t,a),a},oe=(e,s)=>(t,r)=>s(t,r,e);let h=class{constructor(e){this._api=e}async execute(){return await this._api.getAllRoles()}};h=te([_(),oe(0,l(p))],h);var ne=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,le=(e,s,t,r)=>{for(var a=r>1?void 0:r?ie(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&ne(s,t,a),a},ce=(e,s)=>(t,r)=>s(t,r,e);let P=class{constructor(e){this._api=e}async execute(){return await this._api.getAllPermissions()}};P=le([_(),ce(0,l(p))],P);var pe=Object.defineProperty,_e=Object.getOwnPropertyDescriptor,ue=(e,s,t,r)=>{for(var a=r>1?void 0:r?_e(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&pe(s,t,a),a},de=(e,s)=>(t,r)=>s(t,r,e);let O=class{constructor(e){this._api=e}async execute(e){return await this._api.getOne(e)}};O=ue([_(),de(0,l(p))],O);var fe=Object.defineProperty,me=Object.getOwnPropertyDescriptor,ve=(e,s,t,r)=>{for(var a=r>1?void 0:r?me(s,t):s,o=e.length-1,n;o>=0;o--)(n=e[o])&&(a=(r?n(s,t,a):n(a))||a);return r&&a&&fe(s,t,a),a},d=(e,s)=>(t,r)=>s(t,r,e);let $=class{constructor(e,s,t,r,a,o,n){this._create=e,this._getAll=s,this._update=t,this._delete=r,this._getAllRole=a,this._getOne=o,this._getAllPermission=n}async register(e){return await this._create.execute(e)}async update(e){return await this._update.execute(e)}async delete(e){return await this._delete.execute(e)}async getAll(e){return await this._getAll.execute(e)}async getOne(e){return await this._getOne.execute(e)}async getAllRole(){return await this._getAllRole.execute()}async getAllPermission(){return await this._getAllPermission.execute()}};$=ve([_(),d(0,l(m)),d(1,l(v)),d(2,l(w)),d(3,l(g)),d(4,l(h)),d(5,l(O)),d(6,l(P))],$);const he=I("owner-user-store",()=>{const e=G.resolve($),s=f({data:{props:[],total:0},isLoading:!1,btnLoading:!1,error:""}),t=f({page:1,limit:10,filter:{name:"",role:""}}),r=f({id:"",name:"",email:"",password:"",password_confirmation:""}),a=f({data:{props:""}}),o=f({data:{props:""}}),n=f({data:{props:""}});async function b(){s.isLoading=!0,s.btnLoading=!0;try{await e.register(r),s.error="",await U()}catch(i){let c="";i.response.status===422&&(c=Object.keys(i.response.data.errors).map(u=>`${u}: ${i.response.data.errors[u].join(", ")}`).join("; ")),s.error=c}s.isLoading=!1,s.btnLoading=!1}async function A(){s.isLoading=!0,s.btnLoading=!0;try{await e.update(r),s.error="",r.name=""}catch(i){let c="";i.response.status===422&&(c=Object.keys(i.response.data.errors).map(u=>`${u}: ${i.response.data.errors[u].join(", ")}`).join("; ")),s.error=c}s.isLoading=!1,s.btnLoading=!1}async function x(i){s.isLoading=!0;try{await e.delete(i),await y(),s.error="",r.name=""}catch(c){let u="";c.response.status===422&&(u=Object.keys(c.response.data.errors).map(j=>`${j}: ${c.response.data.errors[j].join(", ")}`).join("; ")),s.error=u}s.isLoading=!1}async function D(i){const c=await e.getOne(i);c&&c.data&&c.message=="success"&&(n.data.props=c.data)}async function y(){s.isLoading=!0;const i=await e.getAll({page:t.page,limit:t.limit,filter:t.filter});i&&i.data&&i.status=="success"&&(s.data.props=i.data.props,s.data.total=i.data.total,s.isLoading=!1)}async function C(){const i=await e.getAllRole();i&&i.data&&i.message=="success"&&(a.data.props=i.data)}async function L(){const i=await e.getAllPermission();i&&i.data&&i.message=="success"&&(o.data.props=i.data)}async function U(){r.name="",r.email="",r.password="",r.password_confirmation="",r.permissionIds=[],r.role=""}return{register:b,update:A,remove:x,getOne:D,getAll:y,form:r,setStateFilter:t,state:s,allRole:a,getAllRole:C,allPermission:o,getAllPermission:L,userGetByOne:n}});export{he as o};
