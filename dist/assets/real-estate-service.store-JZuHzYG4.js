import{V as x,W as f}from"./index-yVBRwehP.js";import{i as u,b as n,A as C,c as D}from"./axios.config-jCy-uYyV.js";var L=Object.defineProperty,A=Object.getOwnPropertyDescriptor,E=(e,t,s,a)=>{for(var r=a>1?void 0:a?A(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(a?o(t,s,r):o(r))||r);return a&&r&&L(t,s,r),r},S=(e,t)=>(s,a)=>t(s,a,e);let l=class{constructor(e){this._api=e}async create(e){return console.log(e),{data:(await this._api.axios({method:"post",url:"/admin/service-charge",params:{real_estate_type_id:e.real_estate_type_id,unit_price:e.unit_price,service_charges:e.serviceChargePrices}})).data,message:"ເພີ່ມຂໍ້ມູນບໍລິສັດສຳເລັດແລ້ວ",status:"success"}}async update(e){return console.log(e.serviceChargePrices),{data:(await this._api.axios({method:"put",url:"/admin/service-charge/"+e.id,params:{real_estate_type_id:e.real_estate_type_id,unit_price:e.unit_price,service_charges:e.serviceChargePrices}})).data,message:"ອັບເດດ ຂໍ້ມູນສຳເລັດເເລ້ວ",status:"success"}}async delete(e){return{data:(await this._api.axios({method:"delete",url:`/admin/service-charge/${e}`})).data,message:"ລຶບຂໍ້ມູນ ສຳເລັດເເລ້ວ.",status:"success"}}async getAll(e){var r,i,o;const t=await this._api.axios({url:"/admin/service-charge",params:{page:e.page,per_page:e.limit,country_id:(r=e.filter)==null?void 0:r.country_id,real_estate_type_id:(i=e.filter)==null?void 0:i.real_estate_type_id,unit_price:(o=e.filter)==null?void 0:o.unit_price}}),{data:s,pagination:a}=t.data.data;return{data:{props:s,total:a.total},status:"success"}}async getById(e){return console.log(e),(await this._api.axios({url:"/admin/realestate/type"})).data}};l=E([u(),S(0,n(C))],l);var R=Object.defineProperty,B=Object.getOwnPropertyDescriptor,I=(e,t,s,a)=>{for(var r=a>1?void 0:a?B(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(a?o(t,s,r):o(r))||r);return a&&r&&R(t,s,r),r},U=(e,t)=>(s,a)=>t(s,a,e);let h=class{constructor(e){this._api=e}async execute(e){return await this._api.create(e)}};h=I([u(),U(0,n(l))],h);var F=Object.defineProperty,G=Object.getOwnPropertyDescriptor,T=(e,t,s,a)=>{for(var r=a>1?void 0:a?G(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(a?o(t,s,r):o(r))||r);return a&&r&&F(t,s,r),r},V=(e,t)=>(s,a)=>t(s,a,e);let y=class{constructor(e){this._api=e}async execute(e){try{return await this._api.getAll(e)}catch(t){t.response.status===422&&Object.keys(t.response.data.errors).map(s=>`${s}: ${t.response.data.errors[s].join(", ")}`).join("; ")}}};y=T([u(),V(0,n(l))],y);var W=Object.defineProperty,q=Object.getOwnPropertyDescriptor,z=(e,t,s,a)=>{for(var r=a>1?void 0:a?q(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(a?o(t,s,r):o(r))||r);return a&&r&&W(t,s,r),r},H=(e,t)=>(s,a)=>t(s,a,e);let P=class{constructor(e){this._api=e}async execute(e){return await this._api.update(e)}};P=z([u(),H(0,n(l))],P);var J=Object.defineProperty,K=Object.getOwnPropertyDescriptor,M=(e,t,s,a)=>{for(var r=a>1?void 0:a?K(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(a?o(t,s,r):o(r))||r);return a&&r&&J(t,s,r),r},N=(e,t)=>(s,a)=>t(s,a,e);let m=class{constructor(e){this._api=e}async execute(e){return await this._api.delete(e)}};m=M([u(),N(0,n(l))],m);var Q=Object.defineProperty,X=Object.getOwnPropertyDescriptor,Y=(e,t,s,a)=>{for(var r=a>1?void 0:a?X(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(a?o(t,s,r):o(r))||r);return a&&r&&Q(t,s,r),r},Z=(e,t)=>(s,a)=>t(s,a,e);let w=class{constructor(e){this._api=e}async execute(e){return await this._api.getById(e)}};w=Y([u(),Z(0,n(l))],w);var k=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,te=(e,t,s,a)=>{for(var r=a>1?void 0:a?ee(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(r=(a?o(t,s,r):o(r))||r);return a&&r&&k(t,s,r),r},d=(e,t)=>(s,a)=>t(s,a,e);let O=class{constructor(e,t,s,a,r){this._create=e,this._getAll=t,this._update=s,this._delete=a,this._getById=r}async register(e){return await this._create.execute(e)}async update(e){return await this._update.execute(e)}async delete(e){return await this._delete.execute(e)}async getAll(e){return await this._getAll.execute(e)}async getById(e){return await this._getById.execute(e)}};O=te([u(),d(0,n(h)),d(1,n(y)),d(2,n(P)),d(3,n(m)),d(4,n(w))],O);const se=x("real-estate-service-store",()=>{const e=D.resolve(O),t=f({data:{props:[],total:0},isLoading:!1,btnLoading:!1,error:""}),s=f({props:[]}),a=f({page:1,limit:10,filter:{country_id:"",real_estate_type_id:"",unit_price:""}}),r=f({id:"",country_id:"",real_estate_type_id:"",unit_price:"day"});async function i(){t.isLoading=!0,t.btnLoading=!0;try{await e.register(r),await v(),t.error="",g()}catch(c){let p="";c.response.status===422&&(p=Object.keys(c.response.data.errors).map(_=>`${_}: ${c.response.data.errors[_].join(", ")}`).join("; ")),t.error=p}t.isLoading=!1,t.btnLoading=!1}async function o(){t.isLoading=!0,t.btnLoading=!0;try{await e.update(r),await v(),t.error="",g()}catch(c){let p="";c.response.status===422&&(p=Object.keys(c.response.data.errors).map(_=>`${_}: ${c.response.data.errors[_].join(", ")}`).join("; ")),t.error=p}t.isLoading=!1,t.btnLoading=!1}async function j(c){t.isLoading=!0;try{await e.delete(c),await v(),t.error="",g()}catch(p){let _="";p.response.status===422&&(_=Object.keys(p.response.data.errors).map($=>`${$}: ${p.response.data.errors[$].join(", ")}`).join("; ")),t.error=_}t.isLoading=!1}async function b(){const c=await e.getById(r.id);c&&c.data&&c.message=="success"&&(s.props=c.data)}async function v(){t.isLoading=!0;const c=await e.getAll({page:a.page,limit:a.limit,filter:a.filter});c&&c.data&&c.status=="success"&&(t.data.props=c.data.props,t.data.total=c.data.total,t.isLoading=!1)}async function g(){r.id="",r.unit_price="day"}return{register:i,update:o,remove:j,getOne:b,getAll:v,form:r,setStateFilter:a,state:t,realestateType:s}});export{se as r};
