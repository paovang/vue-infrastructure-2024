import{i as u,b as p,A as x,c as D}from"./axios.config-jCy-uYyV.js";import{V as L,W as v}from"./index-hAcWNrTa.js";var C=Object.defineProperty,A=Object.getOwnPropertyDescriptor,U=(e,t,s,r)=>{for(var a=r>1?void 0:r?A(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&C(t,s,a),a},S=(e,t)=>(s,r)=>t(s,r,e);let _=class{constructor(e){this._api=e}async create(e){return{data:(await this._api.axios({method:"post",url:"/admin/create-policy",data:{policy_type:e.policy_type,title:e.title,description:e.description}})).data,message:"ສຳເລັດເເລ້ວ",status:"success"}}async update(e){return{data:(await this._api.axios({method:"put",url:`/admin/update-policy/${e.id}`,data:{title:e.title,description:e.description}})).data,message:"ອັບເດດ ສຳເລັດ",status:"success"}}async delete(e){return{data:(await this._api.axios({method:"delete",url:`/admin/delete-policy/${e}`})).data,message:"ສຳເລັດເເລ້ວ.",status:"success"}}async getAll(e){var a;const t=await this._api.axios({url:"/admin/list-policies",params:{page:e.page,per_page:e.limit,filter:(a=e.filter)==null?void 0:a.policy_type}}),{data:s,pagination:r}=t.data.data;return{data:{props:s,total:r.total},status:"success"}}async getOne(e){return(await this._api.axios({url:`/admin/list-policy/${e}`})).data}};_=U([u(),S(0,p(x))],_);var E=Object.defineProperty,G=Object.getOwnPropertyDescriptor,B=(e,t,s,r)=>{for(var a=r>1?void 0:r?G(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&E(t,s,a),a},F=(e,t)=>(s,r)=>t(s,r,e);let y=class{constructor(e){this._api=e}async execute(e){return await this._api.create(e)}};y=B([u(),F(0,p(_))],y);var I=Object.defineProperty,R=Object.getOwnPropertyDescriptor,V=(e,t,s,r)=>{for(var a=r>1?void 0:r?R(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&I(t,s,a),a},W=(e,t)=>(s,r)=>t(s,r,e);let g=class{constructor(e){this._api=e}async execute(e){try{return await this._api.getAll(e)}catch(t){t.response.status===422&&Object.keys(t.response.data.errors).map(s=>`${s}: ${t.response.data.errors[s].join(", ")}`).join("; ")}}};g=V([u(),W(0,p(_))],g);var q=Object.defineProperty,z=Object.getOwnPropertyDescriptor,H=(e,t,s,r)=>{for(var a=r>1?void 0:r?z(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&q(t,s,a),a},J=(e,t)=>(s,r)=>t(s,r,e);let h=class{constructor(e){this._api=e}async execute(e){return await this._api.update(e)}};h=H([u(),J(0,p(_))],h);var K=Object.defineProperty,M=Object.getOwnPropertyDescriptor,N=(e,t,s,r)=>{for(var a=r>1?void 0:r?M(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&K(t,s,a),a},Q=(e,t)=>(s,r)=>t(s,r,e);let O=class{constructor(e){this._api=e}async execute(e){return await this._api.delete(e)}};O=N([u(),Q(0,p(_))],O);var T=Object.defineProperty,X=Object.getOwnPropertyDescriptor,Y=(e,t,s,r)=>{for(var a=r>1?void 0:r?X(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&T(t,s,a),a},Z=(e,t)=>(s,r)=>t(s,r,e);let m=class{constructor(e){this._api=e}async execute(e){return await this._api.getOne(e)}};m=Y([u(),Z(0,p(_))],m);var k=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,te=(e,t,s,r)=>{for(var a=r>1?void 0:r?ee(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&k(t,s,a),a},d=(e,t)=>(s,r)=>t(s,r,e);let w=class{constructor(e,t,s,r,a){this._create=e,this._getAll=t,this._update=s,this._delete=r,this._getOne=a}async register(e){return await this._create.execute(e)}async update(e){return await this._update.execute(e)}async delete(e){return await this._delete.execute(e)}async getAll(e){return await this._getAll.execute(e)}async getOne(e){return await this._getOne.execute(e)}};w=te([u(),d(0,p(y)),d(1,p(g)),d(2,p(h)),d(3,p(O)),d(4,p(m))],w);const se=L("admin-policy-store",()=>{const e=D.resolve(w),t=v({data:{props:[],total:0},isLoading:!1,btnLoading:!1,error:""}),s=v({data:{props:""}}),r=v({page:1,limit:10,filter:{policy_type:""}}),a=v({});async function i(){t.isLoading=!0,t.btnLoading=!0;try{await e.register(a),await f(),t.error=""}catch(n){let c="";n.response.status===422&&(c=Object.keys(n.response.data.errors).map(l=>`${l}: ${n.response.data.errors[l].join(", ")}`).join("; ")),t.error=c}t.isLoading=!1,t.btnLoading=!1}async function o(){t.isLoading=!0,t.btnLoading=!0;try{await e.update(a),await f(),await b(),t.error=""}catch(n){let c="";n.response.status===422&&(c=Object.keys(n.response.data.errors).map(l=>`${l}: ${n.response.data.errors[l].join(", ")}`).join("; ")),t.error=c}t.isLoading=!1,t.btnLoading=!1}async function $(n){t.isLoading=!0;try{await e.delete(n),await f(),t.error=""}catch(c){let l="";c.response.status===422&&(l=Object.keys(c.response.data.errors).map(P=>`${P}: ${c.response.data.errors[P].join(", ")}`).join("; ")),t.error=l}t.isLoading=!1}async function j(n){t.isLoading=!0;const c=await e.getOne(n);c&&c.data&&c.message==="success"&&(s.data.props=c.data,t.isLoading=!1)}async function f(){t.isLoading=!0;const n=await e.getAll({page:r.page,limit:r.limit,filter:r.filter});n&&n.data&&(n==null?void 0:n.status)=="success"&&(t.data.props=n.data.props,t.data.total=n.data.total,t.isLoading=!1)}async function b(){a.title="",a.description="",a.policy_type=""}return{register:i,update:o,remove:$,getOne:j,getAll:f,form:a,setStateFilter:r,state:t,getById:s}});export{se as a};
