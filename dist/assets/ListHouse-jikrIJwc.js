import{d as ee,u as te,a as le,E as ae,M as oe,N as ie,C as F,I as se,P as V,c as re,e as a,t as d,v as r,f as t,A as S,o as ne,U as P,Q as c,W as k}from"./index-6kKK5IFJ.js";import{s as n,a as de}from"./column.esm-eI9MzGI1.js";import{s as D}from"./inputtext.esm-7qvTVZL8.js";import{s as v}from"./dropdown.esm-Kg3DZgXI.js";import{h as pe}from"./house.store-WR6PW9FB.js";import{r as ce}from"./real-estate-service.store-lHAgAyBJ.js";import{p as me}from"./province.store-K12L6BVS.js";import{d as ue}from"./district.store-iL0PO8sS.js";import"./inputnumber.esm-ACgYk1pI.js";import"./index.esm-jGYh4qKS.js";import"./index.esm-o3q9y2L4.js";import"./axios.config-sB53KOrJ.js";import"./checkbox.esm-ICDDpt6z.js";import"./index.esm-0E9W2H3J.js";const fe={class:"card"},he={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},ge={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},ve={class:"mb-3"},_e={class:"w-full sm:w-auto flex-order-0 sm:flex-order-1 mb-4 sm:mb-0"},ye={class:"col-12 md:col-12 flex flex-row"},we={class:"col-12 md:col-3"},be=a("span",{class:"text-red-500"}," *",-1),$e={class:"col-12 md:col-3"},Ve=a("span",{class:"text-red-500"}," *",-1),Se={class:"col-12 md:col-3"},Le=a("span",{class:"text-red-500"}," *",-1),Ce={class:"col-12 md:col-3"},Pe=a("span",{class:"text-red-500"}," *",-1),ke={class:"col-12 md:col-12 flex flex-row"},De={class:"col-12 md:col-3"},Ne=a("span",{class:"text-red-500"}," *",-1),Re={class:"col-12 md:col-3"},Te=a("span",{class:"text-red-500"}," *",-1),Ue={class:"col-12 md:col-3"},Ae=a("span",{class:"text-red-500"}," *",-1),Oe={class:"col-12 md:col-3"},je=a("span",{class:"text-red-500"}," *",-1),Fe={class:"flex flex-wrap gap-2 btn-right"},xe=ee({__name:"ListHouse",setup(Be){const{t:p}=te(),_=le(),{query:u}=ae(),L=oe(),B=ie(),{form:o,getAll:f,state:h,setStateFilter:l,remove:I}=pe(),{getOne:M,realestateType:y}=ce(),{getAll:q,state:w,setStateFilter:H}=me(),{getAll:N,state:g,setStateFilter:b}=ue(),K=F([{id:"all",name:"ທັງໝົດ"},{id:"sale",name:"ຂາຍ"},{id:"rent",name:"ເຊົ່າ"}]),z=F([{id:"all",name:"ທັງໝົດ"},{id:"air",name:"ເເອ"},{id:"fan",name:"ພັດລົມ"},{id:"no",name:"ບໍ່ມີ"}]);async function R(){Object.keys(u).length!==0&&(l.page=u.page?Number(u.page):1,l.limit=u.limit?Number(u.limit):10,_.push({query:{page:l.page,limit:l.limit}})),await J()}se(async()=>{await R()});const E=async e=>{_.push({name:"owner.edit.house",params:{id:e}})},W=async e=>{await I(e),h.error?await Z():await R()};async function Q(e){l.page=e.page+1,l.limit=e.rows;const{page:s,limit:i}=l;_.push({name:"owner.house",query:{page:s,limit:i}}),await f()}const G=V(()=>{let e=0;return l.page&&l.limit&&(e=(l.page-1)*l.limit),e}),m=async()=>{l.filter&&(l.filter.real_estate_type_id=o.real_estate_type_id==="all"?"":o.real_estate_type_id,l.filter.service_model=o.service_model==="all"?"":o.service_model,l.filter.room_type=o.room_type==="all"?"":o.room_type,l.filter.district_id=o.district_id==="all"?"":o.district_id),await f()};async function C(e){var i,$,j;const s=e.target.name;e.target.value===""&&(s==="village"&&((i=l.filter)==null?void 0:i.village)!==void 0&&(l.filter.village=""),s==="wide"&&(($=l.filter)==null?void 0:$.wide)!==void 0&&(l.filter.wide=""),s==="long"&&((j=l.filter)==null?void 0:j.long)!==void 0&&(l.filter.long=""),await f())}const T=V({get:()=>l.filter.village||"",set:e=>{l.filter&&(l.filter.village=e)}}),U=V({get:()=>l.filter.wide||"",set:e=>{l.filter&&(l.filter.wide=e)}}),A=V({get:()=>l.filter.long||"",set:e=>{l.filter&&(l.filter.long=e)}}),J=async()=>{await f(),await M(),y.props.unshift({id:"all",name:"ທັງໝົດ"}),o.room_type="all",o.service_model="all",H.limit=1e3,await q(),w.data.props.unshift({id:"all",name:"ທັງໝົດ"}),o.real_estate_type_id=y.props.length>0?y.props[0].id:void 0,o.province_id=w.data.props.length>0?w.data.props[0].id:void 0,b.filter&&(b.filter.province_id=o.province_id,await N(),g.data.props.unshift({id:"all",name:"ທັງໝົດ"}),await O())},O=async()=>{o.district_id=g.data.props.length>0?g.data.props[0].id:void 0},X=async e=>{b.filter&&(b.filter.province_id=e,await N(),g.data.props.unshift({id:"all",name:"ທັງໝົດ"}),await O(),l.filter&&(l.filter.district_id=o.district_id==="all"?"":o.district_id,l.filter.province_id=o.province_id==="all"?"":o.province_id),await f())},Y=async e=>{B.require({message:p("confirmDelete.message"),header:p("confirmDelete.header"),rejectLabel:p("confirmDelete.rejectLabel"),acceptLabel:p("confirmDelete.acceptLabel"),rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{await W(e),L.add({severity:"success",summary:p("toast.summary.delete"),detail:p("toast.detail.delete"),life:3e3})},reject:()=>{L.add({severity:"error",summary:p("toast.summary.cancel_delete"),detail:p("toast.detail.cancel_delete"),life:3e3})}})},Z=()=>{L.add({severity:"error",summary:p("toast.summary.error"),detail:`${h.error}`,life:3e3})},x=async()=>{_.push({name:"owner.add.house"})};return(e,s)=>(ne(),re("div",fe,[a("div",he,[a("span",ge,[a("h2",ve,d(e.$t("table.title.real_estate")),1)]),a("span",_e,[r(t(P),{icon:"pi pi-plus-circle",rounded:"",severity:"info",onClick:s[0]||(s[0]=i=>x())})])]),r(t(de),{value:t(h).data.props,onPage:Q,paginator:"",first:G.value,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",loading:t(h).isLoading,lazy:"",totalRecords:t(h).data.total,rows:t(l).limit,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:`${e.$t("table.pagination.show")} {first} ${e.$t("table.pagination.to")} {last} ${e.$t("table.pagination.from")} {totalRecords} ${e.$t("table.pagination.row")}`},{header:S(()=>[a("div",ye,[a("div",we,[a("label",null,[c(d(e.$t("messages.realestate_type"))+" ",1),be]),r(t(v),{name:"real_estate_type",modelValue:t(o).real_estate_type_id,"onUpdate:modelValue":s[1]||(s[1]=i=>t(o).real_estate_type_id=i),options:t(y).props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:m},null,8,["modelValue","options","placeholder"])]),a("div",$e,[a("label",null,[c(d(e.$t("messages.service_model"))+" ",1),Ve]),r(t(v),{modelValue:t(o).service_model,"onUpdate:modelValue":s[2]||(s[2]=i=>t(o).service_model=i),options:K.value,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),optionValue:"id",highlightOnSelect:!0,class:"w-full",onChange:m},null,8,["modelValue","options","placeholder"])]),a("div",Se,[a("label",null,[c(d(e.$t("messages.room_type"))+" ",1),Le]),r(t(v),{modelValue:t(o).room_type,"onUpdate:modelValue":s[3]||(s[3]=i=>t(o).room_type=i),options:z.value,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:m},null,8,["modelValue","options","placeholder"])]),a("div",Ce,[a("label",null,[c(d(e.$t("messages.province"))+" ",1),Pe]),r(t(v),{modelValue:t(o).province_id,"onUpdate:modelValue":s[4]||(s[4]=i=>t(o).province_id=i),options:t(w).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:s[5]||(s[5]=i=>X(t(o).province_id))},null,8,["modelValue","options","placeholder"])])]),a("div",ke,[a("div",De,[a("label",null,[c(d(e.$t("messages.district"))+" ",1),Ne]),r(t(v),{modelValue:t(o).district_id,"onUpdate:modelValue":s[6]||(s[6]=i=>t(o).district_id=i),options:t(g).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:m},null,8,["modelValue","options","placeholder"])]),a("div",Re,[a("label",null,[c(d(e.$t("messages.village"))+" ",1),Te]),r(t(D),{modelValue:T.value,"onUpdate:modelValue":s[7]||(s[7]=i=>T.value=i),placeholder:e.$t("placeholder.inputText"),style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"village",onKeyup:k(m,["enter"]),onInput:C},null,8,["modelValue","placeholder"])]),a("div",Ue,[a("label",null,[c(d(e.$t("messages.wide"))+" ",1),Ae]),r(t(D),{modelValue:U.value,"onUpdate:modelValue":s[8]||(s[8]=i=>U.value=i),placeholder:e.$t("placeholder.inputText"),style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"wide",onKeyup:k(m,["enter"]),onInput:C},null,8,["modelValue","placeholder"])]),a("div",Oe,[a("label",null,[c(d(e.$t("messages.long"))+" ",1),je]),r(t(D),{modelValue:A.value,"onUpdate:modelValue":s[9]||(s[9]=i=>A.value=i),placeholder:e.$t("placeholder.inputText"),style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"long",onKeyup:k(m,["enter"]),onInput:C},null,8,["modelValue","placeholder"])])])]),default:S(()=>[r(t(n),{field:"id",header:e.$t("table.header.index")},{body:S(i=>[c(d(i.index+1),1)]),_:1},8,["header"]),r(t(n),{field:"real_esate_number",header:e.$t("table.header.real_esate_number")},null,8,["header"]),r(t(n),{field:"real_estate_type.name",header:e.$t("table.header.realestate_type")},null,8,["header"]),r(t(n),{field:"service_model",header:e.$t("table.header.service_model")},null,8,["header"]),r(t(n),{field:"room_type",header:e.$t("table.header.room_type")},null,8,["header"]),r(t(n),{field:"village",header:e.$t("table.header.village")},null,8,["header"]),r(t(n),{field:"district.name",header:e.$t("table.header.district")},null,8,["header"]),r(t(n),{field:"district.province.name",header:e.$t("table.header.province")},null,8,["header"]),r(t(n),{field:"zip_code",header:e.$t("table.header.zip_code")},null,8,["header"]),r(t(n),{field:"wide",header:e.$t("table.header.wide")},null,8,["header"]),r(t(n),{field:"long",header:e.$t("table.header.long")},null,8,["header"]),r(t(n),{field:"status",header:e.$t("table.header.status")},null,8,["header"]),r(t(n),{headerStyle:"width: 10rem",style:{width:"23%"}},{body:S(({data:i})=>[a("div",Fe,[r(t(P),{type:"button",icon:"pi pi-pencil",rounded:"",severity:"warning",style:{color:"white"},onClick:$=>E(i.id)},null,8,["onClick"]),r(t(P),{type:"button",icon:"pi pi-trash",rounded:"",severity:"danger",onClick:$=>Y(i.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","first","loading","totalRecords","rows","currentPageReportTemplate"])]))}});export{xe as default};
