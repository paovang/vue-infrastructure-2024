import{d as A,o as m,c as h,b as e,N as c,t as n,f as z,q as i,e as a,X as de,n as ce,K as pe,L as ue,a as me,A as f,G as he,z as U,P as fe,p as ye,h as _e,F as ve,g as ge,w as be,a0 as we,H as D,O as Ie,_ as $e}from"./index-UY_ClqEZ.js";import{_ as $}from"./FormInputText.vue_vue_type_script_setup_true_lang-BKQ39up6.js";import{s as Se,h as Ve,a as T}from"./panel.esm-O0rhluNn.js";import{b as Me,u as ke}from"./index.esm-u2pHycXn.js";import{s as I}from"./dropdown.esm-r4WhCfGt.js";import{s as Ce}from"./inputnumber.esm-804f4__K.js";import{c as J}from"./axios.config-rwBDy860.js";import{s as Y}from"./divider.esm-RSp4MV6F.js";import{r as Le}from"./real-estate-service.store-rvsbhmXe.js";import{h as Fe}from"./house.store-gIoDSZKq.js";import{p as Oe}from"./province.store-HIZ0-GLO.js";import{d as Ue}from"./district.store-44m-LXRT.js";import"./inputtext.esm-SkpUsWzK.js";import"./index.esm-4tGtFC9W.js";import"./index.esm-8HP-Df8n.js";import"./index.esm-CKEJ9wVk.js";const je={class:"flex flex-column gap-2 mb-3 w-full"},Ne=["for"],De={key:0,class:"text-red-500"},Te=["id"],Je=A({__name:"FormTextArea",props:{name:{},label:{},required:{type:Boolean},placeholder:{},value:{}},setup(_){const y=_,{value:v,errorMessage:S}=Me(()=>y.name);return y.value&&(v.value=y.value),(t,p)=>(m(),h("div",je,[e("label",{for:t.name},[c(n(t.label)+" ",1),t.required?(m(),h("span",De," *")):z("",!0)],8,Ne),i(a(Se),{"auto-resize":"",rows:"5",modelValue:a(v),"onUpdate:modelValue":p[0]||(p[0]=M=>de(v)?v.value=M:null),id:t.name,class:ce({"p-invalid":a(S)}),"aria-describedby":`text-error-${t.name}`,placeholder:t.placeholder},null,8,["modelValue","id","class","aria-describedby","placeholder"]),e("small",{class:"p-error",id:`text-error-${t.name}`},n(a(S)),9,Te)]))}}),r=_=>(ye("data-v-82bd2576"),_=_(),_e(),_),Ye={class:"card"},Ae={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},ze={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},Be=r(()=>e("i",{class:"pi pi-arrow-left",style:{color:"green"}},null,-1)),qe=r(()=>e("br",null,null,-1)),Ge={class:"columns is-12 is-multiline",style:{"margin-top":"20px"}},xe={class:"column is-mobile-12 is-2"},Ee=r(()=>e("span",{class:"text-red-500"}," *",-1)),Qe={class:"column is-mobile-12 is-2"},Re=r(()=>e("span",{class:"text-red-500"}," *",-1)),Ze={class:"column is-mobile-12 is-2"},He=r(()=>e("span",{class:"text-red-500"}," *",-1)),Pe={class:"column is-mobile-12 is-2"},We=r(()=>e("span",{class:"text-red-500"}," *",-1)),Xe={class:"column is-mobile-12 is-2"},Ke=r(()=>e("span",{class:"text-red-500"}," *",-1)),el={class:"column is-mobile-12 is-2"},ll={class:"column is-mobile-12 is-2"},tl={class:"column is-mobile-12 is-2"},sl={class:"column is-mobile-12 is-2"},al={class:"column is-mobile-12 is-6"},ol={class:"column is-mobile-12 is-12"},il={class:"column is-12"},nl={class:"column is-3"},rl=r(()=>e("span",{class:"text-red-500"}," *",-1)),dl={class:"column is-3"},cl=r(()=>e("span",{class:"text-red-500"}," *",-1)),pl={class:"column is-5"},ul=["onUpdate:modelValue"],ml={class:"column is-1"},hl=["onClick"],fl=r(()=>e("i",{class:"pi pi-times-circle"},null,-1)),yl=[fl],_l={class:"column is-mobile-12 is-12"},vl={class:"column is-12"},gl={class:"column is-mobile-12 is-12"},bl=r(()=>e("span",{class:"text-red-500"}," *",-1)),wl={key:0},Il={key:1,style:{color:"#029217"}},$l={class:"column is-mobile-12 is-12"},Sl=r(()=>e("span",{class:"text-red-500"}," *",-1)),Vl={key:0},Ml={key:1,style:{color:"#029217"}},kl={class:"column is-mobile-12 is-12 text-right"},Cl=r(()=>e("i",{class:"pi pi-save",style:{"margin-right":"8px"}},null,-1)),Ll=A({__name:"AddHouse",setup(_){const y=pe(),v=ue(),S=me(),{form:t,state:p,register:M}=Fe(),{getOne:B,realestateType:k}=Le(),{getAll:q,state:C,setStateFilter:G}=Oe(),{getAll:j,state:L,setStateFilter:V}=Ue(),g=f(null),b=f(),x=async()=>{S.push({name:"owner.house"})},E=()=>{document.getElementById("fileInput").click()},Q=async l=>{var u;const s=(u=l.target.files)==null?void 0:u[0];s&&(g.value="ກຳລັງອັບໂຫຼດໂປຮໄຟລເຂົ້າລະບົບ ກະລຸນາລໍຖ້າ",await oe(s),g.value="ອັບໂຫຼດສຳເລັດເເລ້ວ.")},R=()=>{document.getElementById("galleryInput").click()},Z=async l=>{const s=l.target.files;s&&(b.value="ກຳລັງອັບໂຫຼດ "+s.length+" ໄຟລເຂົ້າລະບົບ ກະລຸນາລໍຖ້າ...",await ie(s),b.value="ອັບໂຫຼດສຳເລັດເເລ້ວ "+s.length+" ໄຟລ.")},w=f([{price:"",unit_price:"",detail:""}]),H=async()=>{w.value&&w.value.push({price:"",unit_price:"",detail:""})},P=async l=>{w.value&&w.value.splice(l,1)},{handleSubmit:W}=ke({validationSchema:Ve}),X=f([{id:"sale",name:"ຂາຍ"},{id:"rent",name:"ເຊົ່າ"}]),K=f([{id:"air",name:"ເເອ"},{id:"fan",name:"ພັດລົມ"},{id:"no",name:"ບໍ່ມີ"}]),ee=f([{id:"day",name:"ມື້"},{id:"month",name:"ເດືອນ"},{id:"year",name:"ປີ"}]),F=f(),O=f();he(async()=>{await le()});const le=async()=>{t.room_type="air",t.service_model="sale",G.limit=1e3,await q(),await B(),t.real_estate_type_id=k.props.length>0?k.props[0].id:void 0,t.province_id=C.data.props.length>0?C.data.props[0].id:void 0,V.filter&&(V.filter.province_id=t.province_id,await j(),await N())},te=async l=>{V.filter&&(V.filter.province_id=l,await j(),await N())},N=async()=>{t.district_id=L.data.props.length>0?L.data.props[0].id:void 0},se=W(async l=>{t.village=l.village,t.zip_code=l.zipcode,t.wide=l.wide,t.long=l.long,t.remark=l.remark,t.location=l.location,t.prices=w.value,t.image=O.value,t.gallery=F.value,await M(),p.error?await ne():await re()}),ae=async()=>{g.value="",b.value="",O.value="",F.value="";const l=document.getElementById("fileInput");l.value="";const o=document.getElementById("galleryInput");o.value=""},oe=async l=>{var o;p.btnLoading=!0;try{let s=new FormData;s.append("file",l);const u=await J.post("http://159.223.42.254/api/upload_file",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vMTU5LjIyMy40Mi4yNTQvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3MDc5MjgwMDksIm5iZiI6MTcwNzkyODAwOSwianRpIjoia25Ma3BqRHdObUh4a2dyUyIsInN1YiI6IjIiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.FDSN40oY148SrIvrc0oj51Ln8dgwlYj8KDCEjvUPZ1U"}});O.value=(o=u.data)==null?void 0:o.filename,p.btnLoading=!1}catch(s){console.error("Upload failed:",s)}},ie=async l=>{p.btnLoading=!0;try{let o=new FormData;for(let d=0;d<l.length;d++)o.append("files[]",l[d]);const u=(await J.post("http://159.223.42.254/api/upload/multiple/files",o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vMTU5LjIyMy40Mi4yNTQvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3MDc5MjgwMDksIm5iZiI6MTcwNzkyODAwOSwianRpIjoia25Ma3BqRHdObUh4a2dyUyIsInN1YiI6IjIiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.FDSN40oY148SrIvrc0oj51Ln8dgwlYj8KDCEjvUPZ1U"}})).data.filename.map(d=>({image:`${d}`}));F.value=u,p.btnLoading=!1}catch(o){console.error("Upload failed:",o)}},ne=()=>{y.add({severity:"error",summary:"ເກີດຂໍ້ຜິດພາດ.",detail:`${p.error}`,life:3e3})},re=async()=>{v.require({message:"ທ່ານຕ້ອງການສຳເນົາຂໍ້ມູນບໍ?",header:"ຢືນຢັນເພື່ອທຳການສຳເນົາຂໍ້ມູນ",acceptLabel:"ຕ້ອງການ",rejectLabel:"ບໍ່ຕ້ອງການ",rejectClass:"p-button-danger",acceptClass:"p-button-info",accept:async()=>{await ae(),y.add({severity:"success",summary:"ໄດ້ທຳການສຳເນົາຂໍ້ມູນເເລ້ວ.",detail:"ສຳເນົາຂໍ້ມູນສຳເລັດ.",life:3e3})},reject:async()=>{window.location.reload(),y.add({severity:"error",summary:"ບໍ່ຕ້ອງການສຳເນົາຂໍ້ມູນ.",detail:"ຖືກຍົກເລີກການສຳເນົາເເລ້ວ.",life:3e3})}})};return(l,o)=>(m(),h("div",Ye,[e("div",Ae,[e("span",ze,[e("h2",{style:{"font-weight":"bold","font-size":"20px"},class:"arrow-left",onClick:o[0]||(o[0]=s=>x())},[Be,c(" "+n(l.$t("messages.form_register")),1)])])]),qe,i(a(Y)),e("form",{onSubmit:o[7]||(o[7]=fe(s=>a(se)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[e("div",Ge,[e("div",xe,[e("label",null,[c(n(l.$t("messages.realestate_type"))+" ",1),Ee]),i(a(I),{name:"real_estate_type",style:{"margin-top":"8px"},modelValue:a(t).real_estate_type_id,"onUpdate:modelValue":o[1]||(o[1]=s=>a(t).real_estate_type_id=s),options:a(k).props,optionLabel:"name",placeholder:l.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options","placeholder"])]),e("div",Qe,[e("label",null,[c(n(l.$t("messages.service_model"))+" ",1),Re]),i(a(I),{style:{"margin-top":"8px"},modelValue:a(t).service_model,"onUpdate:modelValue":o[2]||(o[2]=s=>a(t).service_model=s),options:X.value,optionLabel:"name",placeholder:l.$t("placeholder.dropdownSelect"),optionValue:"id",highlightOnSelect:!0,class:"w-full"},null,8,["modelValue","options","placeholder"])]),e("div",Ze,[e("label",null,[c(n(l.$t("messages.room_type"))+" ",1),He]),i(a(I),{style:{"margin-top":"8px"},modelValue:a(t).room_type,"onUpdate:modelValue":o[3]||(o[3]=s=>a(t).room_type=s),options:K.value,optionLabel:"name",placeholder:l.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options","placeholder"])]),e("div",Pe,[e("label",null,[c(n(l.$t("messages.province"))+" ",1),We]),i(a(I),{style:{"margin-top":"8px"},modelValue:a(t).province_id,"onUpdate:modelValue":o[4]||(o[4]=s=>a(t).province_id=s),options:a(C).data.props,optionLabel:"name",placeholder:l.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:o[5]||(o[5]=s=>te(a(t).province_id))},null,8,["modelValue","options","placeholder"])]),e("div",Xe,[e("label",null,[c(n(l.$t("messages.district"))+" ",1),Ke]),i(a(I),{style:{"margin-top":"8px"},modelValue:a(t).district_id,"onUpdate:modelValue":o[6]||(o[6]=s=>a(t).district_id=s),options:a(L).data.props,optionLabel:"name",placeholder:l.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:""},null,8,["modelValue","options","placeholder"])]),e("div",el,[i($,{name:"village",label:"ບ້ານ",required:"",placeholder:l.$t("placeholder.inputText"),class:"h-full"},null,8,["placeholder"])]),e("div",ll,[i($,{name:"zipcode",label:"zipcode",required:"",placeholder:l.$t("placeholder.inputText"),class:"h-full"},null,8,["placeholder"])]),e("div",tl,[i($,{name:"wide",label:"ລວງກວ້າງ",required:"",placeholder:l.$t("placeholder.inputText"),class:"h-full"},null,8,["placeholder"])]),e("div",sl,[i($,{name:"long",label:"ລວງຍາວ",required:"",placeholder:l.$t("placeholder.inputText"),class:"h-full"},null,8,["placeholder"])]),e("div",al,[i($,{name:"location",label:"ລີ້ງເເຜນທີ່",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",ol,[i(Je,{name:"remark",label:"ລາຍລະອຽດ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",il,[i(a(T),{header:l.$t("messages.setting_price_for_rent")},{default:U(()=>[(m(!0),h(ve,null,ge(w.value,(s,u)=>(m(),h("div",{class:"columns is-12",key:u},[e("div",nl,[e("label",null,[c(n(l.$t("messages.service_model"))+" ",1),rl]),i(a(I),{modelValue:s.unit_price,"onUpdate:modelValue":d=>s.unit_price=d,options:ee.value,optionLabel:"name",placeholder:l.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,required:""},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])]),e("div",dl,[e("label",null,[c(n(l.$t("messages.price"))+" ",1),cl]),i(a(Ce),{modelValue:s.price,"onUpdate:modelValue":d=>s.price=d,placeholder:"ກະລຸນາປ້ອນກ່ອນ...",required:"",style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'",width:"100% !important"}},null,8,["modelValue","onUpdate:modelValue"])]),e("div",pl,[e("label",null,n(l.$t("messages.details")),1),be(e("input",{name:"detail",type:"text",class:"input","onUpdate:modelValue":d=>s.detail=d,placeholder:"ກະລຸນາປ້ອນກ່ອນ...",required:"",style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'"}},null,8,ul),[[we,s.detail]])]),e("div",ml,[u>0?(m(),h("a",{key:0,onClick:d=>P(u),class:"button is-danger remove-btn",style:{"margin-top":"22px"}},yl,8,hl)):z("",!0)])]))),128)),e("div",_l,[e("a",{onClick:H,class:"button is-primary"},n(l.$t("button.add_item")),1)])]),_:1},8,["header"])]),e("div",vl,[i(a(T),{header:l.$t("messages.profile_and_gallery")},{default:U(()=>[e("div",gl,[e("label",null,[c(n(l.$t("messages.profile"))+" ",1),bl]),e("label",{class:"upload-box",onClick:E,style:D({border:g.value?"1px dashed #029217":"1px dashed red"})},[g.value?(m(),h("div",Il,n(g.value),1)):(m(),h("div",wl,n(l.$t("placeholder.inputFile")),1))],4),e("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:Q},null,32)]),i(a(Y)),e("div",$l,[e("label",null,[c(n(l.$t("messages.gallery"))+" ",1),Sl]),e("label",{class:"upload-box",onClick:R,style:D({border:b.value?"1px dashed #029217":"1px dashed red"})},[b.value?(m(),h("div",Ml,n(b.value),1)):(m(),h("div",Vl,n(l.$t("placeholder.inputFile")),1))],4),e("input",{type:"file",id:"galleryInput",multiple:"",style:{display:"none"},onChange:Z},null,32)])]),_:1},8,["header"])]),e("div",kl,[i(a(Ie),{style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'"},type:"submit",severity:"info",loading:a(p).btnLoading},{default:U(()=>[Cl,c(" "+n(l.$t("button.save_data")),1)]),_:1},8,["loading"])])])],32)]))}}),Ql=$e(Ll,[["__scopeId","data-v-82bd2576"]]);export{Ql as default};
