import{d as O,L as P,u as R,C as z,A as D,H as G,c as d,b as e,q as i,P as h,t as m,e as o,F as S,g as I,U as H,p as Q,h as W,o as p,Q as j,_ as J}from"./index-ndm1OlDi.js";import{_ as $}from"./FormInputText.vue_vue_type_script_setup_true_lang-e2K7XzI3.js";import{a as K,e as X}from"./user.schema-XA0gghdt.js";import{s as Y}from"./dropdown.esm-3WeQXGs6.js";import{s as V}from"./divider.esm-3pp8l8Kj.js";import{s as Z}from"./checkbox.esm-BcTJinpf.js";import{u as ss}from"./index.esm-ev22Y4M4.js";import"./inputtext.esm-VXiuoGV_.js";import"./axios.config-LVz7g0fw.js";import"./index.esm-kRFg-X8N.js";const c=u=>(Q("data-v-1ba2589b"),u=u(),W(),u),es={class:"card"},os={class:"columns is-12 is-multiline"},as={class:"column is-4 is-mobile-12"},ts={class:"column is-4 is-mobile-12"},ls={class:"column is-4 is-mobile-12"},is=c(()=>e("span",{class:"text-red-500"}," *",-1)),rs={style:{"font-size":"18px","font-weight":"bold"}},ns=c(()=>e("i",{class:"pi pi-users"},null,-1)),ds=c(()=>e("span",{style:{width:"10px"}},null,-1)),ms={class:"column is-12 is-mobile-12",style:{"font-size":"18px","font-weight":"bold"}},ps=c(()=>e("i",{class:"pi pi-check-circle",style:{color:"green"}},null,-1)),cs={class:"checkbox ml-2"},us=c(()=>e("br",null,null,-1)),hs={style:{"text-align":"right"}},fs=O({__name:"EditUser",setup(u){const{form:a,update:x,getAllRole:k,getAllPermission:T,allPermission:U,allRole:F,state:f,getOne:B,userGetByOne:r}=K(),g=P(),{t:n}=R(),y=z(),v=D([]),E={name:n("placeholder.inputText"),email:n("placeholder.inputText")},{handleSubmit:C,setFieldValue:w}=ss({validationSchema:X(E)}),L=C(async s=>{a.id=String(y.params.id),a.name=s.name,a.email=s.email,a.password=s.password,a.password_confirmation=s.password_confirmation,await x(),f.error?await N():await q()});G(async()=>{const s=Number(y.params.id);await B(s),await k(),await T(),a.roleId=r.data.props.role?r.data.props.role.id:void 0,w("name",r.data.props.name),w("email",r.data.props.email);const t=r.data.props.permissions;t&&(t.forEach(l=>{v.value.push(l.id)}),a.permissionIds=v.value)});const N=()=>{g.add({severity:"error",summary:n("toast.summary.error"),detail:`${f.error}`,life:3e3})},q=()=>{g.add({severity:"success",summary:n("toast.summary.success"),detail:n("toast.detail.successfully"),life:3e3})};return(s,t)=>(p(),d("div",es,[e("form",{onSubmit:t[2]||(t[2]=H(l=>o(L)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[e("div",os,[e("div",as,[i($,{ref:"autoFocusCursor",name:"name",label:s.$t("messages.name"),required:"",placeholder:s.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),e("div",ts,[i($,{ref:"autoFocusCursor",name:"email",label:s.$t("messages.email"),required:"",placeholder:s.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),e("div",ls,[e("label",null,[h(m(s.$t("messages.role"))+" ",1),is]),i(o(Y),{style:{"margin-top":"7px"},modelValue:o(a).roleId,"onUpdate:modelValue":t[0]||(t[0]=l=>o(a).roleId=l),options:o(F).data.props,optionLabel:"name",placeholder:s.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options","placeholder"])])]),e("p",rs,[ns,ds,h(" "+m(s.$t("messages.permission")),1)]),i(o(V)),(p(!0),d(S,null,I(o(U).data.props,(l,A)=>(p(),d("div",{class:"columns is-12 is-multiline",key:A},[e("div",ms,[ps,h(" "+m(l.name),1)]),(p(!0),d(S,null,I(l.permissions,(_,b)=>(p(),d("div",{class:"column is-4 is-mobile-12",key:b},[e("label",cs,[i(o(Z),{modelValue:o(a).permissionIds,"onUpdate:modelValue":t[1]||(t[1]=M=>o(a).permissionIds=M),inputId:"permission_"+b,name:"permission_"+b,value:_.id},null,8,["modelValue","inputId","name","value"]),h(" "+m(_.name)+" "+m(_.id),1)])]))),128))]))),128)),i(o(V),{style:{"margin-top":"-10px"}}),us,e("div",hs,[i(o(j),{type:"submit",label:s.$t("button.edit_data"),loading:o(f).btnLoading},null,8,["label","loading"])])],32)]))}}),xs=J(fs,[["__scopeId","data-v-1ba2589b"]]);export{xs as default};
