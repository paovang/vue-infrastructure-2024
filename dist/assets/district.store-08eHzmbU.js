import{i as u,b as p,A as j,c as y}from"./axios.config-EMV3l8KB.js";import{W as b,X as v}from"./index-RvyxrYh3.js";var D=Object.defineProperty,x=Object.getOwnPropertyDescriptor,L=(e,t,s,r)=>{for(var a=r>1?void 0:r?x(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&D(t,s,a),a},A=(e,t)=>(s,r)=>t(s,r,e);let _=class{constructor(e){this._api=e}async create(e){return{data:(await this._api.axios({method:"post",url:"/admin/district",params:{name:e.name,province_id:e.province_id}})).data,message:"ເພີ່ມຂໍ້ມູນບໍລິສັດສຳເລັດແລ້ວ",status:"success"}}async update(e){return{data:(await this._api.axios({method:"put",url:"/admin/district/"+e.id,params:{name:e.name}})).data,message:"ອັບເດດ ຂໍ້ມູນສຳເລັດເເລ້ວ",status:"success"}}async delete(e){return{data:(await this._api.axios({method:"delete",url:`/admin/district/${e}`})).data,message:"ລຶບຂໍ້ມູນ ສຳເລັດເເລ້ວ.",status:"success"}}async getAll(e){var a,i;const t=await this._api.axios({url:"/admin/district",params:{page:e.page,per_page:e.limit,province_id:(a=e.filter)==null?void 0:a.province_id,filter:(i=e.filter)==null?void 0:i.name}}),{data:s,pagination:r}=t.data.data;return{data:{props:s,total:r.total},status:"success"}}async getById(e){console.log(e)}};_=L([u(),A(0,p(j))],_);var C=Object.defineProperty,S=Object.getOwnPropertyDescriptor,U=(e,t,s,r)=>{for(var a=r>1?void 0:r?S(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&C(t,s,a),a},E=(e,t)=>(s,r)=>t(s,r,e);let m=class{constructor(e){this._api=e}async execute(e){return await this._api.create(e)}};m=U([u(),E(0,p(_))],m);var B=Object.defineProperty,F=Object.getOwnPropertyDescriptor,G=(e,t,s,r)=>{for(var a=r>1?void 0:r?F(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&B(t,s,a),a},I=(e,t)=>(s,r)=>t(s,r,e);let g=class{constructor(e){this._api=e}async execute(e){try{return await this._api.getAll(e)}catch(t){t.response.status===422&&Object.keys(t.response.data.errors).map(s=>`${s}: ${t.response.data.errors[s].join(", ")}`).join("; ")}}};g=G([u(),I(0,p(_))],g);var R=Object.defineProperty,W=Object.getOwnPropertyDescriptor,X=(e,t,s,r)=>{for(var a=r>1?void 0:r?W(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&R(t,s,a),a},q=(e,t)=>(s,r)=>t(s,r,e);let h=class{constructor(e){this._api=e}async execute(e){return await this._api.update(e)}};h=X([u(),q(0,p(_))],h);var z=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=(e,t,s,r)=>{for(var a=r>1?void 0:r?H(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&z(t,s,a),a},K=(e,t)=>(s,r)=>t(s,r,e);let w=class{constructor(e){this._api=e}async execute(e){return await this._api.delete(e)}};w=J([u(),K(0,p(_))],w);var M=Object.defineProperty,N=Object.getOwnPropertyDescriptor,Q=(e,t,s,r)=>{for(var a=r>1?void 0:r?N(t,s):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&M(t,s,a),a},f=(e,t)=>(s,r)=>t(s,r,e);let O=class{constructor(e,t,s,r){this._create=e,this._getAll=t,this._update=s,this._delete=r}async register(e){return await this._create.execute(e)}async update(e){return await this._update.execute(e)}async delete(e){return await this._delete.execute(e)}async getAll(e){return await this._getAll.execute(e)}};O=Q([u(),f(0,p(m)),f(1,p(g)),f(2,p(h)),f(3,p(w))],O);const Y=b("district-store",()=>{const e=y.resolve(O),t=v({data:{props:[],total:0},isLoading:!1,btnLoading:!1,error:""}),s=v({page:1,limit:10,filter:{name:"",province_id:""}}),r=v({id:"",name:"",province_id:""});async function a(){t.isLoading=!0,t.btnLoading=!0;try{await e.register(r),await d(),t.error="",r.name=""}catch(n){let c="";n.response.status===422&&(c=Object.keys(n.response.data.errors).map(l=>`${l}: ${n.response.data.errors[l].join(", ")}`).join("; ")),t.error=c}t.isLoading=!1,t.btnLoading=!1}async function i(){t.isLoading=!0,t.btnLoading=!0;try{await e.update(r),await d(),t.error="",r.name=""}catch(n){let c="";n.response.status===422&&(c=Object.keys(n.response.data.errors).map(l=>`${l}: ${n.response.data.errors[l].join(", ")}`).join("; ")),t.error=c}t.isLoading=!1,t.btnLoading=!1}async function o(n){t.isLoading=!0;try{await e.delete(n),await d(),t.error="",r.name=""}catch(c){let l="";c.response.status===422&&(l=Object.keys(c.response.data.errors).map(P=>`${P}: ${c.response.data.errors[P].join(", ")}`).join("; ")),t.error=l}t.isLoading=!1}async function $(){console.log("getOne")}async function d(){t.isLoading=!0;const n=await e.getAll({page:s.page,limit:s.limit,filter:s.filter});n&&n.data&&n.status=="success"&&(t.data.props=n.data.props,t.data.total=n.data.total,t.isLoading=!1)}return{register:a,update:i,remove:o,getOne:$,getAll:d,form:r,setStateFilter:s,state:t}});export{Y as d};
