import{d as T,o as u,c as m,b as e,P as d,t as S,f as $,q as i,e as s,a2 as de,n as ce,L as pe,M as ue,a as me,A as h,G as he,z as j,Q as _e,p as fe,h as ye,F as ve,g as ge,w as be,a6 as we,H as J,O as Ve,_ as Ie}from"./index-OX01bSQz.js";import{_ as V}from"./FormInputText.vue_vue_type_script_setup_true_lang-yvHtQo9c.js";import{s as xe,h as Se,a as A,b as z}from"./divider.esm-TTYwXwaZ.js";import{b as ke,u as Ce}from"./index.esm-cz6uxygE.js";import{s as w}from"./dropdown.esm-GdeBCu2X.js";import{a as Me}from"./index.esm-wocWZpjc.js";import{a as U}from"./axios-AS3Zf-1Y.js";import{r as Ne}from"./real-estate-service.store-1RA-iO5T.js";import{h as Oe}from"./house.store-SfavK750.js";import{p as Fe}from"./province.store-__dh6y7O.js";import{d as je}from"./district.store-dHJzIg56.js";import"./inputtext.esm-Eczfoyg1.js";import"./index.esm-2dzSh31X.js";import"./index.esm-b0fdTtY_.js";import"./axios.config-3l-LvThz.js";const Le={class:"flex flex-column gap-2 mb-3 w-full"},De=["for"],Je={key:0,class:"text-red-500"},Ae=["id"],ze=T({__name:"FormTextArea",props:{name:{},label:{},required:{type:Boolean},placeholder:{},value:{}},setup(f){const _=f,{value:y,errorMessage:I}=ke(()=>_.name);return _.value&&(y.value=_.value),(l,c)=>(u(),m("div",Le,[e("label",{for:l.name},[d(S(l.label)+" ",1),l.required?(u(),m("span",Je," *")):$("",!0)],8,De),i(s(xe),{"auto-resize":"",rows:"5",modelValue:s(y),"onUpdate:modelValue":c[0]||(c[0]=k=>de(y)?y.value=k:null),id:l.name,class:ce({"p-invalid":s(I)}),"aria-describedby":`text-error-${l.name}`,placeholder:l.placeholder},null,8,["modelValue","id","class","aria-describedby","placeholder"]),e("small",{class:"p-error",id:`text-error-${l.name}`},S(s(I)),9,Ae)]))}}),n=f=>(fe("data-v-1290ae12"),f=f(),ye(),f),Ue={class:"card"},Te={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},$e={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},Be=n(()=>e("i",{class:"pi pi-arrow-left",style:{color:"green"}},null,-1)),Ye=n(()=>e("br",null,null,-1)),Ge={class:"columns is-12 is-multiline",style:{"margin-top":"20px"}},Qe={class:"column is-mobile-12 is-2"},Ee=n(()=>e("label",null,[d(" ປະເພດ ບໍລິການ "),e("span",{class:"text-red-500"}," *")],-1)),qe={class:"column is-mobile-12 is-2"},Pe=n(()=>e("label",null,[d(" ຮູບເເບບ ບໍລິການ "),e("span",{class:"text-red-500"}," *")],-1)),Re={class:"column is-mobile-12 is-2"},Xe=n(()=>e("label",null,[d(" ປະເພດຫ້ອງ "),e("span",{class:"text-red-500"}," *")],-1)),Ze={class:"column is-mobile-12 is-2"},He=n(()=>e("label",null,[d(" ເເຂວງ "),e("span",{class:"text-red-500"}," *")],-1)),We={class:"column is-mobile-12 is-2"},Ke=n(()=>e("label",null,[d(" ເມືອງ "),e("span",{class:"text-red-500"}," *")],-1)),el={class:"column is-mobile-12 is-2"},ll={class:"column is-mobile-12 is-2"},tl={class:"column is-mobile-12 is-2"},sl={class:"column is-mobile-12 is-2"},al={class:"column is-mobile-12 is-6"},ol={class:"column is-mobile-12 is-12"},il={class:"column is-12"},nl={class:"column is-3"},rl=n(()=>e("label",null,[d(" ຮູບເເບບ ບໍລິການ "),e("span",{class:"text-red-500"}," *")],-1)),dl={class:"column is-3"},cl=n(()=>e("label",null,[d(" ລາຄາ "),e("span",{class:"text-red-500"}," *")],-1)),pl={class:"column is-5"},ul=n(()=>e("label",null," ລາຍລະອຽດ ",-1)),ml=["onUpdate:modelValue"],hl={class:"column is-1"},_l=["onClick"],fl=n(()=>e("i",{class:"pi pi-times-circle"},null,-1)),yl=[fl],vl={class:"column is-12"},gl={class:"column is-mobile-12 is-12"},bl=n(()=>e("label",null,[d(" ເລືອກໂປຮໄຟລ "),e("span",{class:"text-red-500"}," *")],-1)),wl={key:0},Vl={key:1,style:{color:"#029217"}},Il={class:"column is-mobile-12 is-12"},xl=n(()=>e("label",null,[d(" ເລືອກເເກເລີເລີ່ "),e("span",{class:"text-red-500"}," *")],-1)),Sl={key:0},kl={key:1,style:{color:"#029217"}},Cl={class:"column is-mobile-12 is-12 text-right"},Ml=n(()=>e("i",{class:"pi pi-save",style:{"margin-right":"8px"}},null,-1)),Nl=T({__name:"AddHouse",setup(f){const _=pe(),y=ue(),I=me(),{form:l,state:c,register:k}=Oe(),{getOne:B,realestateType:C}=Ne(),{getAll:Y,state:M,setStateFilter:G}=Fe(),{getAll:L,state:N,setStateFilter:x}=je(),v=h(null),g=h(),Q=async()=>{I.push({name:"owner.house"})},E=()=>{document.getElementById("fileInput").click()},q=async o=>{var p;const t=(p=o.target.files)==null?void 0:p[0];t&&(v.value="ກຳລັງອັບໂຫຼດໂປຮໄຟລເຂົ້າລະບົບ ກະລຸນາລໍຖ້າ",await oe(t),v.value="ອັບໂຫຼດສຳເລັດເເລ້ວ.")},P=()=>{document.getElementById("galleryInput").click()},R=async o=>{const t=o.target.files;t&&(g.value="ກຳລັງອັບໂຫຼດ "+t.length+" ໄຟລເຂົ້າລະບົບ ກະລຸນາລໍຖ້າ...",await ie(t),g.value="ອັບໂຫຼດສຳເລັດເເລ້ວ "+t.length+" ໄຟລ.")},b=h([{price:"",unit_price:"",detail:""}]),X=async()=>{b.value&&b.value.push({price:"",unit_price:"",detail:""})},Z=async o=>{b.value&&b.value.splice(o,1)},{handleSubmit:H}=Ce({validationSchema:Se}),W=h([{id:"sale",name:"ຂາຍ"},{id:"rent",name:"ເຊົ່າ"}]),K=h([{id:"air",name:"ເເອ"},{id:"fan",name:"ພັດລົມ"},{id:"no",name:"ບໍ່ມີ"}]),ee=h([{id:"day",name:"ມື້"},{id:"month",name:"ເດືອນ"},{id:"year",name:"ປີ"}]),O=h(),F=h();he(async()=>{await le()});const le=async()=>{l.room_type="air",l.service_model="sale",G.limit=1e3,await Y(),await B(),l.real_estate_type_id=C.props.length>0?C.props[0].id:void 0,l.province_id=M.data.props.length>0?M.data.props[0].id:void 0,x.filter&&(x.filter.province_id=l.province_id,await L(),await D())},te=async o=>{x.filter&&(x.filter.province_id=o,await L(),await D())},D=async()=>{l.district_id=N.data.props.length>0?N.data.props[0].id:void 0},se=H(async o=>{l.village=o.village,l.zip_code=o.zipcode,l.wide=o.wide,l.long=o.long,l.remark=o.remark,l.location=o.location,l.prices=b.value,l.image=F.value,l.gallery=O.value,await k(),c.error?await ne():await re()}),ae=async()=>{v.value="",g.value="",F.value="",O.value="";const o=document.getElementById("fileInput");o.value="";const a=document.getElementById("galleryInput");a.value=""},oe=async o=>{var a;c.btnLoading=!0;try{let t=new FormData;t.append("file",o);const p=await U.post("http://206.189.190.47/api/upload_file",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vMjA2LjE4OS4xOTAuNDcvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3MDc0ODQ1NDgsIm5iZiI6MTcwNzQ4NDU0OCwianRpIjoidEtMRnEyczNVaFVJUHhjdSIsInN1YiI6IjkiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.ljoD1A9QkJnBPCmt7TxZj-6n7n5gQojgszX-INFPi-o"}});F.value=(a=p.data)==null?void 0:a.filename,c.btnLoading=!1}catch(t){console.error("Upload failed:",t)}},ie=async o=>{c.btnLoading=!0;try{let a=new FormData;for(let r=0;r<o.length;r++)a.append("files[]",o[r]);const p=(await U.post("http://206.189.190.47/api/upload/multiple/files",a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vMjA2LjE4OS4xOTAuNDcvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3MDc0ODQ1NDgsIm5iZiI6MTcwNzQ4NDU0OCwianRpIjoidEtMRnEyczNVaFVJUHhjdSIsInN1YiI6IjkiLCJwcnYiOiIyM2JkNWM4OTQ5ZjYwMGFkYjM5ZTcwMWM0MDA4NzJkYjdhNTk3NmY3In0.ljoD1A9QkJnBPCmt7TxZj-6n7n5gQojgszX-INFPi-o"}})).data.filename.map(r=>({image:`${r}`}));O.value=p,c.btnLoading=!1}catch(a){console.error("Upload failed:",a)}},ne=()=>{_.add({severity:"error",summary:"ເກີດຂໍ້ຜິດພາດ.",detail:`${c.error}`,life:3e3})},re=async()=>{y.require({message:"ທ່ານຕ້ອງການສຳເນົາຂໍ້ມູນບໍ?",header:"ຢືນຢັນເພື່ອທຳການສຳເນົາຂໍ້ມູນ",acceptLabel:"ຕ້ອງການ",rejectLabel:"ບໍ່ຕ້ອງການ",rejectClass:"p-button-danger",acceptClass:"p-button-info",accept:async()=>{await ae(),_.add({severity:"success",summary:"ໄດ້ທຳການສຳເນົາຂໍ້ມູນເເລ້ວ.",detail:"ສຳເນົາຂໍ້ມູນສຳເລັດ.",life:3e3})},reject:async()=>{window.location.reload(),_.add({severity:"error",summary:"ບໍ່ຕ້ອງການສຳເນົາຂໍ້ມູນ.",detail:"ຖືກຍົກເລີກການສຳເນົາເເລ້ວ.",life:3e3})}})};return(o,a)=>(u(),m("div",Ue,[e("div",Te,[e("span",$e,[e("h2",{style:{"font-weight":"bold","font-size":"20px"},class:"arrow-left",onClick:a[0]||(a[0]=t=>Q())},[Be,d(" ຟອມລົງທະບຽນຂໍ້ມູນ ")])])]),Ye,i(s(A)),e("form",{onSubmit:a[7]||(a[7]=_e(t=>s(se)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[e("div",Ge,[e("div",Qe,[Ee,i(s(w),{name:"real_estate_type",style:{"margin-top":"8px"},modelValue:s(l).real_estate_type_id,"onUpdate:modelValue":a[1]||(a[1]=t=>s(l).real_estate_type_id=t),options:s(C).props,optionLabel:"name",placeholder:"ກະລຸນາເລືອກກ່ອນ...",class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options"])]),e("div",qe,[Pe,i(s(w),{style:{"margin-top":"8px"},modelValue:s(l).service_model,"onUpdate:modelValue":a[2]||(a[2]=t=>s(l).service_model=t),options:W.value,optionLabel:"name",placeholder:"Select a City",optionValue:"id",highlightOnSelect:!0,class:"w-full"},null,8,["modelValue","options"])]),e("div",Re,[Xe,i(s(w),{style:{"margin-top":"8px"},modelValue:s(l).room_type,"onUpdate:modelValue":a[3]||(a[3]=t=>s(l).room_type=t),options:K.value,optionLabel:"name",placeholder:"Select a City",class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options"])]),e("div",Ze,[He,i(s(w),{style:{"margin-top":"8px"},modelValue:s(l).province_id,"onUpdate:modelValue":a[4]||(a[4]=t=>s(l).province_id=t),options:s(M).data.props,optionLabel:"name",placeholder:"ກະລຸນາເລືອກກ່ອນ...",class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:a[5]||(a[5]=t=>te(s(l).province_id))},null,8,["modelValue","options"])]),e("div",We,[Ke,i(s(w),{style:{"margin-top":"8px"},modelValue:s(l).district_id,"onUpdate:modelValue":a[6]||(a[6]=t=>s(l).district_id=t),options:s(N).data.props,optionLabel:"name",placeholder:"Select a City",class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:""},null,8,["modelValue","options"])]),e("div",el,[i(V,{name:"village",label:"ບ້ານ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",ll,[i(V,{name:"zipcode",label:"zipcode",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",tl,[i(V,{name:"wide",label:"ລວງກວ້າງ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",sl,[i(V,{name:"long",label:"ລວງຍາວ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",al,[i(V,{name:"location",label:"ລີ້ງເເຜນທີ່",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",ol,[i(ze,{name:"remark",label:"ລາຍລະອຽດ",required:"",placeholder:"ກະລຸນາປ້ອນກ່ອນ...",class:"h-full"})]),e("div",il,[i(s(z),{header:"ຕັ້ງຄ່າລາຄາ ຊື້ຂາຍ - ເຊົ່າ"},{default:j(()=>[(u(!0),m(ve,null,ge(b.value,(t,p)=>(u(),m("div",{class:"columns is-12",key:p},[e("div",nl,[rl,i(s(w),{modelValue:t.unit_price,"onUpdate:modelValue":r=>t.unit_price=r,options:ee.value,optionLabel:"name",placeholder:"ກະລຸນາເລືອກກ່ອນ...",class:"w-full",optionValue:"id",highlightOnSelect:!0,required:""},null,8,["modelValue","onUpdate:modelValue","options"])]),e("div",dl,[cl,i(s(Me),{modelValue:t.price,"onUpdate:modelValue":r=>t.price=r,placeholder:"ກະລຸນາປ້ອນກ່ອນ...",required:"",style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'",width:"100% !important"}},null,8,["modelValue","onUpdate:modelValue"])]),e("div",pl,[ul,be(e("input",{name:"detail",type:"text",class:"input","onUpdate:modelValue":r=>t.detail=r,placeholder:"ກະລຸນາປ້ອນກ່ອນ...",required:"",style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'"}},null,8,ml),[[we,t.detail]])]),e("div",hl,[p>0?(u(),m("a",{key:0,onClick:r=>Z(p),class:"button is-danger remove-btn",style:{"margin-top":"22px"}},yl,8,_l)):$("",!0)])]))),128)),e("div",{class:"column is-mobile-12 is-12"},[e("a",{onClick:X,class:"button is-primary"},"ເພີ່ມລາຍການ")])]),_:1})]),e("div",vl,[i(s(z),{header:"ເລືອກໂປຮໄຟລ ເເລະ ເເກເລີລີ່"},{default:j(()=>[e("div",gl,[bl,e("label",{class:"upload-box",onClick:E,style:J({border:v.value?"1px dashed #029217":"1px dashed red"})},[v.value?(u(),m("div",Vl,S(v.value),1)):(u(),m("div",wl," ກະລຸນາເລືອກໄຟລກ່ອນ... "))],4),e("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:q},null,32)]),i(s(A)),e("div",Il,[xl,e("label",{class:"upload-box",onClick:P,style:J({border:g.value?"1px dashed #029217":"1px dashed red"})},[g.value?(u(),m("div",kl,S(g.value),1)):(u(),m("div",Sl," ກະລຸນາເລືອກໄຟລກ່ອນ... "))],4),e("input",{type:"file",id:"galleryInput",multiple:"",style:{display:"none"},onChange:R},null,32)])]),_:1})]),e("div",Cl,[i(s(Ve),{style:{"font-family":"'NotoSansLao','Montserrat', 'sans-serif'"},type:"submit",severity:"info",loading:s(c).btnLoading},{default:j(()=>[Ml,d(" ບັນທຶກ ຂໍ້ມູນ ")]),_:1},8,["loading"])])])],32)]))}}),El=Ie(Nl,[["__scopeId","data-v-1290ae12"]]);export{El as default};
