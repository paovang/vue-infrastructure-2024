import{d as E,a as G,C as W,A as U,G as J,N as y,c as Q,b as l,q as s,e,z as w,o as X,O as V,V as C,P as d,t as Y}from"./index-Sl6PM5O6.js";import{s as r,a as Z}from"./column.esm-XXRlkZ3-.js";import{s as P}from"./inputtext.esm-hhLXkBq1.js";import{s as f}from"./dropdown.esm-Ji1myWR2.js";import{h as ee}from"./house.store-AO-oLQIp.js";import{r as te}from"./real-estate-service.store-eKfWJH6m.js";import{p as le}from"./province.store-GmTycb1W.js";import{d as ie}from"./district.store-llFOKfV2.js";import"./index.esm-12t1XH7X.js";import"./index.esm-4CvvZijH.js";import"./index.esm-6lqXJeiJ.js";import"./axios-pISyRcLn.js";import"./axios.config-bZXeKyPI.js";const oe={class:"card"},ae={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},se=l("span",{class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},[l("h2",{class:"mb-3"}," ລາຍການ ຂໍ້ມູນທັງໝົດ ")],-1),ne={class:"w-full sm:w-auto flex-order-0 sm:flex-order-1 mb-4 sm:mb-0"},re={class:"col-12 md:col-12 flex flex-row"},de={class:"col-12 md:col-3"},pe=l("label",null,[d(" ປະເພດ ບໍລິການ "),l("span",{class:"text-red-500"}," *")],-1),ce={class:"col-12 md:col-3"},me=l("label",null,[d(" ຮູບເເບບ ບໍລິການ "),l("span",{class:"text-red-500"}," *")],-1),ue={class:"col-12 md:col-3"},fe=l("label",null,[d(" ປະເພດຫ້ອງ "),l("span",{class:"text-red-500"}," *")],-1),_e={class:"col-12 md:col-3"},ge=l("label",null,[d(" ເເຂວງ "),l("span",{class:"text-red-500"}," *")],-1),he={class:"col-12 md:col-12 flex flex-row"},ve={class:"col-12 md:col-3"},ye=l("label",null,[d(" ເມືອງ "),l("span",{class:"text-red-500"}," *")],-1),we={class:"col-12 md:col-3"},Ve=l("label",null,[d(" ບ້ານ "),l("span",{class:"text-red-500"}," *")],-1),be={class:"col-12 md:col-3"},xe=l("label",null,[d(" ລວງກ້ວາງ "),l("span",{class:"text-red-500"}," *")],-1),Se={class:"col-12 md:col-3"},Ce=l("label",null,[d(" ລວງຍາວ "),l("span",{class:"text-red-500"}," *")],-1),Pe={class:"flex flex-wrap gap-2 btn-right"},Ke=E({__name:"ListHouse",setup(Le){const _=G(),{query:c}=W(),{form:i,getAll:m,state:b,setStateFilter:t}=ee(),{getOne:$,realestateType:g}=te(),{getAll:D,state:h,setStateFilter:F}=le(),{getAll:L,state:u,setStateFilter:v}=ie(),T=U([{id:"all",name:"ທັງໝົດ"},{id:"sale",name:"ຂາຍ"},{id:"rent",name:"ເຊົ່າ"}]),q=U([{id:"all",name:"ທັງໝົດ"},{id:"air",name:"ເເອ"},{id:"fan",name:"ພັດລົມ"},{id:"no",name:"ບໍ່ມີ"}]);async function z(){Object.keys(c).length!==0&&(t.page=c.page?Number(c.page):1,t.limit=c.limit?Number(c.limit):10,_.push({query:{page:t.page,limit:t.limit}})),await H()}J(async()=>{await z()});const B=async n=>{_.push({name:"owner.edit.house",params:{id:n}})};async function K(n){t.page=n.page+1,t.limit=n.rows;const{page:o,limit:a}=t;_.push({name:"owner.house",query:{page:o,limit:a}}),await m()}const M=y(()=>{let n=0;return t.page&&t.limit&&(n=(t.page-1)*t.limit),n}),p=async()=>{t.filter&&(t.filter.real_estate_type_id=i.real_estate_type_id==="all"?"":i.real_estate_type_id,t.filter.service_model=i.service_model==="all"?"":i.service_model,t.filter.room_type=i.room_type==="all"?"":i.room_type,t.filter.district_id=i.district_id==="all"?"":i.district_id),await m()};async function x(n){var a,S,A;const o=n.target.name;n.target.value===""&&(o==="village"&&((a=t.filter)==null?void 0:a.village)!==void 0&&(t.filter.village=""),o==="wide"&&((S=t.filter)==null?void 0:S.wide)!==void 0&&(t.filter.wide=""),o==="long"&&((A=t.filter)==null?void 0:A.long)!==void 0&&(t.filter.long=""),await m())}const k=y({get:()=>t.filter.village||"",set:n=>{t.filter&&(t.filter.village=n)}}),N=y({get:()=>t.filter.wide||"",set:n=>{t.filter&&(t.filter.wide=n)}}),O=y({get:()=>t.filter.long||"",set:n=>{t.filter&&(t.filter.long=n)}}),H=async()=>{await m(),await $(),g.props.unshift({id:"all",name:"ທັງໝົດ"}),i.room_type="all",i.service_model="all",F.limit=1e3,await D(),h.data.props.unshift({id:"all",name:"ທັງໝົດ"}),i.real_estate_type_id=g.props.length>0?g.props[0].id:void 0,i.province_id=h.data.props.length>0?h.data.props[0].id:void 0,v.filter&&(v.filter.province_id=i.province_id,await L(),u.data.props.unshift({id:"all",name:"ທັງໝົດ"}),await R())},R=async()=>{i.district_id=u.data.props.length>0?u.data.props[0].id:void 0},I=async n=>{v.filter&&(v.filter.province_id=n,await L(),u.data.props.unshift({id:"all",name:"ທັງໝົດ"}),await R(),t.filter&&(t.filter.district_id=i.district_id==="all"?"":i.district_id,t.filter.province_id=i.province_id==="all"?"":i.province_id),await m())},j=async()=>{_.push({name:"owner.add.house"})};return(n,o)=>(X(),Q("div",oe,[l("div",ae,[se,l("span",ne,[s(e(V),{icon:"pi pi-plus-circle",rounded:"",severity:"info",onClick:o[0]||(o[0]=a=>j())})])]),s(e(Z),{value:e(b).data.props,onPage:K,paginator:"",first:M.value,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",loading:e(b).isLoading,lazy:"",totalRecords:e(b).data.total,rows:e(t).limit,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"ສະແດງ {first} ຫາ {last} ຈາກ {totalRecords} ແຖວ"},{header:w(()=>[l("div",re,[l("div",de,[pe,s(e(f),{name:"real_estate_type",modelValue:e(i).real_estate_type_id,"onUpdate:modelValue":o[1]||(o[1]=a=>e(i).real_estate_type_id=a),options:e(g).props,optionLabel:"name",placeholder:"ກະລຸນາເລືອກກ່ອນ...",class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:p},null,8,["modelValue","options"])]),l("div",ce,[me,s(e(f),{modelValue:e(i).service_model,"onUpdate:modelValue":o[2]||(o[2]=a=>e(i).service_model=a),options:T.value,optionLabel:"name",placeholder:"Select a City",optionValue:"id",highlightOnSelect:!0,class:"w-full",onChange:p},null,8,["modelValue","options"])]),l("div",ue,[fe,s(e(f),{modelValue:e(i).room_type,"onUpdate:modelValue":o[3]||(o[3]=a=>e(i).room_type=a),options:q.value,optionLabel:"name",placeholder:"Select a City",class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:p},null,8,["modelValue","options"])]),l("div",_e,[ge,s(e(f),{modelValue:e(i).province_id,"onUpdate:modelValue":o[4]||(o[4]=a=>e(i).province_id=a),options:e(h).data.props,optionLabel:"name",placeholder:"ກະລຸນາເລືອກກ່ອນ...",class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:o[5]||(o[5]=a=>I(e(i).province_id))},null,8,["modelValue","options"])])]),l("div",he,[l("div",ve,[ye,s(e(f),{modelValue:e(i).district_id,"onUpdate:modelValue":o[6]||(o[6]=a=>e(i).district_id=a),options:e(u).data.props,optionLabel:"name",placeholder:"Select a City",class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:p},null,8,["modelValue","options"])]),l("div",we,[Ve,s(e(P),{modelValue:k.value,"onUpdate:modelValue":o[7]||(o[7]=a=>k.value=a),placeholder:"ຄົ້ນຫາ ດ້ວຍເບີໂທລະສັບ...",style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"village",onKeyup:C(p,["enter"]),onInput:x},null,8,["modelValue"])]),l("div",be,[xe,s(e(P),{modelValue:N.value,"onUpdate:modelValue":o[8]||(o[8]=a=>N.value=a),placeholder:"ຄົ້ນຫາ ລວງກ້ວາງ...",style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"wide",onKeyup:C(p,["enter"]),onInput:x},null,8,["modelValue"])]),l("div",Se,[Ce,s(e(P),{modelValue:O.value,"onUpdate:modelValue":o[9]||(o[9]=a=>O.value=a),placeholder:"ຄົ້ນຫາ ລວງກ້ວາງ...",style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"long",onKeyup:C(p,["enter"]),onInput:x},null,8,["modelValue"])])])]),default:w(()=>[s(e(r),{field:"id",header:n.$t("table.header.index")},{body:w(a=>[d(Y(a.index+1),1)]),_:1},8,["header"]),s(e(r),{field:"real_estate_type.name",header:"ປະເພດບໍລິການ"}),s(e(r),{field:"service_model",header:"ຮູບເເບບບໍລິການ"}),s(e(r),{field:"room_type",header:"ປະເພດຫ້ອງ"}),s(e(r),{field:"village",header:"ບ້ານ"}),s(e(r),{field:"district.name",header:"ເມືອງ"}),s(e(r),{field:"district.province.name",header:"ເເຂວງ"}),s(e(r),{field:"zip_code",header:"zip code"}),s(e(r),{field:"wide",header:"ລວງກ້ວາງ"}),s(e(r),{field:"long",header:"ລວງຍາວ"}),s(e(r),{headerStyle:"width: 10rem"},{body:w(({data:a})=>[l("div",Pe,[s(e(V),{type:"button",icon:"pi pi-eye",rounded:"",severity:"success",style:{color:"white"}}),s(e(V),{type:"button",icon:"pi pi-pencil",rounded:"",severity:"warning",style:{color:"white"},onClick:S=>B(a.id)},null,8,["onClick"]),s(e(V),{type:"button",icon:"pi pi-trash",rounded:"",severity:"danger"})])]),_:1})]),_:1},8,["value","first","loading","totalRecords","rows"])]))}});export{Ke as default};
