import{d as k,M as z,u as E,r as g,o as M,e as N,f as s,t as b,y as t,g as u,V as j,p as D,k as L,j as W,U as A,_ as G}from"./index-lHHUaHrB.js";import{_ as d}from"./FormInputText.vue_vue_type_script_setup_true_lang-1RZ3WOlU.js";import{e as H}from"./user.schema-qrokeR8y.js";import{u as J}from"./vee-validate.esm-AoIqEz5p.js";import{_ as y,u as w}from"./upload-file-VNYgLHZe.js";import{v,s as p,i as $}from"./toast-FY7odgkM.js";import{c as I}from"./axios.config-gXfSTYZr.js";import{s as S}from"./divider.esm-JnR7MM4A.js";import{o as K}from"./user.store-uA_DpFXg.js";import"./inputtext.esm-AWs-KwBd.js";import"./index.esm-z9dUg8cd.js";const O=c=>(D("data-v-c0b52594"),c=c(),L(),c),Q={class:"card"},R={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},X={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},Y={style:{"font-weight":"bold","font-size":"20px"},class:"arrow-left"},Z=O(()=>s("br",null,null,-1)),ee={class:"columns is-12 is-multiline"},ae={class:"column is-4 is-mobile-12"},se={class:"column is-4 is-mobile-12"},le={class:"column is-4 is-mobile-12"},te={class:"column is-8 is-mobile-12",style:{"margin-top":"-30px"}},oe={class:"column is-4 is-mobile-12",style:{"margin-top":"-30px"}},re={class:"column is-12 is-mobile-12",style:{"margin-top":"-30px"}},ie={class:"column is-4 is-mobile-12",style:{"margin-top":"-30px"}},ne={class:"column is-8 is-mobile-12",style:{"margin-top":"-30px"}},de={style:{"text-align":"right"}},me=k({__name:"UserProfile",setup(c){const r=z(),{t:a}=E(),{form:o,state:m,getUserProfile:i,getProfile:F,updateProfile:T}=K(),C={name:a("placeholder.inputText"),email:a("placeholder.inputText")},{handleSubmit:x,setFieldValue:n}=J({validationSchema:H(C)}),q=x(async e=>{if(o.customer_id=i.data.props.real_estate_account.id,o.id=i.data.props.id,o.name=e.name,o.owner=e.owner,o.email=e.email,o.id_no=e.id_no,o.tel=e.phone_number,o.address=e.address,o.profile=_.value,o.id_image=f.value,await T(),m.error)await U();else{await V(),f.value="";const l=document.getElementById("id_image");l.value="",_.value="";const h=document.getElementById("profile");h.value="",window.location.reload()}}),f=g(),P=async e=>{const l=e.target.files[0];if(!await v(l)){await p({toast:r,error:"error",summary:a("toast.summary.error"),detail:a("toast.summary.profile_valid_file_mimes")}),e.target.value="";return}if(!await $(l)){await p({toast:r,error:"error",summary:a("toast.summary.error"),detail:a("toast.summary.profile_valid_file_size")}),e.target.value="";return}await w({axios:I,file:l,state:m,selectedImage:f,toast:r,t:a})},_=g(),B=async e=>{const l=e.target.files[0];if(!await v(l)){await p({toast:r,error:"error",summary:a("toast.summary.error"),detail:a("toast.summary.profile_valid_file_mimes")}),e.target.value="";return}if(!await $(l)){await p({toast:r,error:"error",summary:a("toast.summary.error"),detail:a("toast.summary.profile_valid_file_size")}),e.target.value="";return}await w({axios:I,file:l,state:m,selectedImage:_,toast:r,t:a})},U=()=>{r.add({severity:"error",summary:a("toast.summary.error"),detail:`${m.error}`,life:3e3})},V=()=>{r.add({severity:"success",summary:a("toast.summary.success"),detail:a("toast.detail.successfully"),life:3e3})};return M(async()=>{await F(),n("name",i.data.props.name),n("owner",i.data.props.real_estate_account.owner),n("phone_number",i.data.props.real_estate_account.tel),n("id_no",i.data.props.real_estate_account.id_no),n("address",i.data.props.real_estate_account.address),n("email",i.data.props.email)}),(e,l)=>(W(),N("div",Q,[s("div",R,[s("span",X,[s("h2",Y,b(e.$t("messages.update"))+" "+b(e.$t("messages.profile")),1)])]),t(u(S)),Z,s("form",{onSubmit:l[0]||(l[0]=j(h=>u(q)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[s("div",ee,[s("div",ae,[t(d,{ref:"autoFocusCursor",name:"name",label:e.$t("messages.name"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",se,[t(d,{ref:"autoFocusCursor",name:"owner",label:e.$t("messages.owner"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",le,[t(d,{ref:"autoFocusCursor",name:"phone_number",label:e.$t("messages.phone_number"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",te,[t(d,{ref:"autoFocusCursor",name:"address",label:e.$t("messages.address"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",oe,[t(d,{ref:"autoFocusCursor",name:"id_no",label:e.$t("messages.id_no"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",re,[t(y,{name:"id_image",label:e.$t("messages.id_image"),required:"",multiple:!0,class:"h-full",onChange:P},null,8,["label"])]),s("div",ie,[t(d,{ref:"autoFocusCursor",name:"email",label:e.$t("messages.email"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",ne,[t(y,{name:"profile",label:e.$t("messages.profile"),required:"",multiple:!0,class:"h-full",onChange:B},null,8,["label"])])]),t(u(S),{style:{"margin-top":"-20px"}}),s("div",de,[t(u(A),{type:"submit",label:e.$t("button.edit_data"),loading:u(m).btnLoading},null,8,["label","loading"])])],32)]))}}),$e=G(me,[["__scopeId","data-v-c0b52594"]]);export{$e as default};
