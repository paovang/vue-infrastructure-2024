import{o as C}from"./user.store-aAx8PSI4.js";import{s as k}from"./divider.esm-TrotuOrR.js";import{d as D,u as N,N as T,O as U,a as I,Q as j,o as O,e as A,f as d,t as l,j as r,g as e,H as o,p as x,m as z,l as B,b as u,s as h,L as p,_ as V}from"./index-KL3xvF6D.js";import{s as n,a as W}from"./column.esm-_92BZGil.js";import{b as F}from"./concat-ZmUf8qUH.js";import{s as M}from"./image.esm-k-tfHqOq.js";import{v as f}from"./validation-permissions-vw0R_PfT.js";import"./axios.config-8JNuCx_V.js";import"./paginator.esm-ktArnFrp.js";import"./dropdown.esm-v7c-N6Ss.js";import"./overlayeventbus.esm-Zcyzvdx1.js";import"./inputnumber.esm-BH7JPXfo.js";import"./inputtext.esm-8ijfGwbA.js";import"./index.esm-mCXKwRL5.js";import"./checkbox.esm-zkiZlzCV.js";import"./index.esm-KGYvOMG6.js";import"./format.currency-CcPyHQva.js";import"./index.esm-Ag2ySuPE.js";const q=c=>(x("data-v-009492e8"),c=c(),z(),c),G={class:"card"},H={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},Q={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},J={class:"mb-3"},K=q(()=>d("br",null,null,-1)),X={class:"flex flex-wrap gap-2"},Y=D({__name:"ListUsers",setup(c){const{t:s}=N(),b=T(),w=U(),{remove:_,getAll:$,state:m,setStateFilter:i}=C(),y=I(),v=async t=>{y.push({name:"owner.edit.user",params:{id:t}})},P=async()=>{y.push({name:"owner.add.user"})},S=j(()=>{let t=0;return i.page&&i.limit&&(t=(i.page-1)*i.limit),t});async function R(t){i.page=t.page+1,i.limit=t.rows,await g()}const E=async t=>{w.require({message:s("confirmDelete.message"),header:s("confirmDelete.header"),rejectLabel:s("confirmDelete.rejectLabel"),acceptLabel:s("confirmDelete.acceptLabel"),rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{await _(t),b.add({severity:"success",summary:s("toast.summary.delete"),detail:s("toast.detail.delete"),life:3e3})},reject:()=>{b.add({severity:"error",summary:s("toast.summary.cancel_delete"),detail:s("toast.detail.cancel_delete"),life:3e3})}})};O(async()=>{await g()});const g=async()=>{await $()};return(t,Z)=>(B(),A("div",G,[d("div",H,[d("span",Q,[d("h2",J,l(t.$t("table.title.user")),1)]),d("span",null,[r(e(h),{label:t.$t("button.add"),severity:"info",onClick:P,disabled:e(f)(e(u).OWNER_USER.CREATE)},null,8,["label","disabled"])])]),r(e(k)),K,r(e(W),{value:e(m).data.props,paginator:"",rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",loading:e(m).isLoading,lazy:"",totalRecords:e(m).data.total,onPage:R,first:S.value,scrollable:"",rows:e(i).limit,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:`${t.$t("table.pagination.show")} {first} ${t.$t("table.pagination.to")} {last} ${t.$t("table.pagination.from")} {totalRecords} ${t.$t("table.pagination.row")}`},{default:o(()=>[r(e(n),{field:"id",header:t.$t("table.header.index")},{body:o(a=>[p(l(a.index+1),1)]),_:1},8,["header"]),r(e(n),{headerStyle:"min-width: 8rem",frozen:""},{body:o(({data:a})=>[d("div",X,[r(e(h),{type:"button",icon:"pi pi-pencil",rounded:"",severity:"warning",style:{color:"white"},onClick:L=>v(a.id),disabled:e(f)(e(u).OWNER_USER.UPDATE)},null,8,["onClick","disabled"]),r(e(h),{type:"button",icon:"pi pi-trash",rounded:"",severity:"danger",style:{color:"white"},onClick:L=>E(a.id),disabled:e(f)(e(u).OWNER_USER.DELETE)},null,8,["onClick","disabled"])])]),_:1}),r(e(n),{field:"profile",header:t.$t("table.header.profile"),headerStyle:"min-width: 8rem",frozen:""},{body:o(({data:a})=>[r(e(M),{src:a.profile,alt:"Image",preview:"",style:{"max-width":"80px"}},null,8,["src"])]),_:1},8,["header"]),r(e(n),{header:t.$t("table.header.name"),headerStyle:"min-width: 10rem"},{body:o(({data:a})=>[p(l(a.name),1)]),_:1},8,["header"]),r(e(n),{header:t.$t("table.header.email"),headerStyle:"min-width: 3rem"},{body:o(({data:a})=>[p(l(a.email),1)]),_:1},8,["header"]),r(e(n),{header:t.$t("table.header.role"),headerStyle:"min-width: 8rem"},{body:o(({data:a})=>[p(l(a.role.name),1)]),_:1},8,["header"]),r(e(n),{header:t.$t("table.header.permission"),headerStyle:"min-width: 20rem"},{body:o(({data:a})=>[p(l(e(F)(a.permissions)),1)]),_:1},8,["header"])]),_:1},8,["value","loading","totalRecords","first","rows","currentPageReportTemplate"])]))}}),ge=V(Y,[["__scopeId","data-v-009492e8"]]);export{ge as default};
