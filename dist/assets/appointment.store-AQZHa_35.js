import{W as j,X as f}from"./index-bxbWylSu.js";import{i as u,b as c,A as b,c as y}from"./axios.config-EMV3l8KB.js";var A=Object.defineProperty,x=Object.getOwnPropertyDescriptor,D=(e,t,s,r)=>{for(var a=r>1?void 0:r?x(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&A(t,s,a),a},L=(e,t)=>(s,r)=>t(s,r,e);let l=class{constructor(e){this._api=e}async update(e){return{data:(await this._api.axios({method:"post",url:`/owner/customer/not/rent/buy/${e.id}`,data:{reason:e.reason}})).data,message:"ອັບເດດ ຂໍ້ມູນສຳເລັດເເລ້ວ",status:"success"}}async delete(e){return{data:(await this._api.axios({method:"delete",url:`/owner/reserve/list/${e}`})).data,message:"ລຶບຂໍ້ມູນ ສຳເລັດເເລ້ວ.",status:"success"}}async getAll(e){var a,n,o;const t=await this._api.axios({url:"/owner/reserve/list",params:{page:e.page,per_page:e.limit,status:(a=e.filter)==null?void 0:a.status,date_appointment:(n=e.filter)==null?void 0:n.date_appointment,lang:localStorage.getItem("locale"),search:(o=e.filter)==null?void 0:o.name}}),{data:s,pagination:r}=t.data.data;return{data:{props:s,total:r.total},status:"success"}}async getOne(e){return(await this._api.axios({method:"get",url:"/owner/reserve/list/"+e})).data}};l=D([u(),L(0,c(b))],l);var C=Object.defineProperty,S=Object.getOwnPropertyDescriptor,U=(e,t,s,r)=>{for(var a=r>1?void 0:r?S(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&C(t,s,a),a},G=(e,t)=>(s,r)=>t(s,r,e);let v=class{constructor(e){this._api=e}async execute(e){try{return await this._api.getAll(e)}catch(t){t.response.status===422&&Object.keys(t.response.data.errors).map(s=>`${s}: ${t.response.data.errors[s].join(", ")}`).join("; ")}}};v=U([u(),G(0,c(l))],v);var E=Object.defineProperty,B=Object.getOwnPropertyDescriptor,F=(e,t,s,r)=>{for(var a=r>1?void 0:r?B(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&E(t,s,a),a},H=(e,t)=>(s,r)=>t(s,r,e);let m=class{constructor(e){this._api=e}async execute(e){return await this._api.getOne(e)}};m=F([u(),H(0,c(l))],m);var I=Object.defineProperty,R=Object.getOwnPropertyDescriptor,W=(e,t,s,r)=>{for(var a=r>1?void 0:r?R(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&I(t,s,a),a},X=(e,t)=>(s,r)=>t(s,r,e);let g=class{constructor(e){this._api=e}async execute(e){return await this._api.update(e)}};g=W([u(),X(0,c(l))],g);var q=Object.defineProperty,z=Object.getOwnPropertyDescriptor,J=(e,t,s,r)=>{for(var a=r>1?void 0:r?z(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&q(t,s,a),a},K=(e,t)=>(s,r)=>t(s,r,e);let O=class{constructor(e){this._api=e}async execute(e){return await this._api.delete(e)}};O=J([u(),K(0,c(l))],O);var M=Object.defineProperty,N=Object.getOwnPropertyDescriptor,Q=(e,t,s,r)=>{for(var a=r>1?void 0:r?N(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(a=(r?o(t,s,a):o(a))||a);return r&&a&&M(t,s,a),a},d=(e,t)=>(s,r)=>t(s,r,e);let h=class{constructor(e,t,s,r){this._getAll=e,this._getOne=t,this._update=s,this._delete=r}async update(e){return await this._update.execute(e)}async delete(e){return await this._delete.execute(e)}async getAll(e){return await this._getAll.execute(e)}async getOne(e){return await this._getOne.execute(e)}};h=Q([u(),d(0,c(v)),d(1,c(m)),d(2,c(g)),d(3,c(O))],h);const Y=j("owner-appointment-store",()=>{const e=y.resolve(h),t=f({data:{props:[],total:0},isLoading:!1,btnLoading:!1,error:""}),s=f({page:1,limit:10,filter:{status:"",date_appointment:"",name:""}}),r=f({data:{props:""}}),a=f({});async function n(){t.isLoading=!0;const i=await e.getAll({page:s.page,limit:s.limit,filter:s.filter});i&&i.data&&i.status==="success"&&(t.data.props=i.data.props,t.data.total=i.data.total,t.isLoading=!1)}async function o(i){const p=await e.getOne(i);p&&p.data&&p.message==="success"&&(r.data.props=p.data)}async function P(){t.isLoading=!0,t.btnLoading=!0;try{await e.update(a),t.error="",a.id="",a.reason=""}catch(i){let p="";i.response.status===422?(t.isLoading=!1,t.btnLoading=!1,p=Object.keys(i.response.data.errors).map(_=>`${_}: ${i.response.data.errors[_].join(", ")}`).join("; "),t.error=p):t.error=i.message}t.isLoading=!1,t.btnLoading=!1}async function $(i){t.isLoading=!0;try{await e.delete(i),t.error=""}catch(p){let _="";p.response.status===422&&(_=Object.keys(p.response.data.errors).map(w=>`${w}: ${p.response.data.errors[w].join(", ")}`).join("; ")),t.error=_}t.isLoading=!1}return{state:t,setStateFilter:s,form:a,getAll:n,getOne:o,update:P,remove:$}});export{Y as a};
