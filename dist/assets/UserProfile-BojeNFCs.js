import{d as k,K as z,u as E,r as g,o as M,e as N,f as s,t as b,y as o,g as m,Q as j,p as D,k as K,j as L,P as Q,_ as W}from"./index-uqBXdS39.js";import{_ as u}from"./FormInputText.vue_vue_type_script_setup_true_lang-5jFlXIuC.js";import{e as A}from"./user.schema-nldsI0HI.js";import{u as G}from"./vee-validate.esm-VlW1-UEv.js";import{_ as y,u as w}from"./upload-file-rGNB_qpX.js";import{v,s as p,i as $}from"./toast-FY7odgkM.js";import{a as I}from"./axios.config-jCy-uYyV.js";import{s as S}from"./divider.esm-rV9DA5G9.js";import{o as H}from"./user.store-NnWjtw_9.js";import"./inputtext.esm-twR6gMiV.js";import"./index.esm-kSbJyZlc.js";const J=c=>(D("data-v-b373d5e9"),c=c(),K(),c),O={class:"card"},R={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},X={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},Y={style:{"font-weight":"bold","font-size":"20px"},class:"arrow-left"},Z=J(()=>s("br",null,null,-1)),ee={class:"columns is-12 is-multiline"},ae={class:"column is-3 is-mobile-12"},se={class:"column is-3 is-mobile-12"},te={class:"column is-6 is-mobile-12"},le={class:"column is-12 is-mobile-12",style:{"margin-top":"-30px"}},oe={class:"column is-12 is-mobile-12",style:{"margin-top":"-30px"}},re={class:"column is-4 is-mobile-12",style:{"margin-top":"-30px"}},ie={class:"column is-8 is-mobile-12",style:{"margin-top":"-30px"}},ne={style:{"text-align":"right"}},de=k({__name:"UserProfile",setup(c){const r=z(),{t:a}=E(),{form:l,state:d,getUserProfile:i,getProfile:F,updateProfile:T}=H(),C={name:a("placeholder.inputText"),email:a("placeholder.inputText")},{handleSubmit:x,setFieldValue:n}=G({validationSchema:A(C)}),P=x(async e=>{if(l.customer_id=i.data.props.real_estate_account.id,l.id=i.data.props.id,l.name=e.name,l.owner=e.owner,l.email=e.email,l.id_no=e.id_no,l.tel=e.phone_number,l.address=e.address,l.profile=_.value,l.id_image=f.value,await T(),d.error)await U();else{await V(),f.value="";const t=document.getElementById("id_image");t.value="",_.value="";const h=document.getElementById("profile");h.value="",window.location.reload()}}),f=g(),q=async e=>{const t=e.target.files[0];if(!await v(t)){await p({toast:r,error:"error",summary:a("toast.summary.error"),detail:a("toast.summary.profile_valid_file_mimes")}),e.target.value="";return}if(!await $(t)){await p({toast:r,error:"error",summary:a("toast.summary.error"),detail:a("toast.summary.profile_valid_file_size")}),e.target.value="";return}await w({axios:I,file:t,state:d,selectedImage:f,toast:r,t:a})},_=g(),B=async e=>{const t=e.target.files[0];if(!await v(t)){await p({toast:r,error:"error",summary:a("toast.summary.error"),detail:a("toast.summary.profile_valid_file_mimes")}),e.target.value="";return}if(!await $(t)){await p({toast:r,error:"error",summary:a("toast.summary.error"),detail:a("toast.summary.profile_valid_file_size")}),e.target.value="";return}await w({axios:I,file:t,state:d,selectedImage:_,toast:r,t:a})},U=()=>{r.add({severity:"error",summary:a("toast.summary.error"),detail:`${d.error}`,life:3e3})},V=()=>{r.add({severity:"success",summary:a("toast.summary.success"),detail:a("toast.detail.successfully"),life:3e3})};return M(async()=>{await F(),n("name",i.data.props.name),n("owner",i.data.props.real_estate_account.owner),n("phone_number",i.data.props.real_estate_account.tel),n("id_no",i.data.props.real_estate_account.id_no),n("address",i.data.props.real_estate_account.address),n("email",i.data.props.email)}),(e,t)=>(L(),N("div",O,[s("div",R,[s("span",X,[s("h2",Y,b(e.$t("messages.update"))+" "+b(e.$t("messages.profile")),1)])]),o(m(S)),Z,s("form",{onSubmit:t[0]||(t[0]=j(h=>m(P)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[s("div",ee,[s("div",ae,[o(u,{ref:"autoFocusCursor",name:"name",label:e.$t("messages.name"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",se,[o(u,{ref:"autoFocusCursor",name:"phone_number",label:e.$t("messages.phone_number"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",te,[o(u,{ref:"autoFocusCursor",name:"id_no",label:e.$t("messages.id_no"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",le,[o(u,{ref:"autoFocusCursor",name:"address",label:e.$t("messages.address"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",oe,[o(y,{name:"id_image",label:e.$t("messages.id_image"),required:"",multiple:!0,class:"h-full",onChange:q},null,8,["label"])]),s("div",re,[o(u,{ref:"autoFocusCursor",name:"email",label:e.$t("messages.email"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",ie,[o(y,{name:"profile",label:e.$t("messages.profile"),required:"",multiple:!0,class:"h-full",onChange:B},null,8,["label"])])]),o(m(S),{style:{"margin-top":"-20px"}}),s("div",ne,[o(m(Q),{type:"submit",label:e.$t("button.edit_data"),loading:m(d).btnLoading},null,8,["label","loading"])])],32)]))}}),ve=W(de,[["__scopeId","data-v-b373d5e9"]]);export{ve as default};
