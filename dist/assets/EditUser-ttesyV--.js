import{d as O,L as P,u as j,C as D,a as G,A as H,H as Q,c as m,b as s,P as p,t as c,q as l,e as o,F as $,g as I,U as W,p as J,h as K,o as u,Q as X,_ as Y}from"./index-EZFKjDzF.js";import{_ as x}from"./FormInputText.vue_vue_type_script_setup_true_lang-6AKOqbbu.js";import{a as Z}from"./user.store-fnJrA2nC.js";import{s as ss}from"./dropdown.esm-xE656YlK.js";import{s as g}from"./divider.esm-XlMSZdoW.js";import{s as es}from"./checkbox.esm-2OXOyS4f.js";import{u as os}from"./index.esm-F2pqleEd.js";import{e as ts}from"./user.schema-oYHHpGIk.js";import"./inputtext.esm-2ijqj6lm.js";import"./axios.config-0T_DZnyO.js";import"./index.esm-nvEYVhLY.js";const r=f=>(J("data-v-48d237d5"),f=f(),K(),f),as={class:"card"},ls={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},is={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},rs=r(()=>s("i",{class:"pi pi-arrow-left",style:{color:"green"}},null,-1)),ns=r(()=>s("br",null,null,-1)),ds={class:"columns is-12 is-multiline"},ms={class:"column is-4 is-mobile-12"},ps={class:"column is-4 is-mobile-12"},cs={class:"column is-4 is-mobile-12"},us=r(()=>s("span",{class:"text-red-500"}," *",-1)),fs={style:{"font-size":"18px","font-weight":"bold"}},hs=r(()=>s("i",{class:"pi pi-users"},null,-1)),_s=r(()=>s("span",{style:{width:"10px"}},null,-1)),gs={class:"column is-12 is-mobile-12",style:{"font-size":"18px","font-weight":"bold"}},bs=r(()=>s("i",{class:"pi pi-check-circle",style:{color:"green"}},null,-1)),ws={class:"checkbox ml-2"},ys=r(()=>s("br",null,null,-1)),vs={style:{"text-align":"right"}},Ss=O({__name:"EditUser",setup(f){const{form:t,update:V,getAllRole:k,getAllPermission:T,allPermission:U,allRole:B,state:h,getOne:F,userGetByOne:n}=Z(),b=P(),{t:d}=j(),w=D(),C=G(),y=H([]),E={name:d("placeholder.inputText"),email:d("placeholder.inputText")},{handleSubmit:L,setFieldValue:v}=os({validationSchema:ts(E)}),N=L(async e=>{t.id=String(w.params.id),t.name=e.name,t.email=e.email,t.password=e.password,t.password_confirmation=e.password_confirmation,await V(),h.error?await q():await z()});Q(async()=>{const e=Number(w.params.id);await F(e),await k(),await T(),t.roleId=n.data.props.role?n.data.props.role.id:void 0,v("name",n.data.props.name),v("email",n.data.props.email);const a=n.data.props.permissions;a&&(a.forEach(i=>{y.value.push(i.id)}),t.permissionIds=y.value)});const R=async()=>{C.push({name:"admin.user"})},q=()=>{b.add({severity:"error",summary:d("toast.summary.error"),detail:`${h.error}`,life:3e3})},z=()=>{b.add({severity:"success",summary:d("toast.summary.success"),detail:d("toast.detail.successfully"),life:3e3})};return(e,a)=>(u(),m("div",as,[s("div",ls,[s("span",is,[s("h2",{style:{"font-weight":"bold","font-size":"20px"},class:"arrow-left",onClick:R},[rs,p(" "+c(e.$t("messages.form_register")),1)])])]),l(o(g)),ns,s("form",{onSubmit:a[2]||(a[2]=W(i=>o(N)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[s("div",ds,[s("div",ms,[l(x,{ref:"autoFocusCursor",name:"name",label:e.$t("messages.name"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",ps,[l(x,{ref:"autoFocusCursor",name:"email",label:e.$t("messages.email"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",cs,[s("label",null,[p(c(e.$t("messages.role"))+" ",1),us]),l(o(ss),{style:{"margin-top":"7px"},modelValue:o(t).roleId,"onUpdate:modelValue":a[0]||(a[0]=i=>o(t).roleId=i),options:o(B).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options","placeholder"])])]),s("p",fs,[hs,_s,p(" "+c(e.$t("messages.permission")),1)]),l(o(g)),(u(!0),m($,null,I(o(U).data.props,(i,A)=>(u(),m("div",{class:"columns is-12 is-multiline",key:A},[s("div",gs,[bs,p(" "+c(i.name),1)]),(u(!0),m($,null,I(i.permissions,(S,_)=>(u(),m("div",{class:"column is-4 is-mobile-12",key:_},[s("label",ws,[l(o(es),{modelValue:o(t).permissionIds,"onUpdate:modelValue":a[1]||(a[1]=M=>o(t).permissionIds=M),inputId:"permission_"+_,name:"permission_"+_,value:S.id},null,8,["modelValue","inputId","name","value"]),p(" "+c(S.name),1)])]))),128))]))),128)),l(o(g),{style:{"margin-top":"-10px"}}),ys,s("div",vs,[l(o(X),{type:"submit",label:e.$t("button.edit_data"),loading:o(h).btnLoading},null,8,["label","loading"])])],32)]))}}),Ls=Y(Ss,[["__scopeId","data-v-48d237d5"]]);export{Ls as default};
