import{d as L,L as M,u as N,H as P,c as n,b as e,q as a,P as u,t as d,e as o,F as v,g as y,U as R,p as z,h as E,o as c,Q as D,_ as H}from"./index-ndm1OlDi.js";import{_ as h}from"./FormInputText.vue_vue_type_script_setup_true_lang-e2K7XzI3.js";import{a as O,u as Q}from"./user.schema-XA0gghdt.js";import{s as W}from"./dropdown.esm-3WeQXGs6.js";import{s as $}from"./divider.esm-3pp8l8Kj.js";import{s as j}from"./checkbox.esm-BcTJinpf.js";import{u as G}from"./index.esm-ev22Y4M4.js";import"./inputtext.esm-VXiuoGV_.js";import"./axios.config-LVz7g0fw.js";import"./index.esm-kRFg-X8N.js";const m=p=>(z("data-v-7a356d51"),p=p(),E(),p),J={class:"card"},K={class:"columns is-12 is-multiline"},X={class:"column is-4 is-mobile-12"},Y={class:"column is-4 is-mobile-12"},Z={class:"column is-4 is-mobile-12"},ss={class:"column is-4 is-mobile-12"},es={class:"column is-4 is-mobile-12"},os=m(()=>e("span",{class:"text-red-500"}," *",-1)),ls={style:{"font-size":"18px","font-weight":"bold"}},as=m(()=>e("i",{class:"pi pi-users"},null,-1)),ts=m(()=>e("span",{style:{width:"10px"}},null,-1)),is={class:"column is-12 is-mobile-12",style:{"font-size":"18px","font-weight":"bold"}},rs=m(()=>e("i",{class:"pi pi-check-circle",style:{color:"green"}},null,-1)),ns={class:"checkbox ml-2"},ds=m(()=>e("br",null,null,-1)),cs={style:{"text-align":"right"}},ms=L({__name:"AddUser",setup(p){const{form:l,register:S,getAllRole:I,getAllPermission:T,allPermission:V,allRole:f,state:_}=O(),w=M(),{t}=N(),x={name:t("placeholder.inputText"),email:t("placeholder.inputText"),password:t("placeholder.inputText"),password_confirmation:t("placeholder.inputText")},{handleSubmit:k,handleReset:F}=G({validationSchema:Q(x)}),U=k(async s=>{l.name=s.name,l.email=s.email,l.password=s.password,l.password_confirmation=s.password_confirmation,await S(),_.error?await q():(await C(),await F())});P(async()=>{await I(),await T(),l.roleId=f.data.props.length>0?f.data.props[0].id:void 0});const q=()=>{w.add({severity:"error",summary:t("toast.summary.error"),detail:`${_.error}`,life:3e3})},C=()=>{w.add({severity:"success",summary:t("toast.summary.success"),detail:t("toast.detail.successfully"),life:3e3})};return(s,i)=>(c(),n("div",J,[e("form",{onSubmit:i[2]||(i[2]=R(r=>o(U)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[e("div",K,[e("div",X,[a(h,{ref:"autoFocusCursor",name:"name",label:s.$t("messages.name"),required:"",placeholder:s.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),e("div",Y,[a(h,{ref:"autoFocusCursor",name:"email",label:s.$t("messages.email"),required:"",placeholder:s.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),e("div",Z,[a(h,{ref:"autoFocusCursor",name:"password",label:s.$t("messages.password"),required:"",placeholder:s.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),e("div",ss,[a(h,{ref:"autoFocusCursor",name:"password_confirmation",label:s.$t("messages.confirm_password"),required:"",placeholder:s.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),e("div",es,[e("label",null,[u(d(s.$t("messages.role"))+" ",1),os]),a(o(W),{style:{"margin-top":"7px"},modelValue:o(l).roleId,"onUpdate:modelValue":i[0]||(i[0]=r=>o(l).roleId=r),options:o(f).data.props,optionLabel:"name",placeholder:s.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options","placeholder"])])]),e("p",ls,[as,ts,u(" "+d(s.$t("messages.permission")),1)]),a(o($)),(c(!0),n(v,null,y(o(V).data.props,(r,A)=>(c(),n("div",{class:"columns is-12 is-multiline",key:A},[e("div",is,[rs,u(" "+d(r.name),1)]),(c(!0),n(v,null,y(r.permissions,(b,g)=>(c(),n("div",{class:"column is-4 is-mobile-12",key:g},[e("label",ns,[a(o(j),{modelValue:o(l).permissionIds,"onUpdate:modelValue":i[1]||(i[1]=B=>o(l).permissionIds=B),inputId:"permission_"+g,name:"permission_"+g,value:b.id},null,8,["modelValue","inputId","name","value"]),u(" "+d(b.name)+" "+d(b.id),1)])]))),128))]))),128)),a(o($),{style:{"margin-top":"-10px"}}),ds,e("div",cs,[a(o(D),{type:"submit",label:s.$t("button.save_data"),loading:o(_).btnLoading},null,8,["label","loading"])])],32)]))}}),$s=H(ms,[["__scopeId","data-v-7a356d51"]]);export{$s as default};
