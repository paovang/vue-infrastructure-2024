import{d as q,u as z,a as F,H as K,r as L,o as M,N as R,e as H,f as i,t as p,y as r,E as v,g as t,j as G,O as c,U as J}from"./index-yVBRwehP.js";import{s as Q}from"./image.esm-ZL5WUxfw.js";import{s as d,a as W}from"./column.esm-pEkwsmEH.js";import{s as X}from"./inputtext.esm-EDgTkcJ7.js";import{s as u}from"./dropdown.esm-B-FVLpU9.js";import{r as Y}from"./real-estate-service.store-JZuHzYG4.js";import{d as Z}from"./store-P9ZrO_Lb.js";import"./index.esm-KCcGunz1.js";import"./paginator.esm-h8pbGdUW.js";import"./inputnumber.esm-AY9cc-bA.js";import"./overlayeventbus.esm-hZYxRuN4.js";import"./index.esm-HhG15tXQ.js";import"./checkbox.esm-WH5eNHfh.js";import"./index.esm-BIqYEZf7.js";import"./axios.config-jCy-uYyV.js";import"./service-tqvsgP2m.js";import"./format.date--bimoUa2.js";const x={class:"card"},ee={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},te={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},ae={class:"mb-3"},le=i("span",{class:"w-full sm:w-auto flex-order-0 sm:flex-order-1 mb-4 sm:mb-0"},null,-1),ie={class:"col-12 md:col-12 flex flex-row"},re={class:"col-12 md:col-6"},oe=i("span",{class:"text-red-500"}," *",-1),se={class:"col-12 md:col-3"},de=i("span",{class:"text-red-500"}," *",-1),ne={class:"col-12 md:col-3"},pe=i("span",{class:"text-red-500"}," *",-1),me={class:"col-12 md:col-12 flex flex-row"},ce={class:"col-12 md:col-3"},he=i("span",{class:"text-red-500"}," *",-1),ue={class:"col-12 md:col-3"},fe=i("span",{class:"text-red-500"}," *",-1),ge={class:"col-12 md:col-3"},_e=i("span",{class:"text-red-500"}," *",-1),ye={class:"col-12 md:col-3"},we=i("span",{class:"text-red-500"}," *",-1),Ie=q({__name:"Report-Real-Estate",setup(ve){const{t:n}=z(),$=F(),{query:f}=K(),{form:a,getAllRealEstate:h,state:b,setStateFilter:l,getCountries:g,getAllCountries:O,getAllProvinces:S,getProvinces:m,getAllDistricts:V,getDistricts:_}=Z(),{getOne:N,realestateType:w}=Y(),k=L([{id:"all",name:n("messages.all")},{id:"sale",name:n("messages.service_sale")},{id:"rent",name:n("messages.service_rent")}]),U=L([{id:"all",name:n("messages.all")},{id:"air",name:n("messages.air")},{id:"fan",name:n("messages.fan")},{id:"no",name:n("messages.none")}]);async function D(){Object.keys(f).length!==0&&(l.page=f.page?Number(f.page):1,l.limit=f.limit?Number(f.limit):10,$.push({query:{page:l.page,limit:l.limit}})),await E()}M(async()=>{await D()});async function T(e){l.page=e.page+1,l.limit=e.rows;const{page:s,limit:o}=l;$.push({name:"report.real.estate",query:{page:s,limit:o}}),await h()}const A=R(()=>{let e=0;return l.page&&l.limit&&(e=(l.page-1)*l.limit),e}),y=async()=>{l.filter&&(l.filter.real_estate_type_id=a.real_estate_type_id==="all"?"":a.real_estate_type_id,l.filter.service_model=a.service_model==="all"?"":a.service_model,l.filter.room_type=a.room_type==="all"?"":a.room_type,l.filter.district_id=a.district_id==="all"?"":a.district_id),await h()};async function B(e){var o;const s=e.target.name;e.target.value===""&&(s==="search"&&((o=l.filter)==null?void 0:o.search)!==void 0&&(l.filter.search=""),await h())}const P=R({get:()=>l.filter.search||"",set:e=>{l.filter&&(l.filter.search=e)}}),E=async()=>{await h(),await N(),w.props.unshift({id:"all",name:n("messages.all")}),a.room_type="all",a.service_model="all",await O(),await g.data.props.unshift({id:"all",name:n("messages.all")}),a.country_id=g.data.props.length>0?g.data.props[0].id:void 0,await S(g.data.props[0].id),m.data.props.unshift({id:"all",name:n("messages.all")}),a.real_estate_type_id=w.props.length>0?w.props[0].id:void 0,a.province_id=m.data.props.length>0?m.data.props[0].id:void 0,await V(m.data.props[0].id),await _.data.props.unshift({id:"all",name:n("messages.all")}),await C()},C=async()=>{a.district_id=_.data.props.length>0?_.data.props[0].id:void 0},I=async e=>{l.filter&&(await S(e),m.data.props.unshift({id:"all",name:n("messages.all")}),a.province_id=m.data.props.length>0?m.data.props[0].id:void 0,l.filter&&(l.filter.country_id=a.country_id==="all"?"":a.country_id,l.filter.district_id=a.district_id==="all"?"":a.district_id,l.filter.province_id=a.province_id==="all"?"":a.province_id),await h())},j=async e=>{await V(e),await _.data.props.unshift({id:"all",name:n("messages.all")}),await C(),l.filter&&(l.filter.country_id=a.country_id==="all"?"":a.country_id,l.filter.district_id=a.district_id==="all"?"":a.district_id,l.filter.province_id=a.province_id==="all"?"":a.province_id),await h()};return(e,s)=>(G(),H("div",x,[i("div",ee,[i("span",te,[i("h2",ae,p(e.$t("table.title.report_real_estate")),1)]),le]),r(t(W),{value:t(b).data.props,onPage:T,paginator:"",first:A.value,rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",loading:t(b).isLoading,lazy:"",totalRecords:t(b).data.total,rows:t(l).limit,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:`${e.$t("table.pagination.show")} {first} ${e.$t("table.pagination.to")} {last} ${e.$t("table.pagination.from")} {totalRecords} ${e.$t("table.pagination.row")}`},{header:v(()=>[i("div",ie,[i("div",re,[i("label",null,[c(p(e.$t("messages.search"))+" ",1),oe]),r(t(X),{modelValue:P.value,"onUpdate:modelValue":s[0]||(s[0]=o=>P.value=o),placeholder:e.$t("placeholder.textSearch"),style:{"font-family":"NotoSansLao, Montserrat"},class:"w-full",name:"search",onKeyup:J(y,["enter"]),onInput:B},null,8,["modelValue","placeholder"])]),i("div",se,[i("label",null,[c(p(e.$t("messages.realestate_type"))+" ",1),de]),r(t(u),{name:"real_estate_type",modelValue:t(a).real_estate_type_id,"onUpdate:modelValue":s[1]||(s[1]=o=>t(a).real_estate_type_id=o),options:t(w).props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:y},null,8,["modelValue","options","placeholder"])]),i("div",ne,[i("label",null,[c(p(e.$t("messages.service_model"))+" ",1),pe]),r(t(u),{modelValue:t(a).service_model,"onUpdate:modelValue":s[2]||(s[2]=o=>t(a).service_model=o),options:k.value,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),optionValue:"id",highlightOnSelect:!0,class:"w-full",onChange:y},null,8,["modelValue","options","placeholder"])])]),i("div",me,[i("div",ce,[i("label",null,[c(p(e.$t("messages.room_type"))+" ",1),he]),r(t(u),{modelValue:t(a).room_type,"onUpdate:modelValue":s[3]||(s[3]=o=>t(a).room_type=o),options:U.value,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,onChange:y},null,8,["modelValue","options","placeholder"])]),i("div",ue,[i("label",null,[c(p(e.$t("messages.country"))+" ",1),fe]),r(t(u),{modelValue:t(a).country_id,"onUpdate:modelValue":s[4]||(s[4]=o=>t(a).country_id=o),options:t(g).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:s[5]||(s[5]=o=>I(t(a).country_id))},null,8,["modelValue","options","placeholder"])]),i("div",ge,[i("label",null,[c(p(e.$t("messages.province"))+" ",1),_e]),r(t(u),{modelValue:t(a).province_id,"onUpdate:modelValue":s[6]||(s[6]=o=>t(a).province_id=o),options:t(m).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:s[7]||(s[7]=o=>j(t(a).province_id))},null,8,["modelValue","options","placeholder"])]),i("div",ye,[i("label",null,[c(p(e.$t("messages.district"))+" ",1),we]),r(t(u),{modelValue:t(a).district_id,"onUpdate:modelValue":s[8]||(s[8]=o=>t(a).district_id=o),options:t(_).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0,filter:"",onChange:y},null,8,["modelValue","options","placeholder"])])])]),default:v(()=>[r(t(d),{field:"id",header:e.$t("table.header.index")},{body:v(o=>[c(p(o.index+1),1)]),_:1},8,["header"]),r(t(d),{field:"image",header:e.$t("table.header.image"),headerStyle:"min-width: 8rem"},{body:v(({data:o})=>[r(t(Q),{src:o.image,alt:"Image",preview:"",style:{"max-width":"80px"}},null,8,["src"])]),_:1},8,["header"]),r(t(d),{field:"customer.customer_number",header:e.$t("table.header.customer_number"),headerStyle:"min-width: 7rem"},null,8,["header"]),r(t(d),{field:"customer.name",header:e.$t("table.header.customer"),headerStyle:"min-width: 7rem"},null,8,["header"]),r(t(d),{field:"real_esate_number",header:e.$t("table.header.real_esate_number"),headerStyle:"min-width: 7rem"},null,8,["header"]),r(t(d),{field:"name",header:e.$t("table.header.real_estate_name"),headerStyle:"min-width: 7rem"},null,8,["header"]),r(t(d),{field:"real_estate_type.name",header:e.$t("table.header.realestate_type"),headerStyle:"min-width: 7rem"},null,8,["header"]),r(t(d),{field:"service_model",header:e.$t("table.header.service_model"),headerStyle:"min-width: 7rem"},null,8,["header"]),r(t(d),{field:"room_type",header:e.$t("table.header.room_type"),headerStyle:"min-width: 6rem"},null,8,["header"]),r(t(d),{field:"country.name",header:e.$t("table.header.country"),headerStyle:"min-width: 6rem"},null,8,["header"]),r(t(d),{field:"district.province.name",header:e.$t("table.header.province"),headerStyle:"min-width: 8rem"},null,8,["header"]),r(t(d),{field:"district.name",header:e.$t("table.header.district"),headerStyle:"min-width: 7rem"},null,8,["header"]),r(t(d),{field:"village",header:e.$t("table.header.village"),headerStyle:"min-width: 7rem"},null,8,["header"]),r(t(d),{field:"zip_code",header:e.$t("table.header.zip_code"),headerStyle:"min-width: 6rem"},null,8,["header"]),r(t(d),{field:"wide",header:e.$t("table.header.wide"),headerStyle:"min-width: 6rem"},null,8,["header"]),r(t(d),{field:"long",header:e.$t("table.header.long"),headerStyle:"min-width: 6rem"},null,8,["header"]),r(t(d),{field:"status",header:e.$t("table.header.status"),headerStyle:"min-width: 6rem"},null,8,["header"])]),_:1},8,["value","first","loading","totalRecords","rows","currentPageReportTemplate"])]))}});export{Ie as default};
