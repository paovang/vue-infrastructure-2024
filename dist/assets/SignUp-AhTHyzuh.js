import{d as E,u as L,P as N,I as k,C as j,c as W,e as a,t as b,v as i,f as n,W as A,Y as O,p as P,i as R,o as X,X as Y,_ as G}from"./index-kU_R0p5R.js";import{_ as m}from"./FormInputText.vue_vue_type_script_setup_true_lang-0KmihEkG.js";import{_ as w,a as H}from"./FormInputFile.vue_vue_type_script_setup_true_lang-e62mpw6_.js";import{s as y}from"./divider.esm-Cq0xmJze.js";import{c as J,a as d,u as K}from"./index.esm-39kptbBf.js";import{h as Q}from"./home.store--KvtSIK5.js";import{s as Z}from"./dropdown.esm-cvAemcgL.js";import{c as M}from"./axios.config-HGXv1ygo.js";import"./inputtext.esm-K2lcKqKO.js";import"./overlayeventbus.esm-sQdJG6dl.js";import"./format.date--bimoUa2.js";const ee=t=>J({name:d().required(t.name),owner:d().required(t.owner),address:d().required(t.address),phone_number:d().required(t.phone_number),email:d().required(t.email),password:d().required(t.password),password_confirmation:d().required(t.password_confirmation)}),ae=ee,_=t=>(P("data-v-d3d15b01"),t=t(),R(),t),se={class:"signup-form"},le={style:{"font-size":"20px","font-weight":"bold"}},oe=_(()=>a("br",null,null,-1)),ie={class:"columns is-12 is-multiline"},te={class:"column is-6 is-mobile-12"},ne=_(()=>a("span",{class:"text-red-500"}," *",-1)),re={class:"column is-6 is-mobile-12",style:{"margin-top":"-10px"}},de={class:"column is-6 is-mobile-12 is-margin-top"},me={class:"column is-6 is-mobile-12 is-margin-top"},pe={class:"column is-6 is-mobile-12 is-margin-top"},ce={class:"column is-6 is-mobile-12 is-margin-top"},ue={class:"column is-6 is-mobile-12 is-margin-top"},he={class:"column is-6 is-mobile-12 is-margin-pass-confirm"},_e={class:"column is-12 is-mobile-12",style:{"margin-top":"-10px"}},fe={class:"column is-12 is-mobile-12 is-margin-top"},ge=_(()=>a("br",null,null,-1)),be=E({__name:"SignUp",setup(t){const{formSignUp:o,countries:p,getAllData:f,state:c,register:$}=Q(),{t:s}=L(),u=N(),T={name:s("placeholder.inputText"),owner:s("placeholder.inputText"),address:s("placeholder.inputText"),phone_number:s("placeholder.inputText"),email:s("placeholder.inputText"),password:s("placeholder.inputText"),password_confirmation:s("placeholder.inputText")},{handleSubmit:v,handleReset:S}=K({validationSchema:ae(T)});k(async()=>{await f(),o.country_id=p.data.props.length>0?p.data.props[0].id:null});const g=v(async e=>{if(o.name=e.name,o.owner=e.owner,o.address=e.address,o.email=e.email,o.phone_number=e.phone_number,o.password=e.password,o.password_confirmation=e.password_confirmation,o.id_no=e.id_no,o.id_image=h.value,await $(),c.error)await B();else{await U(),await S(),await f(),h.value="";const l=document.getElementById("id_image");l.value="",o.country_id=p.data.props.length>0?p.data.props[0].id:null}}),q=async e=>{const l=e.target.files[0];if(!await F(l)){await x(),e.target.value="";return}if(!await I(l)){await C(),e.target.value="";return}await V(l)},F=async e=>["image/jpeg","image/jpg","image/png"].includes(e.type),I=async e=>e.size<=2097152,h=j(),V=async e=>{var l;c.btnLoading=!0;try{let r=new FormData;r.append("file",e);const D=await M.post("http://127.0.0.1:8000/api/customer/upload-file",r,{headers:{"Content-Type":"multipart/form-data"}});h.value=(l=D.data)==null?void 0:l.filename,c.btnLoading=!1}catch(r){await z(r)}},z=e=>{u.add({severity:"error",summary:s("toast.summary.error"),detail:e,life:3e3})},B=()=>{u.add({severity:"error",summary:s("toast.summary.error"),detail:`${c.error}`,life:3e3})},U=()=>{u.add({severity:"success",summary:s("toast.summary.success"),detail:s("toast.detail.successfully"),life:3e3})},x=()=>{u.add({severity:"error",summary:s("toast.summary.error"),detail:s("toast.summary.sign_up_valid_file_mimes"),life:3e3})},C=()=>{u.add({severity:"error",summary:s("toast.summary.error"),detail:s("toast.summary.sign_up_valid_file_size"),life:3e3})};return(e,l)=>(X(),W("div",se,[a("h2",le,b(e.$t("messages.sign_up")),1),i(n(y)),oe,a("form",{onSubmit:l[1]||(l[1]=O((...r)=>n(g)&&n(g)(...r),["prevent"]))},[a("div",ie,[a("div",te,[a("label",null,[A(b(e.$t("messages.country"))+" ",1),ne]),i(n(Z),{name:"countries",modelValue:n(o).country_id,"onUpdate:modelValue":l[0]||(l[0]=r=>n(o).country_id=r),options:n(p).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options","placeholder"])]),a("div",re,[i(m,{name:"name",label:e.$t("messages.name"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),a("div",de,[i(m,{name:"owner",label:e.$t("messages.owner"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),a("div",me,[i(m,{name:"address",label:e.$t("messages.address"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),a("div",pe,[i(m,{name:"phone_number",label:e.$t("messages.phone_number"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),a("div",ce,[i(m,{name:"email",label:e.$t("messages.email"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),a("div",ue,[i(w,{name:"password",label:e.$t("messages.password"),placeholder:e.$t("placeholder.inputText")},null,8,["label","placeholder"])]),a("div",he,[i(w,{name:"password_confirmation",label:e.$t("messages.confirm_password"),placeholder:e.$t("placeholder.inputText")},null,8,["label","placeholder"])]),a("div",_e,[i(m,{name:"id_no",label:e.$t("messages.id_no"),required:"",placeholder:e.$t("placeholder.inputTextIdNo"),class:"h-full"},null,8,["label","placeholder"])]),a("div",fe,[i(H,{name:"id_image",label:e.$t("messages.id_image"),required:"",multiple:!0,class:"h-full",onChange:q},null,8,["label"])])]),i(n(y)),ge,i(n(Y),{class:"w-full surface-500 border-none",type:"submit",label:e.$t("button.sign_up"),loading:n(c).btnLoading},null,8,["label","loading"])],32)]))}}),Be=G(be,[["__scopeId","data-v-d3d15b01"]]);export{Be as default};
