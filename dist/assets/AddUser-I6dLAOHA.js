import{d as M,K as O,u as L,a as j,r as W,o as D,e as m,f as s,O as c,t as u,y as t,g as o,F as $,i as S,Q as G,p as K,k as Q,j as p,b as H,P as J,_ as X}from"./index-0AAiSvZV.js";import{_}from"./FormInputText.vue_vue_type_script_setup_true_lang-t8xBzSxA.js";import{o as Y}from"./user.store-yz-S5VJh.js";import{s as Z}from"./dropdown.esm-A1Ded1El.js";import{s as y}from"./divider.esm-mDqGvBjU.js";import{s as ee}from"./checkbox.esm-_QBXGN5A.js";import{u as se}from"./vee-validate.esm-Ri9Xf864.js";import{u as oe}from"./user.schema-Cg3KxvlA.js";import{_ as le,u as ae}from"./upload-file-WEAYkILi.js";import{v as te,s as I,i as ie}from"./toast-FY7odgkM.js";import{a as re}from"./axios.config-jCy-uYyV.js";import{v as ne}from"./validation-permissions-um7UbZJF.js";import"./inputtext.esm-z0TnkHhl.js";import"./overlayeventbus.esm-wL7lIrSN.js";import"./index.esm-5KP5yHRh.js";const r=f=>(K("data-v-ab54d0b1"),f=f(),Q(),f),de={class:"card"},me={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},ce={class:"p-input-icon-left w-full sm:w-20rem flex-order-1 sm:flex-order-0"},ue=r(()=>s("i",{class:"pi pi-arrow-left",style:{color:"green"}},null,-1)),pe=r(()=>s("br",null,null,-1)),fe={class:"columns is-12 is-multiline"},he={class:"column is-4 is-mobile-12"},_e={class:"column is-4 is-mobile-12"},be={class:"column is-4 is-mobile-12"},ge={class:"column is-4 is-mobile-12"},we={class:"column is-4 is-mobile-12"},ye=r(()=>s("span",{class:"text-red-500"}," *",-1)),ve={class:"column is-4 is-mobile-12"},$e={style:{"font-size":"18px","font-weight":"bold"}},Se=r(()=>s("i",{class:"pi pi-users"},null,-1)),Ie=r(()=>s("span",{style:{width:"10px"}},null,-1)),Te={class:"column is-12 is-mobile-12",style:{"font-size":"18px","font-weight":"bold"}},xe=r(()=>s("i",{class:"pi pi-check-circle",style:{color:"green"}},null,-1)),Fe={class:"checkbox ml-2"},Ve=r(()=>s("br",null,null,-1)),ke={style:{"text-align":"right"}},Ce=M({__name:"AddUser",setup(f){const{form:i,register:T,getAllRole:x,getAllPermission:F,allPermission:V,allRole:b,state:h}=Y(),n=O(),{t:l}=L(),k=j(),g=W(),C={name:l("placeholder.inputText"),email:l("placeholder.inputText"),password:l("placeholder.inputText"),password_confirmation:l("placeholder.inputText")},{handleSubmit:E,handleReset:R}=se({validationSchema:oe(C)}),B=E(async e=>{if(i.name=e.name,i.email=e.email,i.password=e.password,i.password_confirmation=e.password_confirmation,i.profile=g.value,await T(),h.error)await q();else{await z(),await R(),g.value="";const a=document.getElementById("profile");a.value=""}}),N=async()=>{k.push({name:"owner.user"})},U=async e=>{const a=e.target.files[0];if(!await te(a)){await I({toast:n,error:"error",summary:l("toast.summary.error"),detail:l("toast.summary.profile_valid_file_mimes")}),e.target.value="";return}if(!await ie(a)){await I({toast:n,error:"error",summary:l("toast.summary.error"),detail:l("toast.summary.profile_valid_file_size")}),e.target.value="";return}await ae({axios:re,file:a,state:h,selectedImage:g,toast:n,t:l})};D(async()=>{await x(),await F(),i.roleId=b.data.props.length>0?b.data.props[0].id:void 0});const q=()=>{n.add({severity:"error",summary:l("toast.summary.error"),detail:`${h.error}`,life:3e3})},z=()=>{n.add({severity:"success",summary:l("toast.summary.success"),detail:l("toast.detail.successfully"),life:3e3})};return(e,a)=>(p(),m("div",de,[s("div",me,[s("span",ce,[s("h2",{style:{"font-weight":"bold","font-size":"20px"},class:"arrow-left",onClick:N},[ue,c(" "+u(e.$t("messages.form_register")),1)])])]),t(o(y)),pe,s("form",{onSubmit:a[2]||(a[2]=G(d=>o(B)(),["prevent"])),class:"flex flex-column gap-3 h-full"},[s("div",fe,[s("div",he,[t(_,{ref:"autoFocusCursor",name:"name",label:e.$t("messages.name"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",_e,[t(_,{ref:"autoFocusCursor",name:"email",label:e.$t("messages.email"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",be,[t(_,{ref:"autoFocusCursor",name:"password",label:e.$t("messages.password"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",ge,[t(_,{ref:"autoFocusCursor",name:"password_confirmation",label:e.$t("messages.confirm_password"),required:"",placeholder:e.$t("placeholder.inputText"),class:"h-full"},null,8,["label","placeholder"])]),s("div",we,[s("label",null,[c(u(e.$t("messages.role"))+" ",1),ye]),t(o(Z),{style:{"margin-top":"7px"},modelValue:o(i).roleId,"onUpdate:modelValue":a[0]||(a[0]=d=>o(i).roleId=d),options:o(b).data.props,optionLabel:"name",placeholder:e.$t("placeholder.dropdownSelect"),class:"w-full",optionValue:"id",highlightOnSelect:!0},null,8,["modelValue","options","placeholder"])]),s("div",ve,[t(le,{name:"profile",label:e.$t("messages.profile"),required:"",multiple:!0,class:"h-full",onChange:U},null,8,["label"])])]),s("p",$e,[Se,Ie,c(" "+u(e.$t("messages.permission")),1)]),t(o(y)),(p(!0),m($,null,S(o(V).data.props,(d,A)=>(p(),m("div",{class:"columns is-12 is-multiline",key:A},[s("div",Te,[xe,c(" "+u(d.name),1)]),(p(!0),m($,null,S(d.permissions,(v,w)=>(p(),m("div",{class:"column is-4 is-mobile-12",key:w},[s("label",Fe,[t(o(ee),{modelValue:o(i).permissionIds,"onUpdate:modelValue":a[1]||(a[1]=P=>o(i).permissionIds=P),inputId:"permission_"+w,name:"permission_"+w,value:v.id},null,8,["modelValue","inputId","name","value"]),c(" "+u(v.name),1)])]))),128))]))),128)),t(o(y),{style:{"margin-top":"-10px"}}),Ve,s("div",ke,[t(o(J),{type:"submit",label:e.$t("button.save_data"),loading:o(h).btnLoading,disabled:o(ne)(o(H).OWNER_USER.CREATE)},null,8,["label","loading","disabled"])])],32)]))}}),Ge=X(Ce,[["__scopeId","data-v-ab54d0b1"]]);export{Ge as default};
